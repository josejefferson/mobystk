import{a as w,b as Ot,e as xt,f as J,h as ie,i as p,j as $t,k as S}from"../chunk-ZXTOKSAU.js";var ue=w((ra,St)=>{var Zn="2.0.0",Qn=Number.MAX_SAFE_INTEGER||9007199254740991,ei=16,ti=250,ri=["major","premajor","minor","preminor","patch","prepatch","prerelease"];St.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:ei,MAX_SAFE_BUILD_LENGTH:ti,MAX_SAFE_INTEGER:Qn,RELEASE_TYPES:ri,SEMVER_SPEC_VERSION:Zn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var de=w((na,Tt)=>{var ni=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};Tt.exports=ni});var oe=w((U,Rt)=>{var{MAX_SAFE_COMPONENT_LENGTH:Je,MAX_SAFE_BUILD_LENGTH:ii,MAX_LENGTH:oi}=ue(),si=de();U=Rt.exports={};var ai=U.re=[],ci=U.safeRe=[],h=U.src=[],m=U.t={},li=0,Ke="[a-zA-Z0-9-]",ui=[["\\s",1],["\\d",oi],[Ke,ii]],di=r=>{for(let[e,t]of ui)r=r.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return r},L=(r,e,t)=>{let n=di(e),s=li++;si(r,s,e),m[r]=s,h[s]=e,ai[s]=new RegExp(e,t?"g":void 0),ci[s]=new RegExp(n,t?"g":void 0)};L("NUMERICIDENTIFIER","0|[1-9]\\d*");L("NUMERICIDENTIFIERLOOSE","\\d+");L("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Ke}*`);L("MAINVERSION",`(${h[m.NUMERICIDENTIFIER]})\\.(${h[m.NUMERICIDENTIFIER]})\\.(${h[m.NUMERICIDENTIFIER]})`);L("MAINVERSIONLOOSE",`(${h[m.NUMERICIDENTIFIERLOOSE]})\\.(${h[m.NUMERICIDENTIFIERLOOSE]})\\.(${h[m.NUMERICIDENTIFIERLOOSE]})`);L("PRERELEASEIDENTIFIER",`(?:${h[m.NUMERICIDENTIFIER]}|${h[m.NONNUMERICIDENTIFIER]})`);L("PRERELEASEIDENTIFIERLOOSE",`(?:${h[m.NUMERICIDENTIFIERLOOSE]}|${h[m.NONNUMERICIDENTIFIER]})`);L("PRERELEASE",`(?:-(${h[m.PRERELEASEIDENTIFIER]}(?:\\.${h[m.PRERELEASEIDENTIFIER]})*))`);L("PRERELEASELOOSE",`(?:-?(${h[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${h[m.PRERELEASEIDENTIFIERLOOSE]})*))`);L("BUILDIDENTIFIER",`${Ke}+`);L("BUILD",`(?:\\+(${h[m.BUILDIDENTIFIER]}(?:\\.${h[m.BUILDIDENTIFIER]})*))`);L("FULLPLAIN",`v?${h[m.MAINVERSION]}${h[m.PRERELEASE]}?${h[m.BUILD]}?`);L("FULL",`^${h[m.FULLPLAIN]}$`);L("LOOSEPLAIN",`[v=\\s]*${h[m.MAINVERSIONLOOSE]}${h[m.PRERELEASELOOSE]}?${h[m.BUILD]}?`);L("LOOSE",`^${h[m.LOOSEPLAIN]}$`);L("GTLT","((?:<|>)?=?)");L("XRANGEIDENTIFIERLOOSE",`${h[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);L("XRANGEIDENTIFIER",`${h[m.NUMERICIDENTIFIER]}|x|X|\\*`);L("XRANGEPLAIN",`[v=\\s]*(${h[m.XRANGEIDENTIFIER]})(?:\\.(${h[m.XRANGEIDENTIFIER]})(?:\\.(${h[m.XRANGEIDENTIFIER]})(?:${h[m.PRERELEASE]})?${h[m.BUILD]}?)?)?`);L("XRANGEPLAINLOOSE",`[v=\\s]*(${h[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[m.XRANGEIDENTIFIERLOOSE]})(?:${h[m.PRERELEASELOOSE]})?${h[m.BUILD]}?)?)?`);L("XRANGE",`^${h[m.GTLT]}\\s*${h[m.XRANGEPLAIN]}$`);L("XRANGELOOSE",`^${h[m.GTLT]}\\s*${h[m.XRANGEPLAINLOOSE]}$`);L("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Je}})(?:\\.(\\d{1,${Je}}))?(?:\\.(\\d{1,${Je}}))?`);L("COERCE",`${h[m.COERCEPLAIN]}(?:$|[^\\d])`);L("COERCEFULL",h[m.COERCEPLAIN]+`(?:${h[m.PRERELEASE]})?(?:${h[m.BUILD]})?(?:$|[^\\d])`);L("COERCERTL",h[m.COERCE],!0);L("COERCERTLFULL",h[m.COERCEFULL],!0);L("LONETILDE","(?:~>?)");L("TILDETRIM",`(\\s*)${h[m.LONETILDE]}\\s+`,!0);U.tildeTrimReplace="$1~";L("TILDE",`^${h[m.LONETILDE]}${h[m.XRANGEPLAIN]}$`);L("TILDELOOSE",`^${h[m.LONETILDE]}${h[m.XRANGEPLAINLOOSE]}$`);L("LONECARET","(?:\\^)");L("CARETTRIM",`(\\s*)${h[m.LONECARET]}\\s+`,!0);U.caretTrimReplace="$1^";L("CARET",`^${h[m.LONECARET]}${h[m.XRANGEPLAIN]}$`);L("CARETLOOSE",`^${h[m.LONECARET]}${h[m.XRANGEPLAINLOOSE]}$`);L("COMPARATORLOOSE",`^${h[m.GTLT]}\\s*(${h[m.LOOSEPLAIN]})$|^$`);L("COMPARATOR",`^${h[m.GTLT]}\\s*(${h[m.FULLPLAIN]})$|^$`);L("COMPARATORTRIM",`(\\s*)${h[m.GTLT]}\\s*(${h[m.LOOSEPLAIN]}|${h[m.XRANGEPLAIN]})`,!0);U.comparatorTrimReplace="$1$2$3";L("HYPHENRANGE",`^\\s*(${h[m.XRANGEPLAIN]})\\s+-\\s+(${h[m.XRANGEPLAIN]})\\s*$`);L("HYPHENRANGELOOSE",`^\\s*(${h[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${h[m.XRANGEPLAINLOOSE]})\\s*$`);L("STAR","(<|>)?=?\\s*\\*");L("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");L("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var $e=w((ia,kt)=>{var pi=Object.freeze({loose:!0}),fi=Object.freeze({}),hi=r=>r?typeof r!="object"?pi:r:fi;kt.exports=hi});var Xe=w((oa,Nt)=>{var Ct=/^[0-9]+$/,At=(r,e)=>{let t=Ct.test(r),n=Ct.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},mi=(r,e)=>At(e,r);Nt.exports={compareIdentifiers:At,rcompareIdentifiers:mi}});var _=w((sa,qt)=>{var Se=de(),{MAX_LENGTH:Pt,MAX_SAFE_INTEGER:Te}=ue(),{safeRe:_t,t:Dt}=oe(),yi=$e(),{compareIdentifiers:se}=Xe(),Be=class r{constructor(e,t){if(t=yi(t),e instanceof r){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Pt)throw new TypeError(`version is longer than ${Pt} characters`);Se("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?_t[Dt.LOOSE]:_t[Dt.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Te||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Te||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Te||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let a=+s;if(a>=0&&a<Te)return a}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Se("SemVer.compare",this.version,this.options,e),!(e instanceof r)){if(typeof e=="string"&&e===this.version)return 0;e=new r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof r||(e=new r(e,this.options)),se(this.major,e.major)||se(this.minor,e.minor)||se(this.patch,e.patch)}comparePre(e){if(e instanceof r||(e=new r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=e.prerelease[t];if(Se("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return se(n,s)}while(++t)}compareBuild(e){e instanceof r||(e=new r(e,this.options));let t=0;do{let n=this.build[t],s=e.build[t];if(Se("build compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return se(n,s)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(t){let a=[t,s];n===!1&&(a=[t]),se(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};qt.exports=Be});var Q=w((aa,Gt)=>{var Mt=_(),gi=(r,e,t=!1)=>{if(r instanceof Mt)return r;try{return new Mt(r,e)}catch(n){if(!t)return null;throw n}};Gt.exports=gi});var Ht=w((ca,Ft)=>{var Ei=Q(),vi=(r,e)=>{let t=Ei(r,e);return t?t.version:null};Ft.exports=vi});var zt=w((la,jt)=>{var bi=Q(),Ii=(r,e)=>{let t=bi(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};jt.exports=Ii});var Xt=w((ua,Kt)=>{var Jt=_(),wi=(r,e,t,n,s)=>{typeof t=="string"&&(s=n,n=t,t=void 0);try{return new Jt(r instanceof Jt?r.version:r,t).inc(e,n,s).version}catch{return null}};Kt.exports=wi});var Vt=w((da,Ut)=>{var Bt=Q(),Li=(r,e)=>{let t=Bt(r,null,!0),n=Bt(e,null,!0),s=t.compare(n);if(s===0)return null;let a=s>0,d=a?t:n,f=a?n:t,y=!!d.prerelease.length;if(!!f.prerelease.length&&!y)return!f.patch&&!f.minor?"major":d.patch?"patch":d.minor?"minor":"major";let O=y?"pre":"";return t.major!==n.major?O+"major":t.minor!==n.minor?O+"minor":t.patch!==n.patch?O+"patch":"prerelease"};Ut.exports=Li});var Wt=w((pa,Yt)=>{var Oi=_(),xi=(r,e)=>new Oi(r,e).major;Yt.exports=xi});var Qt=w((fa,Zt)=>{var $i=_(),Si=(r,e)=>new $i(r,e).minor;Zt.exports=Si});var tr=w((ha,er)=>{var Ti=_(),Ri=(r,e)=>new Ti(r,e).patch;er.exports=Ri});var nr=w((ma,rr)=>{var ki=Q(),Ci=(r,e)=>{let t=ki(r,e);return t&&t.prerelease.length?t.prerelease:null};rr.exports=Ci});var F=w((ya,or)=>{var ir=_(),Ai=(r,e,t)=>new ir(r,t).compare(new ir(e,t));or.exports=Ai});var ar=w((ga,sr)=>{var Ni=F(),Pi=(r,e,t)=>Ni(e,r,t);sr.exports=Pi});var lr=w((Ea,cr)=>{var _i=F(),Di=(r,e)=>_i(r,e,!0);cr.exports=Di});var Re=w((va,dr)=>{var ur=_(),qi=(r,e,t)=>{let n=new ur(r,t),s=new ur(e,t);return n.compare(s)||n.compareBuild(s)};dr.exports=qi});var fr=w((ba,pr)=>{var Mi=Re(),Gi=(r,e)=>r.sort((t,n)=>Mi(t,n,e));pr.exports=Gi});var mr=w((Ia,hr)=>{var Fi=Re(),Hi=(r,e)=>r.sort((t,n)=>Fi(n,t,e));hr.exports=Hi});var pe=w((wa,yr)=>{var ji=F(),zi=(r,e,t)=>ji(r,e,t)>0;yr.exports=zi});var ke=w((La,gr)=>{var Ji=F(),Ki=(r,e,t)=>Ji(r,e,t)<0;gr.exports=Ki});var Ue=w((Oa,Er)=>{var Xi=F(),Bi=(r,e,t)=>Xi(r,e,t)===0;Er.exports=Bi});var Ve=w((xa,vr)=>{var Ui=F(),Vi=(r,e,t)=>Ui(r,e,t)!==0;vr.exports=Vi});var Ce=w(($a,br)=>{var Yi=F(),Wi=(r,e,t)=>Yi(r,e,t)>=0;br.exports=Wi});var Ae=w((Sa,Ir)=>{var Zi=F(),Qi=(r,e,t)=>Zi(r,e,t)<=0;Ir.exports=Qi});var Ye=w((Ta,wr)=>{var eo=Ue(),to=Ve(),ro=pe(),no=Ce(),io=ke(),oo=Ae(),so=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return eo(r,t,n);case"!=":return to(r,t,n);case">":return ro(r,t,n);case">=":return no(r,t,n);case"<":return io(r,t,n);case"<=":return oo(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};wr.exports=so});var Or=w((Ra,Lr)=>{var ao=_(),co=Q(),{safeRe:Ne,t:Pe}=oe(),lo=(r,e)=>{if(r instanceof ao)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(e.includePrerelease?Ne[Pe.COERCEFULL]:Ne[Pe.COERCE]);else{let y=e.includePrerelease?Ne[Pe.COERCERTLFULL]:Ne[Pe.COERCERTL],I;for(;(I=y.exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||I.index+I[0].length!==t.index+t[0].length)&&(t=I),y.lastIndex=I.index+I[1].length+I[2].length;y.lastIndex=-1}if(t===null)return null;let n=t[2],s=t[3]||"0",a=t[4]||"0",d=e.includePrerelease&&t[5]?`-${t[5]}`:"",f=e.includePrerelease&&t[6]?`+${t[6]}`:"";return co(`${n}.${s}.${a}${d}${f}`,e)};Lr.exports=lo});var $r=w((ka,xr)=>{var We=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(e,t)}return this}};xr.exports=We});var H=w((Ca,kr)=>{var uo=/\s+/g,Ze=class r{constructor(e,t){if(t=fo(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof Qe)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(uo," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!Tr(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&bo(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let n=0;n<t.length;n++)n>0&&(this.formatted+=" "),this.formatted+=t[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&Eo)|(this.options.loose&&vo))+":"+e,s=Sr.get(n);if(s)return s;let a=this.options.loose,d=a?M[D.HYPHENRANGELOOSE]:M[D.HYPHENRANGE];e=e.replace(d,ko(this.options.includePrerelease)),R("hyphen replace",e),e=e.replace(M[D.COMPARATORTRIM],mo),R("comparator trim",e),e=e.replace(M[D.TILDETRIM],yo),R("tilde trim",e),e=e.replace(M[D.CARETTRIM],go),R("caret trim",e);let f=e.split(" ").map(v=>Io(v,this.options)).join(" ").split(/\s+/).map(v=>Ro(v,this.options));a&&(f=f.filter(v=>(R("loose invalid filter",v,this.options),!!v.match(M[D.COMPARATORLOOSE])))),R("range list",f);let y=new Map,I=f.map(v=>new Qe(v,this.options));for(let v of I){if(Tr(v))return[v];y.set(v.value,v)}y.size>1&&y.has("")&&y.delete("");let O=[...y.values()];return Sr.set(n,O),O}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>Rr(n,t)&&e.set.some(s=>Rr(s,t)&&n.every(a=>s.every(d=>a.intersects(d,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ho(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Co(this.set[t],e,this.options))return!0;return!1}};kr.exports=Ze;var po=$r(),Sr=new po,fo=$e(),Qe=fe(),R=de(),ho=_(),{safeRe:M,t:D,comparatorTrimReplace:mo,tildeTrimReplace:yo,caretTrimReplace:go}=oe(),{FLAG_INCLUDE_PRERELEASE:Eo,FLAG_LOOSE:vo}=ue(),Tr=r=>r.value==="<0.0.0-0",bo=r=>r.value==="",Rr=(r,e)=>{let t=!0,n=r.slice(),s=n.pop();for(;t&&n.length;)t=n.every(a=>s.intersects(a,e)),s=n.pop();return t},Io=(r,e)=>(R("comp",r,e),r=Oo(r,e),R("caret",r),r=wo(r,e),R("tildes",r),r=$o(r,e),R("xrange",r),r=To(r,e),R("stars",r),r),q=r=>!r||r.toLowerCase()==="x"||r==="*",wo=(r,e)=>r.trim().split(/\s+/).map(t=>Lo(t,e)).join(" "),Lo=(r,e)=>{let t=e.loose?M[D.TILDELOOSE]:M[D.TILDE];return r.replace(t,(n,s,a,d,f)=>{R("tilde",r,n,s,a,d,f);let y;return q(s)?y="":q(a)?y=`>=${s}.0.0 <${+s+1}.0.0-0`:q(d)?y=`>=${s}.${a}.0 <${s}.${+a+1}.0-0`:f?(R("replaceTilde pr",f),y=`>=${s}.${a}.${d}-${f} <${s}.${+a+1}.0-0`):y=`>=${s}.${a}.${d} <${s}.${+a+1}.0-0`,R("tilde return",y),y})},Oo=(r,e)=>r.trim().split(/\s+/).map(t=>xo(t,e)).join(" "),xo=(r,e)=>{R("caret",r,e);let t=e.loose?M[D.CARETLOOSE]:M[D.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(s,a,d,f,y)=>{R("caret",r,s,a,d,f,y);let I;return q(a)?I="":q(d)?I=`>=${a}.0.0${n} <${+a+1}.0.0-0`:q(f)?a==="0"?I=`>=${a}.${d}.0${n} <${a}.${+d+1}.0-0`:I=`>=${a}.${d}.0${n} <${+a+1}.0.0-0`:y?(R("replaceCaret pr",y),a==="0"?d==="0"?I=`>=${a}.${d}.${f}-${y} <${a}.${d}.${+f+1}-0`:I=`>=${a}.${d}.${f}-${y} <${a}.${+d+1}.0-0`:I=`>=${a}.${d}.${f}-${y} <${+a+1}.0.0-0`):(R("no pr"),a==="0"?d==="0"?I=`>=${a}.${d}.${f}${n} <${a}.${d}.${+f+1}-0`:I=`>=${a}.${d}.${f}${n} <${a}.${+d+1}.0-0`:I=`>=${a}.${d}.${f} <${+a+1}.0.0-0`),R("caret return",I),I})},$o=(r,e)=>(R("replaceXRanges",r,e),r.split(/\s+/).map(t=>So(t,e)).join(" ")),So=(r,e)=>{r=r.trim();let t=e.loose?M[D.XRANGELOOSE]:M[D.XRANGE];return r.replace(t,(n,s,a,d,f,y)=>{R("xRange",r,n,s,a,d,f,y);let I=q(a),O=I||q(d),v=O||q(f),x=v;return s==="="&&x&&(s=""),y=e.includePrerelease?"-0":"",I?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&x?(O&&(d=0),f=0,s===">"?(s=">=",O?(a=+a+1,d=0,f=0):(d=+d+1,f=0)):s==="<="&&(s="<",O?a=+a+1:d=+d+1),s==="<"&&(y="-0"),n=`${s+a}.${d}.${f}${y}`):O?n=`>=${a}.0.0${y} <${+a+1}.0.0-0`:v&&(n=`>=${a}.${d}.0${y} <${a}.${+d+1}.0-0`),R("xRange return",n),n})},To=(r,e)=>(R("replaceStars",r,e),r.trim().replace(M[D.STAR],"")),Ro=(r,e)=>(R("replaceGTE0",r,e),r.trim().replace(M[e.includePrerelease?D.GTE0PRE:D.GTE0],"")),ko=r=>(e,t,n,s,a,d,f,y,I,O,v,x)=>(q(n)?t="":q(s)?t=`>=${n}.0.0${r?"-0":""}`:q(a)?t=`>=${n}.${s}.0${r?"-0":""}`:d?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,q(I)?y="":q(O)?y=`<${+I+1}.0.0-0`:q(v)?y=`<${I}.${+O+1}.0-0`:x?y=`<=${I}.${O}.${v}-${x}`:r?y=`<${I}.${O}.${+v+1}-0`:y=`<=${y}`,`${t} ${y}`.trim()),Co=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(R(r[n].semver),r[n].semver!==Qe.ANY&&r[n].semver.prerelease.length>0){let s=r[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var fe=w((Aa,Dr)=>{var he=Symbol("SemVer ANY"),rt=class r{static get ANY(){return he}constructor(e,t){if(t=Cr(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),tt("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===he?this.value="":this.value=this.operator+this.semver.version,tt("comp",this)}parse(e){let t=this.options.loose?Ar[Nr.COMPARATORLOOSE]:Ar[Nr.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Pr(n[2],this.options.loose):this.semver=he}toString(){return this.value}test(e){if(tt("Comparator.test",e,this.options.loose),this.semver===he||e===he)return!0;if(typeof e=="string")try{e=new Pr(e,this.options)}catch{return!1}return et(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new _r(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new _r(this.value,t).test(e.semver):(t=Cr(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||et(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||et(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Dr.exports=rt;var Cr=$e(),{safeRe:Ar,t:Nr}=oe(),et=Ye(),tt=de(),Pr=_(),_r=H()});var me=w((Na,qr)=>{var Ao=H(),No=(r,e,t)=>{try{e=new Ao(e,t)}catch{return!1}return e.test(r)};qr.exports=No});var Gr=w((Pa,Mr)=>{var Po=H(),_o=(r,e)=>new Po(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));Mr.exports=_o});var Hr=w((_a,Fr)=>{var Do=_(),qo=H(),Mo=(r,e,t)=>{let n=null,s=null,a=null;try{a=new qo(e,t)}catch{return null}return r.forEach(d=>{a.test(d)&&(!n||s.compare(d)===-1)&&(n=d,s=new Do(n,t))}),n};Fr.exports=Mo});var zr=w((Da,jr)=>{var Go=_(),Fo=H(),Ho=(r,e,t)=>{let n=null,s=null,a=null;try{a=new Fo(e,t)}catch{return null}return r.forEach(d=>{a.test(d)&&(!n||s.compare(d)===1)&&(n=d,s=new Go(n,t))}),n};jr.exports=Ho});var Xr=w((qa,Kr)=>{var nt=_(),jo=H(),Jr=pe(),zo=(r,e)=>{r=new jo(r,e);let t=new nt("0.0.0");if(r.test(t)||(t=new nt("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){let s=r.set[n],a=null;s.forEach(d=>{let f=new nt(d.semver.version);switch(d.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!a||Jr(f,a))&&(a=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${d.operator}`)}}),a&&(!t||Jr(t,a))&&(t=a)}return t&&r.test(t)?t:null};Kr.exports=zo});var Ur=w((Ma,Br)=>{var Jo=H(),Ko=(r,e)=>{try{return new Jo(r,e).range||"*"}catch{return null}};Br.exports=Ko});var _e=w((Ga,Zr)=>{var Xo=_(),Wr=fe(),{ANY:Bo}=Wr,Uo=H(),Vo=me(),Vr=pe(),Yr=ke(),Yo=Ae(),Wo=Ce(),Zo=(r,e,t,n)=>{r=new Xo(r,n),e=new Uo(e,n);let s,a,d,f,y;switch(t){case">":s=Vr,a=Yo,d=Yr,f=">",y=">=";break;case"<":s=Yr,a=Wo,d=Vr,f="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Vo(r,e,n))return!1;for(let I=0;I<e.set.length;++I){let O=e.set[I],v=null,x=null;if(O.forEach(g=>{g.semver===Bo&&(g=new Wr(">=0.0.0")),v=v||g,x=x||g,s(g.semver,v.semver,n)?v=g:d(g.semver,x.semver,n)&&(x=g)}),v.operator===f||v.operator===y||(!x.operator||x.operator===f)&&a(r,x.semver))return!1;if(x.operator===y&&d(r,x.semver))return!1}return!0};Zr.exports=Zo});var en=w((Fa,Qr)=>{var Qo=_e(),es=(r,e,t)=>Qo(r,e,">",t);Qr.exports=es});var rn=w((Ha,tn)=>{var ts=_e(),rs=(r,e,t)=>ts(r,e,"<",t);tn.exports=rs});var sn=w((ja,on)=>{var nn=H(),ns=(r,e,t)=>(r=new nn(r,t),e=new nn(e,t),r.intersects(e,t));on.exports=ns});var cn=w((za,an)=>{var is=me(),os=F();an.exports=(r,e,t)=>{let n=[],s=null,a=null,d=r.sort((O,v)=>os(O,v,t));for(let O of d)is(O,e,t)?(a=O,s||(s=O)):(a&&n.push([s,a]),a=null,s=null);s&&n.push([s,null]);let f=[];for(let[O,v]of n)O===v?f.push(O):!v&&O===d[0]?f.push("*"):v?O===d[0]?f.push(`<=${v}`):f.push(`${O} - ${v}`):f.push(`>=${O}`);let y=f.join(" || "),I=typeof e.raw=="string"?e.raw:String(e);return y.length<I.length?y:e}});var hn=w((Ja,fn)=>{var ln=H(),ot=fe(),{ANY:it}=ot,ye=me(),st=F(),ss=(r,e,t={})=>{if(r===e)return!0;r=new ln(r,t),e=new ln(e,t);let n=!1;e:for(let s of r.set){for(let a of e.set){let d=cs(s,a,t);if(n=n||d!==null,d)continue e}if(n)return!1}return!0},as=[new ot(">=0.0.0-0")],un=[new ot(">=0.0.0")],cs=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===it){if(e.length===1&&e[0].semver===it)return!0;t.includePrerelease?r=as:r=un}if(e.length===1&&e[0].semver===it){if(t.includePrerelease)return!0;e=un}let n=new Set,s,a;for(let g of r)g.operator===">"||g.operator===">="?s=dn(s,g,t):g.operator==="<"||g.operator==="<="?a=pn(a,g,t):n.add(g.semver);if(n.size>1)return null;let d;if(s&&a){if(d=st(s.semver,a.semver,t),d>0)return null;if(d===0&&(s.operator!==">="||a.operator!=="<="))return null}for(let g of n){if(s&&!ye(g,String(s),t)||a&&!ye(g,String(a),t))return null;for(let Y of e)if(!ye(g,String(Y),t))return!1;return!0}let f,y,I,O,v=a&&!t.includePrerelease&&a.semver.prerelease.length?a.semver:!1,x=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1;v&&v.prerelease.length===1&&a.operator==="<"&&v.prerelease[0]===0&&(v=!1);for(let g of e){if(O=O||g.operator===">"||g.operator===">=",I=I||g.operator==="<"||g.operator==="<=",s){if(x&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===x.major&&g.semver.minor===x.minor&&g.semver.patch===x.patch&&(x=!1),g.operator===">"||g.operator===">="){if(f=dn(s,g,t),f===g&&f!==s)return!1}else if(s.operator===">="&&!ye(s.semver,String(g),t))return!1}if(a){if(v&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===v.major&&g.semver.minor===v.minor&&g.semver.patch===v.patch&&(v=!1),g.operator==="<"||g.operator==="<="){if(y=pn(a,g,t),y===g&&y!==a)return!1}else if(a.operator==="<="&&!ye(a.semver,String(g),t))return!1}if(!g.operator&&(a||s)&&d!==0)return!1}return!(s&&I&&!a&&d!==0||a&&O&&!s&&d!==0||x||v)},dn=(r,e,t)=>{if(!r)return e;let n=st(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},pn=(r,e,t)=>{if(!r)return e;let n=st(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};fn.exports=ss});var En=w((Ka,gn)=>{var at=oe(),mn=ue(),ls=_(),yn=Xe(),us=Q(),ds=Ht(),ps=zt(),fs=Xt(),hs=Vt(),ms=Wt(),ys=Qt(),gs=tr(),Es=nr(),vs=F(),bs=ar(),Is=lr(),ws=Re(),Ls=fr(),Os=mr(),xs=pe(),$s=ke(),Ss=Ue(),Ts=Ve(),Rs=Ce(),ks=Ae(),Cs=Ye(),As=Or(),Ns=fe(),Ps=H(),_s=me(),Ds=Gr(),qs=Hr(),Ms=zr(),Gs=Xr(),Fs=Ur(),Hs=_e(),js=en(),zs=rn(),Js=sn(),Ks=cn(),Xs=hn();gn.exports={parse:us,valid:ds,clean:ps,inc:fs,diff:hs,major:ms,minor:ys,patch:gs,prerelease:Es,compare:vs,rcompare:bs,compareLoose:Is,compareBuild:ws,sort:Ls,rsort:Os,gt:xs,lt:$s,eq:Ss,neq:Ts,gte:Rs,lte:ks,cmp:Cs,coerce:As,Comparator:Ns,Range:Ps,satisfies:_s,toComparators:Ds,maxSatisfying:qs,minSatisfying:Ms,minVersion:Gs,validRange:Fs,outside:Hs,gtr:js,ltr:zs,intersects:Js,simplifyRange:Ks,subset:Xs,SemVer:ls,re:at.re,src:at.src,tokens:at.t,SEMVER_SPEC_VERSION:mn.SEMVER_SPEC_VERSION,RELEASE_TYPES:mn.RELEASE_TYPES,compareIdentifiers:yn.compareIdentifiers,rcompareIdentifiers:yn.rcompareIdentifiers}});var Nn=w((Ge,mt)=>{(function(r,e){typeof Ge=="object"&&typeof mt=="object"?mt.exports=e():typeof define=="function"&&define.amd?define("nipplejs",[],e):typeof Ge=="object"?Ge.nipplejs=e():r.nipplejs=e()})(window,function(){return function(r){var e={};function t(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return r[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}return t.m=r,t.c=e,t.d=function(n,s,a){t.o(n,s)||Object.defineProperty(n,s,{enumerable:!0,get:a})},t.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,s){if(1&s&&(n=t(n)),8&s||4&s&&typeof n=="object"&&n&&n.__esModule)return n;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&s&&typeof n!="string")for(var d in n)t.d(a,d,function(f){return n[f]}.bind(null,d));return a},t.n=function(n){var s=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(s,"a",s),s},t.o=function(n,s){return Object.prototype.hasOwnProperty.call(n,s)},t.p="",t(t.s=0)}([function(r,e,t){"use strict";t.r(e);var n,s=function(o,i){var c=i.x-o.x,l=i.y-o.y;return Math.sqrt(c*c+l*l)},a=function(o){return o*(Math.PI/180)},d=function(o){return o*(180/Math.PI)},f=new Map,y=function(o){f.has(o)&&clearTimeout(f.get(o)),f.set(o,setTimeout(o,100))},I=function(o,i,c){for(var l,u=i.split(/[ ,]+/g),E=0;E<u.length;E+=1)l=u[E],o.addEventListener?o.addEventListener(l,c,!1):o.attachEvent&&o.attachEvent(l,c)},O=function(o,i,c){for(var l,u=i.split(/[ ,]+/g),E=0;E<u.length;E+=1)l=u[E],o.removeEventListener?o.removeEventListener(l,c):o.detachEvent&&o.detachEvent(l,c)},v=function(o){return o.preventDefault(),o.type.match(/^touch/)?o.changedTouches:o},x=function(){return{x:window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},g=function(o,i){i.top||i.right||i.bottom||i.left?(o.style.top=i.top,o.style.right=i.right,o.style.bottom=i.bottom,o.style.left=i.left):(o.style.left=i.x+"px",o.style.top=i.y+"px")},Y=function(o,i,c){var l=ve(o);for(var u in l)if(l.hasOwnProperty(u))if(typeof i=="string")l[u]=i+" "+c;else{for(var E="",$=0,b=i.length;$<b;$+=1)E+=i[$]+" "+c+", ";l[u]=E.slice(0,-2)}return l},ve=function(o){var i={};return i[o]="",["webkit","Moz","o"].forEach(function(c){i[c+o.charAt(0).toUpperCase()+o.slice(1)]=""}),i},j=function(o,i){for(var c in i)i.hasOwnProperty(c)&&(o[c]=i[c]);return o},Fe=function(o,i){if(o.length)for(var c=0,l=o.length;c<l;c+=1)i(o[c]);else i(o)},jn="ontouchstart"in window,zn=!!window.PointerEvent,Jn=!!window.MSPointerEvent,Et={start:"mousedown",move:"mousemove",end:"mouseup"},ce={};function W(){}zn?n={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:Jn?n={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:jn?(n={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},ce=Et):n=Et,W.prototype.on=function(o,i){var c,l=o.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var u=0;u<l.length;u+=1)c=l[u],this._handlers_[c]=this._handlers_[c]||[],this._handlers_[c].push(i);return this},W.prototype.off=function(o,i){return this._handlers_=this._handlers_||{},o===void 0?this._handlers_={}:i===void 0?this._handlers_[o]=null:this._handlers_[o]&&this._handlers_[o].indexOf(i)>=0&&this._handlers_[o].splice(this._handlers_[o].indexOf(i),1),this},W.prototype.trigger=function(o,i){var c,l=this,u=o.split(/[ ,]+/g);l._handlers_=l._handlers_||{};for(var E=0;E<u.length;E+=1)c=u[E],l._handlers_[c]&&l._handlers_[c].length&&l._handlers_[c].forEach(function($){$.call(l,{type:c,target:l},i)})},W.prototype.config=function(o){this.options=this.defaults||{},o&&(this.options=function(i,c){var l={};for(var u in i)i.hasOwnProperty(u)&&c.hasOwnProperty(u)?l[u]=c[u]:i.hasOwnProperty(u)&&(l[u]=i[u]);return l}(this.options,o))},W.prototype.bindEvt=function(o,i){var c=this;return c._domHandlers_=c._domHandlers_||{},c._domHandlers_[i]=function(){typeof c["on"+i]=="function"?c["on"+i].apply(c,arguments):console.warn('[WARNING] : Missing "on'+i+'" handler.')},I(o,n[i],c._domHandlers_[i]),ce[i]&&I(o,ce[i],c._domHandlers_[i]),c},W.prototype.unbindEvt=function(o,i){return this._domHandlers_=this._domHandlers_||{},O(o,n[i],this._domHandlers_[i]),ce[i]&&O(o,ce[i],this._domHandlers_[i]),delete this._domHandlers_[i],this};var He=W;function A(o,i){return this.identifier=i.identifier,this.position=i.position,this.frontPosition=i.frontPosition,this.collection=o,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(i),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=A.id,A.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}A.prototype=new He,A.constructor=A,A.id=0,A.prototype.buildEl=function(o){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},A.prototype.stylize=function(){if(this.options.dataOnly)return this;var o=this.options.fadeTime+"ms",i=function(u,E){var $=ve(u);for(var b in $)$.hasOwnProperty(b)&&($[b]=E);return $}("borderRadius","50%"),c=Y("transition","opacity",o),l={};return l.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},l.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},l.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},j(l.el,c),this.options.shape==="circle"&&j(l.back,i),j(l.front,i),this.applyStyles(l),this},A.prototype.applyStyles=function(o){for(var i in this.ui)if(this.ui.hasOwnProperty(i))for(var c in o[i])this.ui[i].style[c]=o[i][c];return this},A.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},A.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},A.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},A.prototype.show=function(o){var i=this;return i.options.dataOnly||(clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.addToDom(),i.restCallback(),setTimeout(function(){i.ui.el.style.opacity=1},0),i.showTimeout=setTimeout(function(){i.trigger("shown",i.instance),typeof o=="function"&&o.call(this)},i.options.fadeTime)),i},A.prototype.hide=function(o){var i=this;if(i.options.dataOnly)return i;if(i.ui.el.style.opacity=i.options.restOpacity,clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.removeTimeout=setTimeout(function(){var u=i.options.mode==="dynamic"?"none":"block";i.ui.el.style.display=u,typeof o=="function"&&o.call(i),i.trigger("hidden",i.instance)},i.options.fadeTime),i.options.restJoystick){var c=i.options.restJoystick,l={};l.x=c===!0||c.x!==!1?0:i.instance.frontPosition.x,l.y=c===!0||c.y!==!1?0:i.instance.frontPosition.y,i.setPosition(o,l)}return i},A.prototype.setPosition=function(o,i){var c=this;c.frontPosition={x:i.x,y:i.y};var l=c.options.fadeTime+"ms",u={};u.front=Y("transition",["top","left"],l);var E={front:{}};E.front={left:c.frontPosition.x+"px",top:c.frontPosition.y+"px"},c.applyStyles(u),c.applyStyles(E),c.restTimeout=setTimeout(function(){typeof o=="function"&&o.call(c),c.restCallback()},c.options.fadeTime)},A.prototype.restCallback=function(){var o={};o.front=Y("transition","none",""),this.applyStyles(o),this.trigger("rested",this.instance)},A.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},A.prototype.computeDirection=function(o){var i,c,l,u=o.angle.radian,E=Math.PI/4,$=Math.PI/2;if(u>E&&u<3*E&&!o.lockX?i="up":u>-E&&u<=E&&!o.lockY?i="left":u>3*-E&&u<=-E&&!o.lockX?i="down":o.lockY||(i="right"),o.lockY||(c=u>-$&&u<$?"left":"right"),o.lockX||(l=u>0?"up":"down"),o.force>this.options.threshold){var b,P={};for(b in this.direction)this.direction.hasOwnProperty(b)&&(P[b]=this.direction[b]);var T={};for(b in this.direction={x:c,y:l,angle:i},o.direction=this.direction,P)P[b]===this.direction[b]&&(T[b]=!0);if(T.x&&T.y&&T.angle)return o;T.x&&T.y||this.trigger("plain",o),T.x||this.trigger("plain:"+c,o),T.y||this.trigger("plain:"+l,o),T.angle||this.trigger("dir dir:"+i,o)}else this.resetDirection();return o};var Kn=A;function C(o,i){this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=o,this.id=C.id,C.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},this.config(i),this.options.mode!=="static"&&this.options.mode!=="semi"||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1);var c=getComputedStyle(this.options.zone.parentElement);return c&&c.display==="flex"&&(this.parentIsFlex=!0),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}C.prototype=new He,C.constructor=C,C.id=0,C.prototype.prepareNipples=function(){var o=this.nipples;o.on=this.on.bind(this),o.off=this.off.bind(this),o.options=this.options,o.destroy=this.destroy.bind(this),o.ids=this.ids,o.id=this.id,o.processOnMove=this.processOnMove.bind(this),o.processOnEnd=this.processOnEnd.bind(this),o.get=function(i){if(i===void 0)return o[0];for(var c=0,l=o.length;c<l;c+=1)if(o[c].identifier===i)return o[c];return!1}},C.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},C.prototype.begin=function(){var o=this.options;if(o.mode==="static"){var i=this.createNipple(o.position,this.manager.getIdentifier());i.add(),this.idles.push(i)}},C.prototype.createNipple=function(o,i){var c=this.manager.scroll,l={},u=this.options,E=this.parentIsFlex?c.x:c.x+this.box.left,$=this.parentIsFlex?c.y:c.y+this.box.top;if(o.x&&o.y)l={x:o.x-E,y:o.y-$};else if(o.top||o.right||o.bottom||o.left){var b=document.createElement("DIV");b.style.display="hidden",b.style.top=o.top,b.style.right=o.right,b.style.bottom=o.bottom,b.style.left=o.left,b.style.position="absolute",u.zone.appendChild(b);var P=b.getBoundingClientRect();u.zone.removeChild(b),l=o,o={x:P.left+c.x,y:P.top+c.y}}var T=new Kn(this,{color:u.color,size:u.size,threshold:u.threshold,fadeTime:u.fadeTime,dataOnly:u.dataOnly,restJoystick:u.restJoystick,restOpacity:u.restOpacity,mode:u.mode,identifier:i,position:o,zone:u.zone,frontPosition:{x:0,y:0},shape:u.shape});return u.dataOnly||(g(T.ui.el,l),g(T.ui.front,T.frontPosition)),this.nipples.push(T),this.trigger("added "+T.identifier+":added",T),this.manager.trigger("added "+T.identifier+":added",T),this.bindNipple(T),T},C.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},C.prototype.bindNipple=function(o){var i,c=this,l=function(u,E){i=u.type+" "+E.id+":"+u.type,c.trigger(i,E)};o.on("destroyed",c.onDestroyed.bind(c)),o.on("shown hidden rested dir plain",l),o.on("dir:up dir:right dir:down dir:left",l),o.on("plain:up plain:right plain:down plain:left",l)},C.prototype.pressureFn=function(o,i,c){var l=this,u=0;clearInterval(l.pressureIntervals[c]),l.pressureIntervals[c]=setInterval(function(){var E=o.force||o.pressure||o.webkitForce||0;E!==u&&(i.trigger("pressure",E),l.trigger("pressure "+i.identifier+":pressure",E),u=E)}.bind(l),100)},C.prototype.onstart=function(o){var i=this,c=i.options,l=o;return o=v(o),i.updateBox(),Fe(o,function(u){i.actives.length<c.maxNumberOfNipples?i.processOnStart(u):l.type.match(/^touch/)&&(Object.keys(i.manager.ids).forEach(function(E){if(Object.values(l.touches).findIndex(function(b){return b.identifier===E})<0){var $=[o[0]];$.identifier=E,i.processOnEnd($)}}),i.actives.length<c.maxNumberOfNipples&&i.processOnStart(u))}),i.manager.bindDocument(),!1},C.prototype.processOnStart=function(o){var i,c=this,l=c.options,u=c.manager.getIdentifier(o),E=o.force||o.pressure||o.webkitForce||0,$={x:o.pageX,y:o.pageY},b=c.getOrCreate(u,$);b.identifier!==u&&c.manager.removeIdentifier(b.identifier),b.identifier=u;var P=function(T){T.trigger("start",T),c.trigger("start "+T.id+":start",T),T.show(),E>0&&c.pressureFn(o,T,T.identifier),c.processOnMove(o)};if((i=c.idles.indexOf(b))>=0&&c.idles.splice(i,1),c.actives.push(b),c.ids.push(b.identifier),l.mode!=="semi")P(b);else{if(!(s($,b.position)<=l.catchDistance))return b.destroy(),void c.processOnStart(o);P(b)}return b},C.prototype.getOrCreate=function(o,i){var c,l=this.options;return/(semi|static)/.test(l.mode)?(c=this.idles[0])?(this.idles.splice(0,1),c):l.mode==="semi"?this.createNipple(i,o):(console.warn("Coudln't find the needed nipple."),!1):c=this.createNipple(i,o)},C.prototype.processOnMove=function(o){var i=this.options,c=this.manager.getIdentifier(o),l=this.nipples.get(c),u=this.manager.scroll;if(function(ne){return isNaN(ne.buttons)?ne.pressure!==0:ne.buttons!==0}(o)){if(!l)return console.error("Found zombie joystick with ID "+c),void this.manager.removeIdentifier(c);if(i.dynamicPage){var E=l.el.getBoundingClientRect();l.position={x:u.x+E.left,y:u.y+E.top}}l.identifier=c;var $=l.options.size/2,b={x:o.pageX,y:o.pageY};i.lockX&&(b.y=l.position.y),i.lockY&&(b.x=l.position.x);var P,T,bt,It,be,re,je,ze,Ie,we,Z=s(b,l.position),le=(P=b,T=l.position,bt=T.x-P.x,It=T.y-P.y,d(Math.atan2(It,bt))),Bn=a(le),Un=Z/$,Vn={distance:Z,position:b};if(l.options.shape==="circle"?(be=Math.min(Z,$),je=l.position,ze=be,we={x:0,y:0},Ie=a(Ie=le),we.x=je.x-ze*Math.cos(Ie),we.y=je.y-ze*Math.sin(Ie),re=we):(re=function(ne,Oe,xe){return{x:Math.min(Math.max(ne.x,Oe.x-xe),Oe.x+xe),y:Math.min(Math.max(ne.y,Oe.y-xe),Oe.y+xe)}}(b,l.position,$),be=s(re,l.position)),i.follow){if(Z>$){var Yn=b.x-re.x,Wn=b.y-re.y;l.position.x+=Yn,l.position.y+=Wn,l.el.style.top=l.position.y-(this.box.top+u.y)+"px",l.el.style.left=l.position.x-(this.box.left+u.x)+"px",Z=s(b,l.position)}}else b=re,Z=be;var wt=b.x-l.position.x,Lt=b.y-l.position.y;l.frontPosition={x:wt,y:Lt},i.dataOnly||g(l.ui.front,l.frontPosition);var Le={identifier:l.identifier,position:b,force:Un,pressure:o.force||o.pressure||o.webkitForce||0,distance:Z,angle:{radian:Bn,degree:le},vector:{x:wt/$,y:-Lt/$},raw:Vn,instance:l,lockX:i.lockX,lockY:i.lockY};(Le=l.computeDirection(Le)).angle={radian:a(180-le),degree:180-le},l.trigger("move",Le),this.trigger("move "+l.id+":move",Le)}else this.processOnEnd(o)},C.prototype.processOnEnd=function(o){var i=this,c=i.options,l=i.manager.getIdentifier(o),u=i.nipples.get(l),E=i.manager.removeIdentifier(u.identifier);u&&(c.dataOnly||u.hide(function(){c.mode==="dynamic"&&(u.trigger("removed",u),i.trigger("removed "+u.id+":removed",u),i.manager.trigger("removed "+u.id+":removed",u),u.destroy())}),clearInterval(i.pressureIntervals[u.identifier]),u.resetDirection(),u.trigger("end",u),i.trigger("end "+u.id+":end",u),i.ids.indexOf(u.identifier)>=0&&i.ids.splice(i.ids.indexOf(u.identifier),1),i.actives.indexOf(u)>=0&&i.actives.splice(i.actives.indexOf(u),1),/(semi|static)/.test(c.mode)?i.idles.push(u):i.nipples.indexOf(u)>=0&&i.nipples.splice(i.nipples.indexOf(u),1),i.manager.unbindDocument(),/(semi|static)/.test(c.mode)&&(i.manager.ids[E.id]=E.identifier))},C.prototype.onDestroyed=function(o,i){this.nipples.indexOf(i)>=0&&this.nipples.splice(this.nipples.indexOf(i),1),this.actives.indexOf(i)>=0&&this.actives.splice(this.actives.indexOf(i),1),this.idles.indexOf(i)>=0&&this.idles.splice(this.idles.indexOf(i),1),this.ids.indexOf(i.identifier)>=0&&this.ids.splice(this.ids.indexOf(i.identifier),1),this.manager.removeIdentifier(i.identifier),this.manager.unbindDocument()},C.prototype.destroy=function(){for(var o in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(i){i.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(o)&&clearInterval(this.pressureIntervals[o]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()};var Xn=C;function N(o){var i=this;i.ids={},i.index=0,i.collections=[],i.scroll=x(),i.config(o),i.prepareCollections();var c=function(){var u;i.collections.forEach(function(E){E.forEach(function($){u=$.el.getBoundingClientRect(),$.position={x:i.scroll.x+u.left,y:i.scroll.y+u.top}})})};I(window,"resize",function(){y(c)});var l=function(){i.scroll=x()};return I(window,"scroll",function(){y(l)}),i.collections}N.prototype=new He,N.constructor=N,N.prototype.prepareCollections=function(){var o=this;o.collections.create=o.create.bind(o),o.collections.on=o.on.bind(o),o.collections.off=o.off.bind(o),o.collections.destroy=o.destroy.bind(o),o.collections.get=function(i){var c;return o.collections.every(function(l){return!(c=l.get(i))}),c}},N.prototype.create=function(o){return this.createCollection(o)},N.prototype.createCollection=function(o){var i=new Xn(this,o);return this.bindCollection(i),this.collections.push(i),i},N.prototype.bindCollection=function(o){var i,c=this,l=function(u,E){i=u.type+" "+E.id+":"+u.type,c.trigger(i,E)};o.on("destroyed",c.onDestroyed.bind(c)),o.on("shown hidden rested dir plain",l),o.on("dir:up dir:right dir:down dir:left",l),o.on("plain:up plain:right plain:down plain:left",l)},N.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},N.prototype.unbindDocument=function(o){Object.keys(this.ids).length&&o!==!0||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},N.prototype.getIdentifier=function(o){var i;return o?(i=o.identifier===void 0?o.pointerId:o.identifier)===void 0&&(i=this.latest||0):i=this.index,this.ids[i]===void 0&&(this.ids[i]=this.index,this.index+=1),this.latest=i,this.ids[i]},N.prototype.removeIdentifier=function(o){var i={};for(var c in this.ids)if(this.ids[c]===o){i.id=c,i.identifier=this.ids[c],delete this.ids[c];break}return i},N.prototype.onmove=function(o){return this.onAny("move",o),!1},N.prototype.onend=function(o){return this.onAny("end",o),!1},N.prototype.oncancel=function(o){return this.onAny("end",o),!1},N.prototype.onAny=function(o,i){var c,l=this,u="processOn"+o.charAt(0).toUpperCase()+o.slice(1);return i=v(i),Fe(i,function(E){c=l.getIdentifier(E),Fe(l.collections,function($,b,P){P.ids.indexOf(b)>=0&&(P[u]($),$._found_=!0)}.bind(null,E,c)),E._found_||l.removeIdentifier(c)}),!1},N.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(o){o.destroy()}),this.off()},N.prototype.onDestroyed=function(o,i){if(this.collections.indexOf(i)<0)return!1;this.collections.splice(this.collections.indexOf(i),1)};var vt=new N;e.default={create:function(o){return vt.create(o)},factory:vt}}]).default})});var pt=Ot(En(),1);var ge=document.documentElement,ct=document.querySelector(".edit"),De=document.querySelector(".backgroundImage"),ee=document.querySelector(".deviceInfo"),vn=ee.querySelector(".battery"),te=vn.querySelector(".battery-icon"),bn=vn.querySelector(".battery-level"),In=ee.querySelector(".clock"),wn=ee.querySelector(".player .player-number"),Xa=ee.querySelector(".status"),Ln=document.querySelector(".ping"),lt=document.querySelector(".version"),Ee=document.querySelector(".controller-indicator"),ut=document.querySelector(".controller-layout"),Ba=document.querySelector('meta[name="viewport"]');p.hidden.includes("mobystk:deviceInfo")&&ee.classList.add("hidden");p.hidden.includes("mobystk:ping")&&Ln.classList.add("hidden");p.hidden.includes("mobystk:version")&&lt.classList.add("hidden");lt.innerText="v0.0.0";ct.addEventListener("click",xt);ct.addEventListener("contextmenu",()=>{window.layoutEditor.opened?window.layoutEditor.end():window.layoutEditor.start()});p.debug&&document.body.classList.add("debug");p.invertL&&document.body.classList.add("invertL");p.invertR&&document.body.classList.add("invertR");p.bgImage&&(De.style.backgroundImage=`url('${p.bgImage}')`);p.bgOpacity&&(De.style.opacity=String(p.bgOpacity));p.bgBlur&&(De.style.filter=`blur(${p.bgBlur}px)`);p.colorsBackground&&ge.style.setProperty("--background",p.colorsBackground);p.colorsColor&&ge.style.setProperty("--color",p.colorsColor);p.colorsBorder&&ge.style.setProperty("--border",p.colorsBorder);p.colorsActive&&ge.style.setProperty("--active",p.colorsActive);var On=document.createElement("style");On.textContent=p.customCSS;document.body.append(On);if(p.customJS&&p.customJS.trim()&&confirm("Deseja executar os plugins?"))try{new Function(p.customJS.trim())()}catch(r){alert(`Ocorreu um erro ao executar os plugins

`+(r?.message||""))}if(p.pluginMobile){let r=document.createElement("script");r.src="lib/plugins/mobile.js",r.onerror=()=>J("Erro ao carregar plugin MobyStk Mobile"),document.body.appendChild(r)}navigator.getBattery?.()?.then(r=>{dt(r),r.addEventListener("chargingchange",e=>dt(e.target)),r.addEventListener("levelchange",e=>dt(e.target))}).catch(console.error);function dt(r){te.classList.remove(...Array.from(te.classList)),te.classList.add("mdi");let e=r.charging,t=r.level*100,n=Math.round(t/10)*10;bn.innerText=Math.round(t)+"% \u2022",n===0?te.classList.add("mdi-battery-outline"):n===100?te.classList.add("mdi-battery"+(e?"-charging-100":"")):te.classList.add("mdi-battery-"+(e?"charging-":"")+n)}window.setInterval(xn,1e3);xn();qe();function xn(){let r=new Date().getHours().toString().padStart(2,"0"),e=new Date().getMinutes().toString().padStart(2,"0");In.innerText=r+":"+e}function qe(){let r=p.useKeyboard?"mdi-keyboard":"mdi-google-controller";Ee.classList.add(r),wn.innerText=(p.useKeyboard?"Teclado ":"Controle ")+String(p.player+1)}p.debug&&ee.addEventListener("click",()=>{p.player+=1,p.player>3&&(p.player=0),qe()});var $n=Date.now(),Sn=0;function G(r,e=!1){let t;return Array.isArray(r)?t=r.reduce((n,s)=>n+=Number(s),0):t=Number(r),t>Sn&&(e=!0),Sn=t,e?($n=Date.now()+t,navigator.vibrate(r)):Date.now()+t>$n?navigator.vibrate(r):!1}var Me=document.querySelector(".ping"),ft=class{constructor(){this.pingTime=Date.now();this.connect(),setInterval(()=>this.sendPing(),1e3)}connect(){try{this.instance=new WebSocket("ws://"+p.ip)}catch(e){p.debug&&console.error(e),this.onClose();return}this.instance.addEventListener("open",this.onOpen.bind(this)),this.instance.addEventListener("close",this.onClose.bind(this)),this.instance.addEventListener("message",this.onMessage.bind(this)),document.body.classList.remove("connected","disconnected"),document.body.classList.add("connecting")}onOpen(){document.body.classList.remove("connecting","disconnected"),document.body.classList.add("connected")}onClose(){document.body.classList.remove("connecting","connected"),document.body.classList.add("disconnected"),setTimeout(()=>this.connect(),3e3)}onMessage(e){let[t,n]=JSON.parse(e.data);t==="welcome"&&this.onWelcome(n),t==="handshakeOK"&&this.onHandshakeOK(n),t==="handshakeFailed"&&this.onHandshakeFailed(n),t==="pong"&&this.onPong(n),t==="vibrate"&&this.onVibrate(n),t==="error"&&this.onError(n)}sendCommand(e,t){if(K)return void V.push([e,t]);if(this.instance.readyState!==this.instance.OPEN)return;let s=JSON.stringify([e,t]);this.instance.send(s)}sendPing(){this.instance.readyState===this.instance.OPEN&&(this.pingID&&Me&&(Me.innerText="+999ms"),this.pingID=Math.floor(Math.random()*1e6),this.pingTime=Date.now(),this.sendCommand("ping",{id:this.pingID}))}sendKey(e,t){this.sendCommand("key",{key:e,action:t})}sendJoystickPos(e,t=0,n=0){this.sendCommand("key",{key:e,action:"press",x:t||0,y:n||0})}onWelcome(e){let t=null;e.needPassword&&(t=p.password||this.askPassword()||null,!t)||(this.sendCommand("handshake",{player:p.player,password:t,useKeyboard:p.useKeyboard}),pt.default.compare(e.version,"0.0.0")>=1?J(`Seu dispositivo est\xE1 utilizando uma vers\xE3o antiga do MobyStk, recomendamos atualizar a aplica\xE7\xE3o para a vers\xE3o ${e.version}`):pt.default.compare(e.version,"0.0.0")<=-1&&J("Seu dispositivo est\xE1 usando uma vers\xE3o mais nova do MobyStk, atualize a aplica\xE7\xE3o no computador para a vers\xE3o 0.0.0"))}onHandshakeOK(e){e.otherPlayerConnected&&J("Outro jogador j\xE1 est\xE1 conectado neste controle"),e.vGamepadDisabled&&J("O controle virtual est\xE1 desativado, voc\xEA pode ativ\xE1-lo nas op\xE7\xF5es do MobyStk no computador"),e.vGamepadError&&J("N\xE3o foi poss\xEDvel criar um controle virtual. Utilizando o teclado"),p.useKeyboard=e.useKeyboard,qe()}onHandshakeFailed(e){e.passwordIncorrect&&(alert("Senha incorreta"),p.password=void 0,localStorage.removeItem("joystick.password"),this.onWelcome({version:"0.0.0",needPassword:!0}))}onPong(e){Number(e.id)===this.pingID&&(Me&&(Me.innerText=String(Date.now()-this.pingTime)+"ms"),this.pingID=void 0)}onVibrate(e){p.vibrationFromGame&&(G(e.largeMotor?1e3:1,!0),Ee.classList[e.largeMotor?"remove":"add"](p.useKeyboard?"mdi-keyboard":"mdi-google-controller"),Ee.classList[e.largeMotor?"add":"remove"]("mdi-vibrate"))}onError(e){J(e.message)}askPassword(){let e=prompt("O computador requer uma senha para se conectar ao MobyStk");return e?(p.password=e,localStorage.setItem("joystick.password",JSON.stringify(e)),e):void J("Voc\xEA precisa informar a senha para se conectar")}},k=new ft;var K=!1,X=!1,V=[];function Tn(){window.layoutEditor?.opened||(k.sendKey("LOAD","press"),k.sendKey("LOAD","release"),G(p.vibrate*3))}function Rn(){window.layoutEditor?.opened||(k.sendKey("SAVE","press"),k.sendKey("SAVE","release"),G(p.vibrate*3))}function kn(){window.layoutEditor?.opened||X||(this.instance&&this.instance[this.instance.active?"release":"press"](),K||(V=[]),K=!K,window.recordingMacro=K,window.lastMacro=V)}async function Cn(){if(!window.layoutEditor?.opened&&!K){X=!X,window.playingMacro=X,this.instance&&this.instance.press();for(let r of V){if(!X||k.instance.readyState!==WebSocket.OPEN)break;k?.sendCommand(r[0],r[1]),await new Promise(e=>setTimeout(e,50))}this.instance&&this.instance.release(),X=!1,window.playingMacro=X}}function An(){document.documentElement.requestFullscreen()}document.addEventListener("fullscreenchange",r=>{let e=S.elements.buttons.find(t=>t.customAction==="fullscreen");e&&(document.fullscreenElement?e.element.classList.add("hidden"):e.element.classList.remove("hidden"))});function ht(){let r=S.elements.buttons.find(a=>a.customAction==="load-state");r&&r.element.addEventListener(p.dblClickLoadSave?"dblclick":"click",Tn);let e=S.elements.buttons.find(a=>a.customAction==="save-state");e&&e.element.addEventListener(p.dblClickLoadSave?"dblclick":"click",Rn),K=!1,X=!1,V=[],window.recordingMacro=K,window.playingMacro=X,window.lastMacro=V;let t=S.elements.buttons.find(a=>a.customAction==="macro-record");t&&t.element.addEventListener("click",kn);let n=S.elements.buttons.find(a=>a.customAction==="macro-play");n&&n.element.addEventListener("click",Cn);let s=S.elements.buttons.find(a=>a.customAction==="fullscreen");s&&s.element.addEventListener("click",An)}window.playingMacro=X;window.recordingMacro=K;window.lastMacro=V;window.loadState=Tn;window.saveState=Rn;window.recordMacro=kn;window.playMacro=Cn;window.fullScreen=An;var z=class extends ie{constructor(e){super(e),this.type="mobystk:button",this.content=e.content||{type:"mobystk:text",value:""},this.key=e.key||"",this.customAction=e.customAction||!1,this.lockable=e.lockable||!1,this.diagonal=e.diagonal||!1,this.diagonal&&(this.targets=e.targets||[]),this.scalable=e.scalable||!1,this.border=e.border||[!0,!0,!0,!0],this.radius=e.radius||[[0,"px"],[0,"px"],[0,"px"],[0,"px"]],this.fontSize=e.fontSize||[20,"px"],this.active=!1,this.editing=!1;let t=document.createElement("button");t.classList.add("controller-button"),t.dataset.id=this.id,t.instance=this,this.element=t}press(e=!1){if(this.diagonal){let t=S.elements.buttons.filter(n=>this.targets.includes(n.id)&&!n.lockable);for(let n of t)n.press(!0)}else!this.active&&!this.customAction&&this.emit("press",this.key),this.scalable&&!this.active&&!e?this.element?.classList.add("controller-button-scale"):!this.active&&e&&(this.element?.classList.add("controller-button-active-diagonal"),this.element?.classList.add("controller-button-scale-diagonal")),this.active=!0,this.element?.classList.add("controller-button-active")}release(){if(this.diagonal){let e=S.elements.buttons.filter(t=>this.targets.includes(t.id));for(let t of e)t.release()}else this.active&&!this.customAction&&this.emit("release",this.key),this.active=!1,this.element?.classList.remove("controller-button-active"),this.element?.classList.remove("controller-button-scale"),this.element?.classList.remove("controller-button-active-diagonal"),this.element?.classList.remove("controller-button-scale-diagonal")}render(){super.render();let e=this.element;if(!e)return;this.border[0]||(e.style.borderTop="0"),this.border[1]||(e.style.borderRight="0"),this.border[2]||(e.style.borderBottom="0"),this.border[3]||(e.style.borderLeft="0");let t=this.radius.map(n=>n.join("")).join(" ");if(e.style.borderRadius=t,e.style.fontSize=this.fontSize.join(""),e.classList[this.diagonal?"add":"remove"]("controller-button-diagonal"),e.classList[this.lockable?"add":"remove"]("controller-button-lockable"),e.innerHTML="",this.content.type==="mobystk:text")e.innerText=this.content.value;else if(this.content.type==="mobystk:icon"){let n=document.createElement("i");n.classList.add("mdi","mdi-"+this.content.value),e.appendChild(n)}this._html&&(e.innerHTML=this._html),e.classList[this.customAction?"add":"remove"]("controller-custom-action"),e.dataset.action=this.customAction||void 0}toObject(){return{...super.toObject(),type:this.type,key:this.key,border:this.border,fontSize:this.fontSize,content:this.content,radius:this.radius,lockable:this.lockable,scalable:this.scalable,customAction:this.customAction,diagonal:this.diagonal,targets:this.targets}}};var Pn=Ot(Nn(),1);var B=class extends ie{constructor(e){super(e),this.type="mobystk:joystick",this.size=e.size||[90,"px"],this.padding=e.padding||60,this.keys=e.keys||["JOYSTICK_1_UP","JOYSTICK_1_LEFT","JOYSTICK_1_DOWN","JOYSTICK_1_RIGHT"],this.position={up:!1,down:!1,left:!1,right:!1};let t=document.createElement("div");t.classList.add("controller-joystick"),t.dataset.id=this.id,t.instance=this,this.element=t}render(){this.width=[this.size[0]+this.padding,this.size[1]],this.height=[this.size[0]+this.padding,this.size[1]],super.render();let e=this.element;this.position={up:!1,down:!1,left:!1,right:!1},this.nipple&&this.nipple.destroy(),this.nipple=Pn.default.create({zone:e,size:this.size[0],mode:"static",position:{left:"50%",top:"50%"},lockX:p.disJoyYAxis,lockY:p.disJoyXAxis}),this.nipple.on("move",(t,n)=>this.emit("move",this,t,n)),this.nipple.on("end",(t,n)=>this.emit("end",this,t,n))}toObject(){return{...super.toObject(),type:this.type,size:this.size,padding:this.padding,keys:this.keys}}};document.addEventListener("touchstart",Bs);document.addEventListener("touchmove",Us);document.addEventListener("touchend",_n);document.addEventListener("touchcancel",_n);function Bs(r){if(!window.layoutEditor?.opened)for(let e of Array.from(r.changedTouches)){let t=document.elementFromPoint(e.clientX,e.clientY);for(;t!==null&&!(t.instance instanceof z&&!t.instance.customAction||t.instance instanceof B);)t=t.parentElement;if(t?.instance.lockable){G(p.vibrate),t.instance.active?t.instance.release():t.instance.press();continue}let n=t?.instance instanceof B;S.currentTouches.push({target:t,touch:e,joystick:n}),t&&(G(p.vibrate),!n&&t.instance.press())}}function Us(r){if(!window.layoutEditor?.opened)for(let e of Array.from(r.changedTouches)){let t=S.currentTouches.findIndex(a=>a.touch.identifier===e.identifier);if(t<0)continue;let n=S.currentTouches[t];if(n.joystick||!p.changeKeyOnDrag&&n.target)continue;n.touch=e;let s=document.elementFromPoint(e.clientX,e.clientY);for(;s!==null&&!(s.instance instanceof z&&!s.instance.customAction&&!s.instance.lockable);)s=s.parentElement;n.target!==s&&(n.target?.instance.release(),(!s||s.instance?.active)&&(s=null),n.target=s,s&&(s.instance.press(),G(p.vibrate)))}}function _n(r){if(!window.layoutEditor?.opened)for(let e of Array.from(r.changedTouches)){let t=S.currentTouches.findIndex(n=>n.touch.identifier===e.identifier);t<0||(S.currentTouches[t].target?.instance instanceof z&&S.currentTouches[t].target.instance.release(),S.currentTouches.splice(t,1))}}var Dn=["mobystk:joystick_left_bottom","mobystk:joystick_left_top","mobystk:joystick_right_top","mobystk:joystick_right_bottom"];function yt(r,e,t){if(p.vibrateJoystick&&G(p.vibrateJoystick*t?.distance/45),!p.useKeyboard&&Dn.includes(r.id)){let s=t?.vector?.x,a=t?.vector?.y;r.id.startsWith("mobystk:joystick_left")&&k.sendJoystickPos("JOYSTICK_1",s,a),r.id.startsWith("mobystk:joystick_right")&&k.sendJoystickPos("JOYSTICK_2",s,a)}if(!t?.direction){n("up",!1),n("left",!1),n("down",!1),n("right",!1);return}p.disJoyYAxis||n("up",t?.angle.degree>22.5&&t?.angle.degree<157.5),p.disJoyXAxis||n("left",t?.angle.degree>112.5&&t?.angle.degree<247.5),p.disJoyYAxis||n("down",t?.angle.degree>202.5&&t?.angle.degree<337.5),p.disJoyXAxis||n("right",t?.angle.degree>292.5||t?.angle.degree<67.5);function n(s,a){let{key:d,border:f}=Vs(r.keys,s),y=r.element.querySelector(".back");if(y.style[`border${f}Width`]=a?"7px":"",!(!p.useKeyboard&&Dn.includes(r.id))){if(r.position[s]===a)return;k.sendKey(d,a?"press":"release")}r.position[s]=a}}function Vs(r,e){let t={up:[r[0],"Top"],left:[r[1],"Left"],down:[r[2],"Bottom"],right:[r[3],"Right"]},[n,s]=t[e];return{key:n,border:s}}var qn=720,Mn=400;function Gn(){let r;window.innerHeight>window.innerWidth/(qn/Mn)?r=qn:r=window.innerWidth/window.innerHeight*Mn,document.body.style.zoom=`${window.innerWidth/r}`,S.currentTouches=S.currentTouches.filter(t=>!t.joystick),S.elements.joysticks.forEach(t=>t.render())}window.addEventListener("load",Gn);window.addEventListener("resize",Gn);var ae=class extends ie{constructor(e){super(e),this.type="mobystk:group",this.content=e.content||[],this.parsedContent=e.parsedContent||[];let t=document.createElement("div");t.classList.add("controller-group"),t.dataset.id=this.id,t.instance=this,this.element=t;for(let n of this.parsedContent)t.appendChild(n.element),n.render()}toObject(){return{...super.toObject(),type:this.type,content:this.content}}};var Ys=`
	<svg viewBox="0 0 32 32">
		<path d="M16 0a16 16 0 100 32 16 16 0 000-32zm0 4a12 12 0 0111.3 8H4.7c1.7-4.6 6-8 11.3-8zm0 14a2 2 0 110-4 2 2 0 010 4zM4 16c5.5 0 9.9 5.3 10 11.8A12 12 0 014 16zm14 11.8c.1-6.5 4.5-11.8 10-11.8a12 12 0 01-10 11.8z"></path>
	</svg>`;function gt(){let r=S.elements.buttons.find(n=>n.customAction==="drive"),e=r?r._html=Ys:"";r?.render(),r&&r.element.addEventListener("touchstart",t),!Ws()&&r&&r.element&&(r.element.style.display="none");function t(){if(window.layoutEditor?.opened)return;r.active?s():n();function n(){r.press(),r.element.innerHTML='<i class="driveArrow mdi mdi-arrow-up"></i>';let a=0,d=0,f=[];window.ondevicemotion=y=>{let I=window.outerWidth>window.outerHeight,O=y.accelerationIncludingGravity[I?"x":"y"]>=0?1:-1;a=parseFloat(y.accelerationIncludingGravity[I?"y":"x"].toFixed(1)),a*=O*(I?1:-1);let v=r.element.children[0];if(p.useKeyboard){let x=Zs(d,a,p.driveSensitivity,p.drivePrecision);if(x===d)return;v.style.transform=`rotate(${x}deg)`,d=x,G(p.vibrate*2);let g=Qs(x),Y=g.filter(j=>!f.includes(j)),ve=f.filter(j=>!g.includes(j));for(let j of Y)k.sendKey(j,"press");for(let j of ve)k.sendKey(j,"release");f=[...g]}else{let x=Math.round(32767/p.driveSensitivity*a);x<10923*p.drivePrecision&&x>-10923*p.drivePrecision&&(x=0),x>32767&&(x=32767),x<-32767&&(x=-32767);let g=90*x/32767;v.style.transform=`rotate(${g}deg)`,k.sendJoystickPos("JOYSTICK_1",x)}}}function s(){r.release(),r.element.innerHTML=e,window.ondevicemotion=null,p.useKeyboard?(k.sendKey("JOYSTICK_1_UP","release"),k.sendKey("JOYSTICK_1_LEFT","release"),k.sendKey("JOYSTICK_1_RIGHT","release")):k.sendJoystickPos("JOYSTICK_1")}}}function Ws(){return location.protocol==="https:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"}function Zs(r,e,t,n){let s=0;return r===-45?(e>t&&(s=45),e<-t+n&&(s=-45),e>t*2&&(s*=2),e<-t*2-n&&(s*=2)):r===45?(e>t-n&&(s=45),e<-t&&(s=-45),e>t*2+n&&(s*=2),e<-t*2&&(s*=2)):(e>t&&(s=45),e<-t&&(s=-45),e>t*2&&(s*=2),e<-t*2&&(s*=2)),s}function Qs(r){let e;switch(r){case-90:e=["JOYSTICK_1_LEFT"];break;case-45:e=["JOYSTICK_1_UP","JOYSTICK_1_LEFT"];break;case 45:e=["JOYSTICK_1_UP","JOYSTICK_1_RIGHT"];break;case 90:e=["JOYSTICK_1_RIGHT"];break;default:e=["JOYSTICK_1_UP"]}return e}function ea(r){let e={...r,parsedContent:r.content.map(Hn).filter(n=>!!n)},t=Fn(e);ut.innerHTML="";for(let n of e.parsedContent)n&&(ut.appendChild(n.element),n.render());return S.currentLayout=e,S.elements.all=t,S.elements.buttons=t.filter(n=>n instanceof z),S.elements.groups=t.filter(n=>n instanceof ae),S.elements.joysticks=t.filter(n=>n instanceof B),ht(),gt(),r}function Fn(r,e=[]){if(r.type==="mobystk:layout"||r.type==="mobystk:group"){r=r,r.type!=="mobystk:layout"&&e.push(r);for(let t of r.parsedContent)Fn(t,e)}else e.push(r);return e}function Hn(r){let e="import"in r?r.import:r.id;if(!p.hidden?.includes(e)&&("import"in r&&(r=ta(r)),!!r)){if(r.type==="mobystk:button")return r=r,p.locked?.includes(e)&&(r={...r,lockable:!0}),new z(r);if(r.type==="mobystk:group"){r=r,r.parsedContent=r.content.map(Hn).filter(n=>n);let t=new ae(r);return r.parsedContent=r.parsedContent.map(n=>n.parent=t),t}else if(r.type==="mobystk:joystick")return r=r,new B(r)}}function ta(r){let t=[...S.buttons,...S.groups,...S.joysticks].find(n=>n.id===r.import);if(t)return{...t,...r}}ea($t);for(let r of S.elements.all)r instanceof z?(r.on("press",e=>k.sendKey(e,"press")),r.on("release",e=>k.sendKey(e,"release"))):r instanceof B&&r.on("move end",yt);document.addEventListener("contextmenu",r=>r.preventDefault());window.addEventListener("load",()=>{document.body.classList.remove("preload")});
