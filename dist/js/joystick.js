(()=>{"use strict";var e,t={397:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(753)),a=n(o(954));class s extends a.default{constructor(e){super(e),this.type="mobystk:button",this.content=e.content||{type:"mobystk:text",value:""},this.key=e.key||"",this.customAction=e.customAction||!1,this.lockable=e.lockable||!1,this.diagonal=e.diagonal||!1,this.diagonal&&(this.targets=e.targets||[]),this.scalable=e.scalable||!1,this.border=e.border||[!0,!0,!0,!0],this.radius=e.radius||[[0,"px"],[0,"px"],[0,"px"],[0,"px"]],this.fontSize=e.fontSize||[20,"px"],this.active=!1,this.editing=!1;const t=document.createElement("button");t.classList.add("controller-button"),t.dataset.id=this.id,t.instance=this,this.element=t}press(e=!1){var t,o,n,a;if(this.diagonal){const e=i.default.elements.buttons.filter((e=>this.targets.includes(e.id)&&!e.lockable));for(const t of e)t.press(!0)}else this.active||this.customAction||this.emit("press",this.key),!this.scalable||this.active||e?!this.active&&e&&(null===(o=this.element)||void 0===o||o.classList.add("controller-button-active-diagonal"),null===(n=this.element)||void 0===n||n.classList.add("controller-button-scale-diagonal")):null===(t=this.element)||void 0===t||t.classList.add("controller-button-scale"),this.active=!0,null===(a=this.element)||void 0===a||a.classList.add("controller-button-active")}release(){var e,t,o,n;if(this.diagonal){const e=i.default.elements.buttons.filter((e=>this.targets.includes(e.id)));for(const t of e)t.release()}else this.active&&!this.customAction&&this.emit("release",this.key),this.active=!1,null===(e=this.element)||void 0===e||e.classList.remove("controller-button-active"),null===(t=this.element)||void 0===t||t.classList.remove("controller-button-scale"),null===(o=this.element)||void 0===o||o.classList.remove("controller-button-active-diagonal"),null===(n=this.element)||void 0===n||n.classList.remove("controller-button-scale-diagonal")}render(){super.render();const e=this.element;if(!e)return;this.border[0]||(e.style.borderTop="0"),this.border[1]||(e.style.borderRight="0"),this.border[2]||(e.style.borderBottom="0"),this.border[3]||(e.style.borderLeft="0");const t=this.radius.map((e=>e.join(""))).join(" ");if(e.style.borderRadius=t,e.style.fontSize=this.fontSize.join(""),e.classList[this.diagonal?"add":"remove"]("controller-button-diagonal"),e.classList[this.lockable?"add":"remove"]("controller-button-lockable"),e.innerHTML="","mobystk:text"===this.content.type)e.innerText=this.content.value;else if("mobystk:icon"===this.content.type){const t=document.createElement("i");t.classList.add("mdi","mdi-"+this.content.value),e.appendChild(t)}this._html&&(e.innerHTML=this._html),e.classList[this.customAction?"add":"remove"]("controller-custom-action"),e.dataset.action=this.customAction||void 0}toObject(){return Object.assign(Object.assign({},super.toObject()),{type:this.type,key:this.key,border:this.border,fontSize:this.fontSize,content:this.content,radius:this.radius,lockable:this.lockable,scalable:this.scalable,customAction:this.customAction,diagonal:this.diagonal,targets:this.targets})}}t.default=s},954:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(103));class a extends i.default{constructor(e){super(),this.type="mobystk:unknown",this.id=e.id||"mobystk:unknown",this.name=e.name||"(Sem nome)",this.x=e.x||[0,"px"],this.y=e.y||[0,"px"],this.anchorX=e.anchorX||0,this.anchorY=e.anchorY||0,this.width=e.width||[100,"px"],this.height=e.height||[100,"px"]}render(){const e=this.element;e&&(e.style.left="",e.style.right="",e.style.top="",e.style.bottom="",e.style.transform="",e.style.width=this.width.join(""),e.style.height=this.height.join(""),0===this.anchorX&&(e.style.left=this.x.join("")),1===this.anchorX&&(e.style.right=this.x.join("")),0===this.anchorY&&(e.style.top=this.y.join("")),1===this.anchorY&&(e.style.bottom=this.y.join("")),e.classList[2===this.anchorX?"add":"remove"]("center-x"),e.classList[2===this.anchorY?"add":"remove"]("center-y"),e.classList[this.editing?"add":"remove"]("controller-editing"))}toObject(){return{type:this.type,id:this.id,name:this.name,x:this.x,y:this.y,anchorX:this.anchorX,anchorY:this.anchorY,width:this.width,height:this.height}}}t.default=a},275:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(954));class a extends i.default{constructor(e){super(e),this.type="mobystk:group",this.content=e.content||[],this.parsedContent=e.parsedContent||[];const t=document.createElement("div");t.classList.add("controller-group"),t.dataset.id=this.id,t.instance=this,this.element=t;for(const e of this.parsedContent)t.appendChild(e.element),e.render()}toObject(){return Object.assign(Object.assign({},super.toObject()),{type:this.type,content:this.content})}}t.default=a},743:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(694)),a=n(o(437)),s=n(o(954));class r extends s.default{constructor(e){super(e),this.type="mobystk:joystick",this.size=e.size||[90,"px"],this.padding=e.padding||60,this.keys=e.keys||["joyLUp","joyLLeft","joyLDown","joyLRight"],this.position={up:!1,down:!1,left:!1,right:!1};const t=document.createElement("div");t.classList.add("controller-joystick"),t.dataset.id=this.id,t.instance=this,this.element=t}render(){this.width=[this.size[0]+this.padding,this.size[1]],this.height=[this.size[0]+this.padding,this.size[1]],super.render();const e=this.element;this.position={up:!1,down:!1,left:!1,right:!1},this.nipple&&this.nipple.destroy(),this.nipple=i.default.create({zone:e,size:this.size[0],mode:"static",position:{left:"50%",top:"50%"},lockX:a.default.disJoyYAxis,lockY:a.default.disJoyXAxis}),this.nipple.on("move",((e,t)=>this.emit("move",this,e,t))),this.nipple.on("end",((e,t)=>this.emit("end",this,e,t)))}toObject(){return Object.assign(Object.assign({},super.toObject()),{type:this.type,size:this.size,padding:this.padding,keys:this.keys})}}t.default=r},339:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sendCmd=void 0;const i=n(o(263)),a=n(o(437)),s=o(970),r=n(o(898)),d=o(618),l=o(560),c=a.default.vgamepad?"mdi-google-controller":"mdi-keyboard";l.$controllerIndicator.classList.add(c),s.commands.V=e=>{const[t]=e.toLowerCase().split(" ");if(a.default.vibrationFromGame){const e=parseInt(t.split("|")[0]);(0,r.default)(e?3e3:0,!0),l.$controllerIndicator.classList[e?"remove":"add"](c),l.$controllerIndicator.classList[e?"add":"remove"]("mdi-vibrate")}},window.sendCmd=function(e,t=!1,o){if(e&&e.length)return"string"==typeof e&&(e=[e]),o||(e=e.map((e=>{var t,o;return a.default.vgamepad?null===(t=i.default[e])||void 0===t?void 0:t[4]:null===(o=i.default[e])||void 0===o?void 0:o[a.default.player]}))),d.recordingMacro&&o?d.lastMacro.push(`${o} ${e} ${a.default.player}`):d.recordingMacro?d.lastMacro.push(`${t?"R":"P"} ${e} ${a.default.player}`):void(s.socket&&1===s.socket.readyState&&(o?s.socket.send(`${o} ${e} ${a.default.player}`):s.socket.send(`${t?"R":"P"} ${e} ${a.default.player}`)))},t.sendCmd=(...e)=>window.sendCmd(...e)},618:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function s(e){try{d(n.next(e))}catch(e){a(e)}}function r(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.lastMacro=t.playingMacro=t.recordingMacro=void 0;const a=i(o(753)),s=i(o(898)),r=o(339),d=o(970),l=i(o(437));function c(){var e;(null===(e=window.layoutEditor)||void 0===e?void 0:e.opened)||((0,r.sendCmd)("load"),(0,r.sendCmd)("load",!0),(0,s.default)(3*l.default.vibrate))}function u(){var e;(null===(e=window.layoutEditor)||void 0===e?void 0:e.opened)||((0,r.sendCmd)("save"),(0,r.sendCmd)("save",!0),(0,s.default)(3*l.default.vibrate))}function f(){var e;(null===(e=window.layoutEditor)||void 0===e?void 0:e.opened)||t.playingMacro||(this.instance&&this.instance[this.instance.active?"release":"press"](),t.recordingMacro||(t.lastMacro=[]),t.recordingMacro=!t.recordingMacro,window.recordingMacro=t.recordingMacro,window.lastMacro=t.lastMacro)}function h(){var e;return n(this,void 0,void 0,(function*(){if(!(null===(e=window.layoutEditor)||void 0===e?void 0:e.opened)&&!t.recordingMacro){t.playingMacro=!t.playingMacro,window.playingMacro=t.playingMacro,this.instance&&this.instance.press();for(const e of t.lastMacro){if(!t.playingMacro)break;if(1!==(null===d.socket||void 0===d.socket?void 0:d.socket.readyState))break;null===d.socket||void 0===d.socket||d.socket.send(e),yield new Promise((e=>setTimeout(e,50)))}this.instance&&this.instance.release(),t.playingMacro=!1,window.playingMacro=t.playingMacro}}))}function y(){document.documentElement.requestFullscreen()}t.recordingMacro=!1,t.playingMacro=!1,t.lastMacro=[],t.default=function(){const e=a.default.elements.buttons.find((e=>"load-state"===e.customAction));e&&e.element.addEventListener(l.default.dblClickLoadSave?"dblclick":"click",c);const o=a.default.elements.buttons.find((e=>"save-state"===e.customAction));o&&o.element.addEventListener(l.default.dblClickLoadSave?"dblclick":"click",u),t.recordingMacro=!1,t.playingMacro=!1,t.lastMacro=[],window.recordingMacro=t.recordingMacro,window.playingMacro=t.playingMacro,window.lastMacro=t.lastMacro;const n=a.default.elements.buttons.find((e=>"macro-record"===e.customAction));n&&n.element.addEventListener("click",f);const i=a.default.elements.buttons.find((e=>"macro-play"===e.customAction));i&&i.element.addEventListener("click",h),document.querySelector(".deviceInfo").addEventListener("dblclick",y)},window.playingMacro=t.playingMacro,window.recordingMacro=t.recordingMacro,window.lastMacro=t.lastMacro,window.loadState=c,window.saveState=u,window.recordMacro=f,window.playMacro=h,window.fullScreen=y},560:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.$viewport=t.$layout=t.$controllerIndicator=t.$ping=t.$DIStatus=t.$DILayout=t.$DIPlayerNumber=t.$DIClock=t.$DIBatteryLevel=t.$DIBatteryIcon=t.$DIBattery=t.$deviceInfo=t.$bgImage=t.$edit=t.$root=void 0,t.$root=document.documentElement,t.$edit=document.querySelector(".edit"),t.$bgImage=document.querySelector(".backgroundImage"),t.$deviceInfo=document.querySelector(".deviceInfo"),t.$DIBattery=t.$deviceInfo.querySelector(".battery"),t.$DIBatteryIcon=t.$DIBattery.querySelector(".battery-icon"),t.$DIBatteryLevel=t.$DIBattery.querySelector(".battery-level"),t.$DIClock=t.$deviceInfo.querySelector(".clock"),t.$DIPlayerNumber=t.$deviceInfo.querySelector(".player .player-number"),t.$DILayout=t.$deviceInfo.querySelector(".layout"),t.$DIStatus=t.$deviceInfo.querySelector(".status"),t.$ping=document.querySelector(".ping"),t.$controllerIndicator=document.querySelector(".controller-indicator"),t.$layout=document.querySelector(".controller-layout"),t.$viewport=document.querySelector('meta[name="viewport"]')},504:(e,t,o)=>{o(339),o(618),o(921),o(448),o(926),o(492),o(735),document.addEventListener("contextmenu",(e=>e.preventDefault())),window.addEventListener("load",(()=>{document.body.classList.remove("preload")}))},921:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(397)),a=n(o(753)),s=n(o(743)),r=n(o(898)),d=n(o(437));function l(e){var t,o;if(!(null===(t=window.layoutEditor)||void 0===t?void 0:t.opened))for(const t of Array.from(e.changedTouches)){const e=a.default.currentTouches.findIndex((e=>e.touch.identifier===t.identifier));e<0||((null===(o=a.default.currentTouches[e].target)||void 0===o?void 0:o.instance)instanceof i.default&&a.default.currentTouches[e].target.instance.release(),a.default.currentTouches.splice(e,1))}}document.addEventListener("touchstart",(function(e){var t;if(!(null===(t=window.layoutEditor)||void 0===t?void 0:t.opened))for(const t of Array.from(e.changedTouches)){let e=document.elementFromPoint(t.clientX,t.clientY);for(;null!==e&&!(e.instance instanceof i.default&&!e.instance.customAction||e.instance instanceof s.default);)e=e.parentElement;if(null==e?void 0:e.instance.lockable){(0,r.default)(d.default.vibrate),e.instance.active?e.instance.release():e.instance.press();continue}const o=(null==e?void 0:e.instance)instanceof s.default;a.default.currentTouches.push({target:e,touch:t,joystick:o}),e&&((0,r.default)(d.default.vibrate),o||e.instance.press())}})),document.addEventListener("touchmove",(function(e){var t,o,n;if(!(null===(t=window.layoutEditor)||void 0===t?void 0:t.opened))for(const t of Array.from(e.changedTouches)){const e=a.default.currentTouches.findIndex((e=>e.touch.identifier===t.identifier));if(e<0)continue;const s=a.default.currentTouches[e];if(s.joystick)continue;if(!d.default.changeKeyOnDrag&&s.target)continue;s.touch=t;let l=document.elementFromPoint(t.clientX,t.clientY);for(;null!==l&&(!(l.instance instanceof i.default)||l.instance.customAction||l.instance.lockable);)l=l.parentElement;s.target!==l&&(null===(o=s.target)||void 0===o||o.instance.release(),l&&!(null===(n=l.instance)||void 0===n?void 0:n.active)||(l=null),s.target=l,l&&(l.instance.press(),(0,r.default)(d.default.vibrate)))}})),document.addEventListener("touchend",l),document.addEventListener("touchcancel",l)},448:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resizeJoystick=void 0;const i=n(o(753)),a=n(o(898)),s=o(339),r=o(560),d=n(o(437)),l=["mobystk:joystick_left","mobystk:joystick_right"];function c(){let e;e=window.outerHeight>window.outerWidth/1.7777777777777777?640:window.outerWidth/window.outerHeight*360,r.$viewport.setAttribute("content",`width=${e}, user-scalable=0`),i.default.currentTouches=i.default.currentTouches.filter((e=>!e.joystick)),i.default.elements.joysticks.forEach((e=>e.render()))}t.default=function(e,t,o){var n,i;if((0,a.default)(d.default.vibrateJoystick*(null==o?void 0:o.distance)/45),d.default.vgamepad&&l.includes(e.id)){let t=Math.round(65534/90*(45+(null==o?void 0:o.distance)*Math.cos(null===(n=null==o?void 0:o.angle)||void 0===n?void 0:n.radian))-32768),a=Math.round(65534/90*(45+(null==o?void 0:o.distance)*Math.sin(null===(i=null==o?void 0:o.angle)||void 0===i?void 0:i.radian))-32768);(isNaN(t)||isNaN(a))&&(t=a=0),"mobystk:joystick_left"===e.id&&(0,s.sendCmd)(`${t}|${a}`,!1,"VJL"),"mobystk:joystick_right"===e.id&&(0,s.sendCmd)(`${t}|${a}`,!1,"VJR")}if(!(null==o?void 0:o.direction))return r("up",!1),r("left",!1),r("down",!1),void r("right",!1);function r(t,o){const{key:n,border:i}=function(e,t){const o={up:[e[0],"Top"],left:[e[1],"Left"],down:[e[2],"Bottom"],right:[e[3],"Right"]},[n,i]=o[t];return{key:n,border:i}}(e.keys,t);if(e.element.querySelector(".back").style[`border${i}Width`]=o?"7px":"",!d.default.vgamepad||!l.includes(e.id)){if(e.position[t]===o)return;(0,s.sendCmd)([n],!o)}e.position[t]=o}d.default.disJoyYAxis||r("up",(null==o?void 0:o.angle.degree)>22.5&&(null==o?void 0:o.angle.degree)<157.5),d.default.disJoyXAxis||r("left",(null==o?void 0:o.angle.degree)>112.5&&(null==o?void 0:o.angle.degree)<247.5),d.default.disJoyYAxis||r("down",(null==o?void 0:o.angle.degree)>202.5&&(null==o?void 0:o.angle.degree)<337.5),d.default.disJoyXAxis||r("right",(null==o?void 0:o.angle.degree)>292.5||(null==o?void 0:o.angle.degree)<67.5)},t.resizeJoystick=c,window.addEventListener("load",c),window.addEventListener("resize",c)},926:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.importElement=t.parseElement=t.getAllElements=t.loadLayout=void 0;const i=n(o(397)),a=n(o(275)),s=n(o(743)),r=n(o(753)),d=o(339),l=n(o(618)),c=o(560),u=n(o(448)),f=n(o(492)),h=n(o(437));function y(e){const t=Object.assign(Object.assign({},e),{parsedContent:e.content.map(p).filter((e=>!!e))}),o=m(t);c.$layout.innerHTML="";for(const e of t.parsedContent)e&&(c.$layout.appendChild(e.element),e.render());return r.default.currentLayout=t,r.default.elements.all=o,r.default.elements.buttons=o.filter((e=>e instanceof i.default)),r.default.elements.groups=o.filter((e=>e instanceof a.default)),r.default.elements.joysticks=o.filter((e=>e instanceof s.default)),c.$DILayout.innerText=e.name||"???",(0,l.default)(),(0,f.default)(),e}function m(e,t=[]){if("mobystk:layout"===e.type||"mobystk:group"===e.type){"mobystk:layout"!==e.type&&t.push(e);for(const o of e.parsedContent)m(o,t)}else t.push(e);return t}function p(e){var t,o;const n="import"in e?e.import:e.id;if(!(null===(t=h.default.hidden)||void 0===t?void 0:t.includes(n))&&("import"in e&&(e=v(e)),e)){if("mobystk:button"===e.type)return(null===(o=h.default.locked)||void 0===o?void 0:o.includes(n))&&(e=Object.assign(Object.assign({},e),{lockable:!0})),new i.default(e);if("mobystk:group"===e.type){e.parsedContent=e.content.map(p).filter((e=>e));const t=new a.default(e);return e.parsedContent=e.parsedContent.map((e=>e.parent=t)),t}return"mobystk:joystick"===e.type?new s.default(e):void 0}}function v(e){const t=[...r.default.buttons,...r.default.groups,...r.default.joysticks].find((t=>t.id===e.import));if(t)return Object.assign(Object.assign({},t),e)}if(t.loadLayout=y,t.getAllElements=m,t.parseElement=p,t.importElement=v,!h.default.layout)throw window.location.href="index.html",new Error("Layout não selecionado");const g=r.default.layouts.find((e=>e.id===h.default.layout));if(!g)throw alert("Layout não encontrado!"),window.location.href="index.html",new Error("Layout não encontrado");y(g);for(const e of r.default.elements.all)e instanceof i.default?(e.on("press",(e=>(0,d.sendCmd)(e,!1))),e.on("release",(e=>(0,d.sendCmd)(e,!0)))):e instanceof s.default&&e.on("move end",u.default)},492:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(753)),a=n(o(898)),s=o(339),r=n(o(437));t.default=function(){const e=i.default.elements.buttons.find((e=>"drive"===e.customAction)),t=e?e._html='\n\t<svg viewBox="0 0 32 32">\n\t\t<path d="M16 0a16 16 0 100 32 16 16 0 000-32zm0 4a12 12 0 0111.3 8H4.7c1.7-4.6 6-8 11.3-8zm0 14a2 2 0 110-4 2 2 0 010 4zM4 16c5.5 0 9.9 5.3 10 11.8A12 12 0 014 16zm14 11.8c.1-6.5 4.5-11.8 10-11.8a12 12 0 01-10 11.8z"></path>\n\t</svg>':"";null==e||e.render(),e&&e.element.addEventListener("touchstart",(function(){var o;(null===(o=window.layoutEditor)||void 0===o?void 0:o.opened)||(e.active?(e.release(),e.element.innerHTML=t,window.ondevicemotion=null,r.default.vgamepad?(0,s.sendCmd)("0|0",!1,"VJL"):((0,s.sendCmd)("joyLUp",!0),(0,s.sendCmd)("joyLLeft",!0),(0,s.sendCmd)("joyLRight",!0))):function(){e.press(),e.element.innerHTML='<i class="driveArrow mdi mdi-arrow-up"></i>';let t=0,o=0,n=[];window.ondevicemotion=i=>{const d=window.outerWidth>window.outerHeight,l=i.accelerationIncludingGravity[d?"x":"y"]>=0?1:-1;t=parseFloat(i.accelerationIncludingGravity[d?"y":"x"].toFixed(1)),t*=l*(d?1:-1);const c=e.element.children[0];if(r.default.vgamepad){let e=Math.round(32767/r.default.driveSensitivity*t);e<10923*r.default.drivePrecision&&e>-10923*r.default.drivePrecision&&(e=0),e>32767&&(e=32767),e<-32767&&(e=-32767);const o=90*e/32767;c.style.transform=`rotate(${o}deg)`,(0,s.sendCmd)(`${e}|0`,!1,"VJL")}else{const e=function(e,t,o,n){let i=0;return-45===e?(t>o&&(i=45),t<-o+n&&(i=-45),t>2*o&&(i*=2),t<2*-o-n&&(i*=2)):45===e?(t>o-n&&(i=45),t<-o&&(i=-45),t>2*o+n&&(i*=2),t<2*-o&&(i*=2)):(t>o&&(i=45),t<-o&&(i=-45),t>2*o&&(i*=2),t<2*-o&&(i*=2)),i}(o,t,r.default.driveSensitivity,r.default.drivePrecision);if(e===o)return;c.style.transform=`rotate(${e}deg)`,o=e,(0,a.default)(2*r.default.vibrate);const i=function(e){let t;switch(e){case-90:t=["joyLLeft"];break;case-45:t=["joyLUp","joyLLeft"];break;case 45:t=["joyLUp","joyLRight"];break;case 90:t=["joyLRight"];break;default:t=["joyLUp"]}return t}(e),d=i.filter((e=>!n.includes(e))),l=n.filter((e=>!i.includes(e)));(0,s.sendCmd)(d),(0,s.sendCmd)(l,!0),n=[...i]}}}())})),"https:"!==location.protocol&&"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname&&e&&e.element&&(e.element.style.display="none")}},735:function(e,t,o){var n,i,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(o(45)),r=o(560),d=a(o(437)),l=o(294);d.default.hidden.includes("mobystk:deviceInfo")&&r.$deviceInfo.classList.add("hidden"),d.default.hidden.includes("mobystk:ping")&&r.$ping.classList.add("hidden"),r.$edit.addEventListener("click",s.default),r.$edit.addEventListener("contextmenu",(()=>{window.layoutEditor.opened?window.layoutEditor.end():window.layoutEditor.start()})),d.default.layout||(location.href="index.html"),d.default.debug&&document.body.classList.add("debug"),d.default.invertL&&document.body.classList.add("invertL"),d.default.invertR&&document.body.classList.add("invertR"),d.default.bgImage&&(r.$bgImage.style.backgroundImage=`url('${d.default.bgImage}')`),d.default.bgOpacity&&(r.$bgImage.style.opacity=String(d.default.bgOpacity)),d.default.bgBlur&&(r.$bgImage.style.filter=`blur(${d.default.bgBlur}px)`),d.default.colorsBackground&&r.$root.style.setProperty("--background",d.default.colorsBackground),d.default.colorsColor&&r.$root.style.setProperty("--color",d.default.colorsColor),d.default.colorsBorder&&r.$root.style.setProperty("--border",d.default.colorsBorder),d.default.colorsActive&&r.$root.style.setProperty("--active",d.default.colorsActive);const c=document.createElement("style");if(c.textContent=d.default.customCSS,document.body.append(c),d.default.customJS&&d.default.customJS.trim()&&confirm("Deseja executar os plugins?"))try{new Function(d.default.customJS.trim())()}catch(e){alert("Ocorreu um erro ao executar os plugins\n\n"+((null==e?void 0:e.message)||""))}if(d.default.pluginMobile){const e=document.createElement("script");e.src="lib/plugins/mobile.js",e.onerror=()=>(0,l.toast)("Erro ao carregar plugin MobyStk Mobile"),document.body.appendChild(e)}function u(e){r.$DIBatteryIcon.classList.remove(...Array.from(r.$DIBatteryIcon.classList)),r.$DIBatteryIcon.classList.add("mdi");const t=e.charging,o=100*e.level,n=10*Math.round(o/10);r.$DIBatteryLevel.innerText=Math.round(o)+"% •",0===n?r.$DIBatteryIcon.classList.add("mdi-battery-outline"):100===n?r.$DIBatteryIcon.classList.add("mdi-battery"+(t?"-charging-100":"")):r.$DIBatteryIcon.classList.add("mdi-battery-"+(t?"charging-":"")+n)}function f(){const e=(new Date).getHours().toString().padStart(2,"0"),t=(new Date).getMinutes().toString().padStart(2,"0");r.$DIClock.innerText=e+":"+t}null===(i=null===(n=navigator.getBattery)||void 0===n?void 0:n.call(navigator))||void 0===i||i.then((e=>{u(e),e.addEventListener("chargingchange",(e=>u(e.target))),e.addEventListener("levelchange",(e=>u(e.target)))})).catch(console.error),window.setInterval(f,1e3),f(),r.$DIPlayerNumber.innerText=String(d.default.player+1),d.default.debug&&r.$deviceInfo.addEventListener("click",(()=>{d.default.player+=1,d.default.player>3&&(d.default.player=0),r.$DIPlayerNumber.innerText=String(d.default.player+1)}))},263:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const o={joyLUp:["W","T","058","195"],joyLLeft:["A","F","063","196"],joyLDown:["S","G","096","197"],joyLRight:["D","H","097","198"],joyRUp:["5","9","098","199"],joyRLeft:["6","0","099","200"],joyRDown:["7","[","100","201"],joyRRight:["8","]","101","202"],padUp:["UP","Z","102","203","XUSB_GAMEPAD_DPAD_UP"],padLeft:["LEFT","X","103","204","XUSB_GAMEPAD_DPAD_LEFT"],padDown:["DOWN","C","104","205","XUSB_GAMEPAD_DPAD_DOWN"],padRight:["RIGHT","V","105","206","XUSB_GAMEPAD_DPAD_RIGHT"],actUp:["I","B","106","207","XUSB_GAMEPAD_Y"],actLeft:["J","N","107","208","XUSB_GAMEPAD_X"],actDown:["K","M","108","209","XUSB_GAMEPAD_A"],actRight:["L","Ç","109","210","XUSB_GAMEPAD_B"],left1:["Q","Y","110","211","XUSB_GAMEPAD_LEFT_SHOULDER"],left2:["1","3","111","212","XUSB_GAMEPAD_LEFT_TRIGGER"],left3:[";","´","187","213","XUSB_GAMEPAD_LEFT_THUMB"],right1:["E","U","188","214","XUSB_GAMEPAD_RIGHT_SHOULDER"],right2:["2","4","189","215","XUSB_GAMEPAD_RIGHT_TRIGGER"],right3:[".","~","190","216","XUSB_GAMEPAD_RIGHT_THUMB"],select:["ENTER","P","193","217","XUSB_GAMEPAD_BACK"],start:["SPACE","O","231","218","XUSB_GAMEPAD_START"],pause:["ESC","ESC","ESC","ESC","ESC"],load:["F1","F1","F1","F1","F1"],save:["[","[","[","[","["],fast:["TAB","TAB","TAB","TAB","TAB"],volUp:["MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP"],volDown:["MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN"]};window.keymappings=o,t.default=o},437:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(257)),a={ip:(0,i.default)("code","localhost:5000"),layout:(0,i.default)("layout"),player:(0,i.default)("player",1)-1,password:(0,i.default)("password"),debug:(0,i.default)("debug",!1),locked:(0,i.default)("locked",[]),hidden:(0,i.default)("hidden",[]),invertL:(0,i.default)("invertL",!1),invertR:(0,i.default)("invertR",!1),disJoyXAxis:(0,i.default)("disJoyXAxis",!1),disJoyYAxis:(0,i.default)("disJoyYAxis",!1),dblClickLoadSave:(0,i.default)("dblClickLoadSave",!1),changeKeyOnDrag:(0,i.default)("changeKeyOnDrag",!0),vibrate:(0,i.default)("vibrate",15),vibrateJoystick:(0,i.default)("vibrateJoystick",5),vibrationFromGame:(0,i.default)("vibrationFromGame",!0),vgamepad:(0,i.default)("vgamepad",!1),bgImage:(0,i.default)("bgImage",""),bgOpacity:(0,i.default)("bgOpacity",.5),bgBlur:(0,i.default)("bgBlur",0),colorsBackground:(0,i.default)("background","rgba(0, 0, 0, 1)"),colorsColor:(0,i.default)("color","rgba(255, 255, 255, 0.53)"),colorsBorder:(0,i.default)("border","rgba(255, 255, 255, 0.53)"),colorsActive:(0,i.default)("active","rgba(255, 255, 255, 0.2)"),customCSS:(0,i.default)("customCSS",""),customJS:(0,i.default)("customJS",""),pluginMobile:(0,i.default)("pluginMobile",!1),driveSensitivity:(0,i.default)("driveSensitivity",2),drivePrecision:(0,i.default)("drivePrecision",1)};window.options=a,t.default=a},970:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._socketConnect=t.socket=t.socketConnect=t.commands=void 0;const i=n(o(437)),a=n(o(45)),s=o(294),r=document.querySelector(".ping");let d,l=!1,c=Date.now();function u(){let e;try{e=new WebSocket("ws://"+i.default.ip)}catch(e){return i.default.debug&&console.error(e),void o()}function o(){document.body.classList.remove("connecting","connected"),document.body.classList.add("disconnected"),setTimeout((()=>t.socket=(0,t.socketConnect)()),3e3)}return e.addEventListener("open",(function(){document.body.classList.remove("connecting","disconnected"),document.body.classList.add("connected"),e.send("PASSWORD "+(i.default.password||""))})),e.addEventListener("close",o),e.addEventListener("message",(function(e){const[o,...n]=e.data.split(" "),i=t.commands[o];"function"==typeof i&&i(n.join(" "))})),document.body.classList.remove("connected","disconnected"),document.body.classList.add("connecting"),e}t.commands={INFO:e=>{(0,s.toast)(e)},AUTH_FAILED:()=>{if(l)return;document.body.classList.remove("connecting","connected"),document.body.classList.add("disconnected");const e=prompt("O computador requer uma senha para se conectar ao MobyStk");null!==e&&(localStorage.setItem("joystick.password",e),l=!0,(0,a.default)(),window.location.reload())},pong:e=>{Number(e)===d&&(r&&(r.innerText=String(Date.now()-c)+"ms"),d=void 0)}},window.socketConnect=u,t.socketConnect=()=>window.socketConnect(),t.socket=(0,t.socketConnect)(),t._socketConnect=u,window.socket=t.socket,setInterval((function(){d&&r&&(r.innerText="+999ms"),d=Math.floor(1e6*Math.random()),c=Date.now(),null===t.socket||void 0===t.socket||t.socket.send(`ping ${d}`)}),1e3)},103:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.events={}}on(e,t){for(const o of e.split(" "))"object"!=typeof this.events[o]&&(this.events[o]=[]),this.events[o].push(t);return()=>{for(const o of e.split(" "))this.off(o,t)}}off(e,t){for(const o of e.split(" "))if("object"==typeof this.events[o]){const e=this.events[o].indexOf(t);e>-1&&this.events[o].splice(e,1)}}emit(e,...t){for(const o of e.split(" "))"object"==typeof this.events[o]&&this.events[o].forEach((e=>e.apply(this,t)))}once(e,t){for(const o of e.split(" ")){const e=this.on(o,((...o)=>{e(),t.apply(this,o)}))}}}},898:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});let o=Date.now();t.default=function(e,t=!1){let n;return n=Array.isArray(e)?e.reduce(((e,t)=>e+Number(t)),0):Number(e),t?(o=Date.now()+n,navigator.vibrate(e)):Date.now()+n>o&&navigator.vibrate(e)}}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var a=o[e]={exports:{}};return t[e].call(a.exports,a,a.exports,n),a.exports}n.m=t,e=[],n.O=(t,o,i,a)=>{if(!o){var s=1/0;for(c=0;c<e.length;c++){for(var[o,i,a]=e[c],r=!0,d=0;d<o.length;d++)(!1&a||s>=a)&&Object.keys(n.O).every((e=>n.O[e](o[d])))?o.splice(d--,1):(r=!1,a<s&&(s=a));if(r){e.splice(c--,1);var l=i();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,i,a]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={698:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var i,a,[s,r,d]=o,l=0;if(s.some((t=>0!==e[t]))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(d)var c=d(n)}for(t&&t(o);l<s.length;l++)a=s[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},o=self.webpackChunkjoystick=self.webpackChunkjoystick||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=n.O(void 0,[817,167],(()=>n(504)));i=n.O(i)})();
//# sourceMappingURL=joystick.js.map