(()=>{"use strict";var t,e={175:(t,e,n)=>{const o={joyLUp:["W","T","058","195"],joyLLeft:["A","F","063","196"],joyLDown:["S","G","096","197"],joyLRight:["D","H","097","198"],joyRUp:["5","9","098","199"],joyRLeft:["6","0","099","200"],joyRDown:["7","[","100","201"],joyRRight:["8","]","101","202"],padUp:["UP","Z","102","203","XUSB_GAMEPAD_DPAD_UP"],padLeft:["LEFT","X","103","204","XUSB_GAMEPAD_DPAD_LEFT"],padDown:["DOWN","C","104","205","XUSB_GAMEPAD_DPAD_DOWN"],padRight:["RIGHT","V","105","206","XUSB_GAMEPAD_DPAD_RIGHT"],actUp:["I","B","106","207","XUSB_GAMEPAD_Y"],actLeft:["J","N","107","208","XUSB_GAMEPAD_X"],actDown:["K","M","108","209","XUSB_GAMEPAD_A"],actRight:["L","Ç","109","210","XUSB_GAMEPAD_B"],left1:["Q","Y","110","211","XUSB_GAMEPAD_LEFT_SHOULDER"],left2:["1","3","111","212","XUSB_GAMEPAD_LEFT_TRIGGER"],left3:[";","´","187","213","XUSB_GAMEPAD_LEFT_THUMB"],right1:["E","U","188","214","XUSB_GAMEPAD_RIGHT_SHOULDER"],right2:["2","4","189","215","XUSB_GAMEPAD_RIGHT_TRIGGER"],right3:[".","~","190","216","XUSB_GAMEPAD_RIGHT_THUMB"],select:["ENTER","P","193","217","XUSB_GAMEPAD_BACK"],start:["SPACE","O","231","218","XUSB_GAMEPAD_START"],pause:["ESC","ESC","ESC","ESC","ESC"],load:["F1","F1","F1","F1","F1"],save:["[","[","[","[","["],fast:["TAB","TAB","TAB","TAB","TAB"],volUp:["MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP"],volDown:["MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN"]};var r=n(45),i=Date.now();function a(t,e){var n;return void 0===e&&(e=!1),n=Array.isArray(t)?t.reduce((function(t,e){return t+Number(e)}),0):Number(t),e?(i=Date.now()+n,navigator.vibrate(t)):Date.now()+n>i&&navigator.vibrate(t)}var c=n(146),s=n(186),l=n(963),u=n(931);const d={buttons:c.Z,groups:s.Z,joysticks:l.Z,layouts:u.Z,currentLayout:null,currentTouches:[],elements:{all:[],buttons:[],groups:[],joysticks:[]}};var v=n(860),f=n.n(v)().namespace("joystick");function p(t,e){var n=f(t);return null===n?e:n}var y={ip:p("code","localhost:5000"),layout:p("layout"),player:p("player",1)-1,password:p("password"),debug:p("debug",!1),locked:p("locked",[]),hidden:p("hidden",[]),invertL:p("invertL",!1),invertR:p("invertR",!1),disJoyXAxis:p("disJoyXAxis",!1),disJoyYAxis:p("disJoyYAxis",!1),dblClickLoadSave:p("dblClickLoadSave",!1),changeKeyOnDrag:p("changeKeyOnDrag",!0),vibrate:p("vibrate",15),vibrateJoystick:p("vibrateJoystick",5),vibrationFromGame:p("vibrationFromGame",!0),vgamepad:p("vgamepad",!1),bgImage:p("bgImage",""),bgOpacity:p("bgOpacity",.5),bgBlur:p("bgBlur",0),colorsBackground:p("background","rgba(0, 0, 0, 1)"),colorsColor:p("color","rgba(255, 255, 255, 0.53)"),colorsBorder:p("border","rgba(255, 255, 255, 0.53)"),colorsActive:p("active","rgba(255, 255, 255, 0.2)"),customCSS:p("customCSS",""),customJS:p("customJS",""),driveSensitivity:p("driveSensitivity",2),drivePrecision:p("drivePrecision",1)};window.options=y;const h=y;var m=!1,g=!1,b=[];function L(){F("load"),F("load",!0),a(3*h.vibrate)}function w(){F("save"),F("save",!0),a(3*h.vibrate)}function k(){g||(this.instance&&this.instance[this.instance.active?"release":"press"](),m||(b=[]),m=!m)}function _(){return t=this,e=void 0,o=function(){var t,e,n;return function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(o){switch(o.label){case 0:if(m)return[2];g=!g,this.instance&&this.instance.press(),t=0,e=b,o.label=1;case 1:return t<e.length?(n=e[t],g?1!==J.readyState?[3,4]:(J.send(n),[4,new Promise((function(t){return setTimeout(t,50)}))]):[3,4]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return this.instance&&this.instance.release(),g=!1,[2]}}))},new((n=void 0)||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}));var t,e,n,o}function A(){document.documentElement.requestFullscreen()}window.playingMacro=g,window.recordingMacro=m,window.lastMacro=b,window.loadState=L,window.saveState=w,window.recordMacro=k,window.playMacro=_,window.fullScreen=A;var E=document.documentElement,S=document.querySelector(".edit"),j=document.querySelector(".backgroundImage"),O=document.querySelector(".deviceInfo"),x=O.querySelector(".battery"),D=x.querySelector(".battery-icon"),M=x.querySelector(".battery-level"),T=O.querySelector(".clock"),P=O.querySelector(".player .player-number"),U=O.querySelector(".layout"),B=(O.querySelector(".status"),document.querySelector(".controller-indicator")),I=document.querySelector(".controller-layout"),R=document.querySelector('meta[name="viewport"]'),G=h.vgamepad?"mdi-google-controller":"mdi-keyboard";B.classList.add(G);var X=!1,C={V:function(t){var e=t.toLowerCase().split(" ")[0];if(h.vibrationFromGame){var n=parseInt(e.split("|")[0]);a(n?3e3:0,!0),B.classList[n?"remove":"add"](G),B.classList[n?"add":"remove"]("mdi-vibrate")}},INFO:function(t){toast(t)},AUTH_FAILED:function(){if(!X){document.body.classList.remove("connecting","connected"),document.body.classList.add("disconnected");var t=prompt("O computador requer uma senha para se conectar ao MobyStk");null!==t&&(localStorage.setItem("joystick.password",t),X=!0,(0,r.Z)(),window.location.reload())}}},J=function t(){var e=new WebSocket("ws://"+h.ip);return e.addEventListener("open",(function(){document.body.classList.remove("connecting","disconnected"),document.body.classList.add("connected"),e.send("PASSWORD "+(h.password||""))})),e.addEventListener("close",(function(){document.body.classList.remove("connecting","connected"),document.body.classList.add("disconnected"),setTimeout((function(){return J=t()}),3e3)})),e.addEventListener("message",(function(t){var e=t.data.split(" "),n=e[0],o=e.slice(1),r=C[n];"function"==typeof r&&r(o.join(" "))})),document.body.classList.remove("connected","disconnected"),document.body.classList.add("connecting"),e}();function F(t,e,n){if(void 0===e&&(e=!1),t&&t.length)return"string"==typeof t&&(t=[t]),n||(t=t.map((function(t){var e,n;return h.vgamepad?null===(e=o[t])||void 0===e?void 0:e[4]:null===(n=o[t])||void 0===n?void 0:n[h.player]}))),m&&n?b.push("".concat(n," ").concat(t," ").concat(h.player)):m?b.push("".concat(e?"R":"P"," ").concat(t," ").concat(h.player)):void(1===J.readyState&&(n?J.send("".concat(n," ").concat(t," ").concat(h.player)):J.send("".concat(e?"R":"P"," ").concat(t," ").concat(h.player))))}window.sendCmd=F;var H,z=function(){function t(){this.events={}}return t.prototype.on=function(t,e){for(var n=this,o=0,r=t.split(" ");o<r.length;o++){var i=r[o];"object"!=typeof this.events[i]&&(this.events[i]=[]),this.events[i].push(e)}return function(){for(var o=0,r=t.split(" ");o<r.length;o++){var i=r[o];n.off(i,e)}}},t.prototype.off=function(t,e){for(var n=0,o=t.split(" ");n<o.length;n++){var r=o[n];if("object"==typeof this.events[r]){var i=this.events[r].indexOf(e);i>-1&&this.events[r].splice(i,1)}}},t.prototype.emit=function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];for(var r=0,i=t.split(" ");r<i.length;r++){var a=i[r];"object"==typeof this.events[a]&&this.events[a].forEach((function(t){return t.apply(e,n)}))}},t.prototype.once=function(t,e){for(var n=this,o=function(t){var o=r.on(t,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];o(),e.apply(n,t)}))},r=this,i=0,a=t.split(" ");i<a.length;i++)o(a[i])},t}(),q=(H=function(t,e){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},H(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}H(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),N=function(t){function e(e){var n=t.call(this)||this;return n.type="mobystk:unknown",n.id=e.id||"mobystk:unknown",n.name=e.name||"(Sem nome)",n.x=e.x||[0,"px"],n.y=e.y||[0,"px"],n.anchorX=e.anchorX||0,n.anchorY=e.anchorY||0,n.width=e.width||[100,"px"],n.height=e.height||[100,"px"],n}return q(e,t),e.prototype.render=function(){var t=this.element;t.style.left=null,t.style.right=null,t.style.top=null,t.style.bottom=null,t.style.transform=null,t.style.width=this.width.join(""),t.style.height=this.height.join(""),0===this.anchorX&&(t.style.left=this.x.join("")),1===this.anchorX&&(t.style.right=this.x.join("")),0===this.anchorY&&(t.style.top=this.y.join("")),1===this.anchorY&&(t.style.bottom=this.y.join("")),t.classList[2===this.anchorX?"add":"remove"]("center-x"),t.classList[2===this.anchorY?"add":"remove"]("center-y"),t.classList[this.editing?"add":"remove"]("controller-editing")},e}(z),V=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Y=function(t){function e(e){var n=t.call(this,e)||this;n.type="mobystk:button",n.content=e.content||{type:"mobystk:text",value:""},n.key=e.key||"",n.customAction=e.customAction||!1,n.lockable=e.lockable||!1,n.diagonal=e.diagonal||!1,n.diagonal&&(n.targets=e.targets||[]),n.scalable=e.scalable||!1,n.border=e.border||[!0,!0,!0,!0],n.radius=e.radius||[[0,"px"],[0,"px"],[0,"px"],[0,"px"]],n.fontSize=e.fontSize||[20,"px"],n.active=!1,n.editing=!1;var o=document.createElement("button");return o.classList.add("controller-button"),o.dataset.id=n.id,o.instance=n,n.element=o,n}return V(e,t),e.prototype.press=function(t){var e=this;if(void 0===t&&(t=!1),this.diagonal)for(var n=0,o=d.elements.buttons.filter((function(t){return e.targets.includes(t.id)&&!t.lockable}));n<o.length;n++)o[n].press(!0);else this.active||this.customAction||this.emit("press",this.key),!this.scalable||this.active||t?!this.active&&t&&(this.element.classList.add("controller-button-active-diagonal"),this.element.classList.add("controller-button-scale-diagonal")):this.element.classList.add("controller-button-scale"),this.active=!0,this.element.classList.add("controller-button-active")},e.prototype.release=function(){var t=this;if(this.diagonal)for(var e=0,n=d.elements.buttons.filter((function(e){return t.targets.includes(e.id)}));e<n.length;e++)n[e].release(!0);else this.active&&!this.customAction&&this.emit("release",this.key),this.active=!1,this.element.classList.remove("controller-button-active"),this.element.classList.remove("controller-button-scale"),this.element.classList.remove("controller-button-active-diagonal"),this.element.classList.remove("controller-button-scale-diagonal")},e.prototype.render=function(){t.prototype.render.call(this);var e=this.element;this.border[0]||(e.style.borderTop="0"),this.border[1]||(e.style.borderRight="0"),this.border[2]||(e.style.borderBottom="0"),this.border[3]||(e.style.borderLeft="0");var n=this.radius.map((function(t){return t.join("")})).join(" ");if(e.style.borderRadius=n,e.style.fontSize=this.fontSize.join(""),e.classList[this.diagonal?"add":"remove"]("controller-button-diagonal"),e.classList[this.lockable?"add":"remove"]("controller-button-lockable"),e.innerHTML="","mobystk:text"===this.content.type)e.innerText=this.content.value;else if("mobystk:icon"===this.content.type){var o=document.createElement("i");o.classList.add("mdi","mdi-"+this.content.value),e.appendChild(o)}this._html&&(e.innerHTML=this._html),e.classList[this.customAction?"add":"remove"]("controller-custom-action"),e.dataset.action=this.customAction||null},e}(N);const W=Y;var Z=n(694),K=n.n(Z),Q=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const $=function(t){function e(e){var n=t.call(this,e)||this;n.type="mobystk:joystick",n.size=e.size||[90,"px"],n.padding=e.padding||60,n.keys=e.keys||["joyLUp","joyLLeft","joyLDown","joyLRight"],n.position={up:!1,down:!1,left:!1,right:!1};var o=document.createElement("div");return o.classList.add("controller-joystick"),o.dataset.id=n.id,o.instance=n,n.element=o,n}return Q(e,t),e.prototype.render=function(){var e=this;this.width=[this.size[0]+this.padding,this.size[1]],this.height=[this.size[0]+this.padding,this.size[1]],t.prototype.render.call(this);var n=this.element;this.position={up:!1,down:!1,left:!1,right:!1},this.nipple&&this.nipple.destroy(),this.nipple=K().create({zone:n,size:this.size[0],mode:"static",position:{left:"50%",top:"50%"},lockX:h.disJoyYAxis,lockY:h.disJoyXAxis}),this.nipple.on("move",(function(t,n){return e.emit("move",e,t,n)})),this.nipple.on("end",(function(t,n){return e.emit("end",e,t,n)}))},e}(N);function tt(t){for(var e,n=function(t){var n=d.currentTouches.findIndex((function(e){return e.touch.identifier===t.identifier}));if(n<0)return"continue";(null===(e=d.currentTouches[n].target)||void 0===e?void 0:e.instance)instanceof W&&d.currentTouches[n].target.instance.release(),d.currentTouches.splice(n,1)},o=0,r=Array.from(t.changedTouches);o<r.length;o++)n(r[o])}document.addEventListener("touchstart",(function(t){for(var e=0,n=Array.from(t.changedTouches);e<n.length;e++){for(var o=n[e],r=document.elementFromPoint(o.clientX,o.clientY);null!==r&&!(r.instance instanceof W&&!r.instance.customAction||r.instance instanceof $);)r=r.parentElement;if(null==r?void 0:r.instance.lockable)a(h.vibrate),r.instance.active?r.instance.release():r.instance.press();else{var i=(null==r?void 0:r.instance)instanceof $;d.currentTouches.push({target:r,touch:o,joystick:i}),r&&(a(h.vibrate),i||r.instance.press())}}})),document.addEventListener("touchmove",(function(t){for(var e,n,o=function(t){var o=d.currentTouches.findIndex((function(e){return e.touch.identifier===t.identifier}));if(o<0)return"continue";var r=d.currentTouches[o];if(r.joystick)return"continue";if(!h.changeKeyOnDrag&&r.target)return"continue";r.touch=t;for(var i=document.elementFromPoint(t.clientX,t.clientY);null!==i&&(!(i.instance instanceof W)||i.instance.customAction||i.instance.lockable);)i=i.parentElement;return r.target===i?"continue":(null===(e=r.target)||void 0===e||e.instance.release(),i&&!(null===(n=i.instance)||void 0===n?void 0:n.active)||(i=null),r.target=i,i?(i.instance.press(),void a(h.vibrate)):"continue")},r=0,i=Array.from(t.changedTouches);r<i.length;r++){o(i[r])}})),document.addEventListener("touchend",tt),document.addEventListener("touchcancel",tt);var et=["mobystk:joystick_left","mobystk:joystick_right"];function nt(t,e,n){var o,r;if(a(h.vibrateJoystick*(null==n?void 0:n.distance)/45),h.vgamepad&&et.includes(t.id)){var i=Math.round(65534/90*(45+(null==n?void 0:n.distance)*Math.cos(null===(o=null==n?void 0:n.angle)||void 0===o?void 0:o.radian))-32768),c=Math.round(65534/90*(45+(null==n?void 0:n.distance)*Math.sin(null===(r=null==n?void 0:n.angle)||void 0===r?void 0:r.radian))-32768);(isNaN(i)||isNaN(c))&&(i=c=0),"mobystk:joystick_left"===t.id&&F("".concat(i,"|").concat(c),!1,"VJL"),"mobystk:joystick_right"===t.id&&F("".concat(i,"|").concat(c),!1,"VJR")}if(!(null==n?void 0:n.direction))return s("up",!1),s("left",!1),s("down",!1),void s("right",!1);function s(e,n){var o=function(t,e){var n,o;switch(e){case"up":n=t[0],o="Top";break;case"left":n=t[1],o="Left";break;case"down":n=t[2],o="Bottom";break;case"right":n=t[3],o="Right"}return{key:n,border:o}}(t.keys,e),r=o.key,i=o.border;if(t.element.querySelector(".back").style["border".concat(i,"Width")]=n?"7px":"",!h.vgamepad||!et.includes(t.id)){if(t.position[e]===n)return;F([r],!n)}t.position[e]=n}h.disJoyYAxis||s("up",(null==n?void 0:n.angle.degree)>22.5&&(null==n?void 0:n.angle.degree)<157.5),h.disJoyXAxis||s("left",(null==n?void 0:n.angle.degree)>112.5&&(null==n?void 0:n.angle.degree)<247.5),h.disJoyYAxis||s("down",(null==n?void 0:n.angle.degree)>202.5&&(null==n?void 0:n.angle.degree)<337.5),h.disJoyXAxis||s("right",(null==n?void 0:n.angle.degree)>292.5||(null==n?void 0:n.angle.degree)<67.5)}function ot(){var t;t=window.outerHeight>window.outerWidth/1.7777777777777777?640:window.outerWidth/window.outerHeight*360,R.setAttribute("content","width=".concat(t,", user-scalable=0")),d.currentTouches=d.currentTouches.filter((function(t){return!t.joystick})),d.elements.joysticks.forEach((function(t){return t.render()}))}window.addEventListener("load",ot),window.addEventListener("resize",ot);var rt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),it=function(t){function e(e){var n=t.call(this,e)||this;n.type="mobystk:group",n.content=e.content||[];var o=document.createElement("div");o.classList.add("controller-group"),o.dataset.id=n.id,o.instance=n,n.element=o;for(var r=0,i=n.content;r<i.length;r++){var a=i[r];o.appendChild(a.element),a.render()}return n}return rt(e,t),e}(N);function at(){var t=d.elements.buttons.find((function(t){return"drive"===t.customAction})),e=t?t._html='\n\t<svg viewBox="0 0 32 32">\n\t\t<path d="M16 0a16 16 0 100 32 16 16 0 000-32zm0 4a12 12 0 0111.3 8H4.7c1.7-4.6 6-8 11.3-8zm0 14a2 2 0 110-4 2 2 0 010 4zM4 16c5.5 0 9.9 5.3 10 11.8A12 12 0 014 16zm14 11.8c.1-6.5 4.5-11.8 10-11.8a12 12 0 01-10 11.8z"></path>\n\t</svg>':"";null==t||t.render(),t&&t.element.addEventListener("touchstart",(function(){t.active?(t.release(),t.element.innerHTML=e,window.ondevicemotion=null,h.vgamepad?F("0|0",!1,"VJL"):(F("joyLUp",!0),F("joyLLeft",!0),F("joyLRight",!0))):function(){t.press(),t.element.innerHTML='<i class="driveArrow mdi mdi-arrow-up"></i>';var e=0,n=0,o=[];window.ondevicemotion=function(r){var i=window.outerWidth>window.outerHeight,c=r.accelerationIncludingGravity[i?"x":"y"]>=0?1:-1;e=parseFloat(r.accelerationIncludingGravity[i?"y":"x"].toFixed(1)),e*=c*(i?1:-1);var s=t.element.children[0];if(h.vgamepad){var l=Math.round(32767/h.driveSensitivity*e);l<10923*h.drivePrecision&&l>-10923*h.drivePrecision&&(l=0),l>32767&&(l=32767),l<-32767&&(l=-32767),u=90*l/32767,s.style.transform="rotate(".concat(u,"deg)"),F("".concat(l,"|0"),!1,"VJL")}else{var u=function(t,e,n,o){var r=0;return-45===t?(e>n&&(r=45),e<-n+o&&(r=-45),e>2*n&&(r*=2),e<2*-n-o&&(r*=2)):45===t?(e>n-o&&(r=45),e<-n&&(r=-45),e>2*n+o&&(r*=2),e<2*-n&&(r*=2)):(e>n&&(r=45),e<-n&&(r=-45),e>2*n&&(r*=2),e<2*-n&&(r*=2)),r}(n,e,h.driveSensitivity,h.drivePrecision);if(u===n)return;s.style.transform="rotate(".concat(u,"deg)"),n=u,a(2*h.vibrate);var d=function(t){var e;switch(t){case-90:e=["joyLLeft"];break;case-45:e=["joyLUp","joyLLeft"];break;case 45:e=["joyLUp","joyLRight"];break;case 90:e=["joyLRight"];break;default:e=["joyLUp"]}return e}(u),v=d.filter((function(t){return!o.includes(t)})),f=o.filter((function(t){return!d.includes(t)}));F(v),F(f,!0),o=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}([],d,!0)}}}()})),"https:"!==location.protocol&&"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname&&(t.element.style.display="none")}var ct=function(){return ct=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ct.apply(this,arguments)},st=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function lt(t,e){if(void 0===e&&(e=[]),"mobystk:layout"===t.type||"mobystk:group"===t.type){"mobystk:layout"!==t.type&&e.push(t);for(var n=0,o=t.content;n<o.length;n++)lt(o[n],e)}else e.push(t);return e}function ut(t){var e,n;if(!(null===(e=h.hidden)||void 0===e?void 0:e.includes(t.import||t.id))&&(t.import&&(t=function(t){var e=st(st(st([],d.buttons,!0),d.groups,!0),d.joysticks,!0).find((function(e){return e.id===t.import}));if(e)return ct(ct({},e),t)}(t)),t)){if("mobystk:button"===t.type)return(null===(n=h.locked)||void 0===n?void 0:n.includes(t.import||t.id))&&(t=ct(ct({},t),{lockable:!0})),new W(t);if("mobystk:group"===t.type){t.content=t.content.map(ut).filter((function(t){return t}));var o=new it(t);return t.content=t.content.map((function(t){return t.parent=o})),o}return"mobystk:joystick"===t.type?new $(t):void 0}}if(!h.layout)throw window.location.href="index.html",new Error("Layout não selecionado");var dt,vt,ft=d.layouts.find((function(t){return t.id===h.layout}));if(!ft)throw alert("Layout não encontrado!"),window.location.href="index.html",new Error("Layout não encontrado");!function(t){var e=ct(ct({},t),{content:t.content.map(ut).filter((function(t){return t}))}),n=lt(e);I.innerHTML="";for(var o=0,r=e.content;o<r.length;o++){var i=r[o];i&&(I.appendChild(i.element),i.render())}d.currentLayout=e,d.elements.all=n,d.elements.buttons=n.filter((function(t){return t instanceof W})),d.elements.groups=n.filter((function(t){return t instanceof it})),d.elements.joysticks=n.filter((function(t){return t instanceof $})),U.innerText=t.name||"???",function(){var t=d.elements.buttons.find((function(t){return"load-state"===t.customAction}));t&&t.element.addEventListener(h.dblClickLoadSave?"dblclick":"click",L);var e=d.elements.buttons.find((function(t){return"save-state"===t.customAction}));e&&e.element.addEventListener(h.dblClickLoadSave?"dblclick":"click",w),m=!1,g=!1,b=[];var n=d.elements.buttons.find((function(t){return"macro-record"===t.customAction}));n&&n.element.addEventListener("click",k);var o=d.elements.buttons.find((function(t){return"macro-play"===t.customAction}));o&&o.element.addEventListener("click",_),document.querySelector(".deviceInfo").addEventListener("dblclick",A)}(),at()}(ft);for(var pt=0,yt=d.elements.all;pt<yt.length;pt++){var ht=yt[pt];ht instanceof W?(ht.on("press",(function(t){return F(t,!1)})),ht.on("release",(function(t){return F(t,!0)}))):ht instanceof $&&ht.on("move end",nt)}h.hidden.includes("mobystk:deviceInfo")&&O.classList.add("hidden"),S.addEventListener("click",r.Z),h.layout||(location.href="index.html"),h.debug&&document.body.classList.add("debug"),h.invertL&&document.body.classList.add("invertL"),h.invertR&&document.body.classList.add("invertR"),h.bgImage&&(j.style.backgroundImage="url('".concat(h.bgImage,"')")),h.bgOpacity&&(j.style.opacity=String(h.bgOpacity)),h.bgBlur&&(j.style.filter="blur(".concat(h.bgBlur,"px)")),h.colorsBackground&&E.style.setProperty("--background",h.colorsBackground),h.colorsColor&&E.style.setProperty("--color",h.colorsColor),h.colorsBorder&&E.style.setProperty("--border",h.colorsBorder),h.colorsActive&&E.style.setProperty("--active",h.colorsActive);var mt=document.createElement("style");if(mt.textContent=h.customCSS,document.body.append(mt),h.customJS&&h.customJS.trim()&&confirm("Deseja executar os plugins?"))try{new Function(h.customJS.trim())()}catch(t){alert("Ocorreu um erro ao executar os plugins\n\n"+(t.message||""))}function gt(t){var e;(e=D.classList).remove.apply(e,Array.from(D.classList)),D.classList.add("mdi");var n=t.charging,o=100*t.level,r=10*Math.round(o/10);M.innerText=Math.round(o)+"% •",0===r?D.classList.add("mdi-battery-outline"):100===r?D.classList.add("mdi-battery"+(n?"-charging-100":"")):D.classList.add("mdi-battery-"+(n?"charging-":"")+r)}function bt(){var t=(new Date).getHours().toString().padStart(2,"0"),e=(new Date).getMinutes().toString().padStart(2,"0");T.innerText=t+":"+e}null===(vt=null===(dt=navigator.getBattery)||void 0===dt?void 0:dt.call(navigator))||void 0===vt||vt.then((function(t){gt(t),t.addEventListener("chargingchange",(function(t){return gt(t.target)})),t.addEventListener("levelchange",(function(t){return gt(t.target)}))})).catch(console.error),window.setInterval(bt,1e3),bt(),P.innerText=String(h.player+1),h.debug&&O.addEventListener("click",(function(){h.player+=1,h.player>3&&(h.player=0),P.innerText=String(h.player+1)})),document.addEventListener("contextmenu",(function(t){return t.preventDefault()})),window.addEventListener("load",(function(){document.body.classList.remove("preload")}))}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={exports:{}};return e[t].call(i.exports,i,i.exports,o),i.exports}o.m=e,t=[],o.O=(e,n,r,i)=>{if(!n){var a=1/0;for(u=0;u<t.length;u++){for(var[n,r,i]=t[u],c=!0,s=0;s<n.length;s++)(!1&i||a>=i)&&Object.keys(o.O).every((t=>o.O[t](n[s])))?n.splice(s--,1):(c=!1,i<a&&(a=i));if(c){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,r,i]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={698:0};o.O.j=e=>0===t[e];var e=(e,n)=>{var r,i,[a,c,s]=n,l=0;if(a.some((e=>0!==t[e]))){for(r in c)o.o(c,r)&&(o.m[r]=c[r]);if(s)var u=s(o)}for(e&&e(n);l<a.length;l++)i=a[l],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(u)},n=self.webpackChunkjoystick=self.webpackChunkjoystick||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var r=o.O(void 0,[817,343],(()=>o(175)));r=o.O(r)})();