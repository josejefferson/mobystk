(()=>{"use strict";var t,e={803:(t,e,n)=>{var o=n(860),r=n.n(o)().namespace("joystick");function i(t,e){var n=r(t);return null===n?e:n}const c={ip:i("code","localhost:5000"),layout:i("layout"),player:i("player",1)-1,password:i("password"),debug:i("debug",!1),locked:i("locked",[]),hidden:i("hidden",[]),invertL:i("invertL",!1),invertR:i("invertR",!1),disJoyXAxis:i("disJoyXAxis",!1),disJoyYAxis:i("disJoyYAxis",!1),dblClickLoadSave:i("dblClickLoadSave",!1),changeKeyOnDrag:i("changeKeyOnDrag",!0),vibrate:i("vibrate",15),vibrateJoystick:i("vibrateJoystick",5),vibrationFromGame:i("vibrationFromGame",!0),vgamepad:i("vgamepad",!1),bgImage:i("bgImage",""),bgOpacity:i("bgOpacity",.5),bgBlur:i("bgBlur",0),colorsBackground:i("background","rgba(0, 0, 0, 1)"),colorsColor:i("color","rgba(255, 255, 255, 0.53)"),colorsBorder:i("border","rgba(255, 255, 255, 0.53)"),colorsActive:i("active","rgba(255, 255, 255, 0.2)"),customCSS:i("customCSS",""),customJS:i("customJS",""),driveSensitivity:i("driveSensitivity",2),drivePrecision:i("drivePrecision",1)};var a=Date.now();function s(t,e){var n;return void 0===e&&(e=!1),n=Array.isArray(t)?t.reduce((function(t,e){return t+Number(e)}),0):Number(t),e?(a=Date.now()+n,navigator.vibrate(t)):Date.now()+n>a&&navigator.vibrate(t)}var l=n(45);const u={joyLUp:["W","T","058","195"],joyLLeft:["A","F","063","196"],joyLDown:["S","G","096","197"],joyLRight:["D","H","097","198"],joyRUp:["5","9","098","199"],joyRLeft:["6","0","099","200"],joyRDown:["7","[","100","201"],joyRRight:["8","]","101","202"],padUp:["UP","Z","102","203","XUSB_GAMEPAD_DPAD_UP"],padLeft:["LEFT","X","103","204","XUSB_GAMEPAD_DPAD_LEFT"],padDown:["DOWN","C","104","205","XUSB_GAMEPAD_DPAD_DOWN"],padRight:["RIGHT","V","105","206","XUSB_GAMEPAD_DPAD_RIGHT"],actUp:["I","B","106","207","XUSB_GAMEPAD_Y"],actLeft:["J","N","107","208","XUSB_GAMEPAD_X"],actDown:["K","M","108","209","XUSB_GAMEPAD_A"],actRight:["L","Ç","109","210","XUSB_GAMEPAD_B"],left1:["Q","Y","110","211","XUSB_GAMEPAD_LEFT_SHOULDER"],left2:["1","3","111","212","XUSB_GAMEPAD_LEFT_TRIGGER"],left3:[";","´","187","213","XUSB_GAMEPAD_LEFT_THUMB"],right1:["E","U","188","214","XUSB_GAMEPAD_RIGHT_SHOULDER"],right2:["2","4","189","215","XUSB_GAMEPAD_RIGHT_TRIGGER"],right3:[".","~","190","216","XUSB_GAMEPAD_RIGHT_THUMB"],select:["ENTER","P","193","217","XUSB_GAMEPAD_BACK"],start:["SPACE","O","231","218","XUSB_GAMEPAD_START"],pause:["ESC","ESC","ESC","ESC","ESC"],load:["F1","F1","F1","F1","F1"],save:["[","[","[","[","["],fast:["TAB","TAB","TAB","TAB","TAB"],volUp:["MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP"],volDown:["MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN"]};var d=n(146),f=n(186),v=n(963),p=n(931);const y={buttons:d.Z,groups:f.Z,joysticks:v.Z,layouts:p.Z,currentLayout:null,currentTouches:[],elements:{all:[],buttons:[],groups:[],joysticks:[]}};var h=!1,m=!1,g=[],b=document.querySelector(".controller-indicator"),L=c.vgamepad?"mdi-google-controller":"mdi-keyboard";b.classList.add(L);var k=!1,w={V:function(t){var e=t.toLowerCase().split(" "),n=e[0];if(e[1],c.vibrationFromGame){var o=parseInt(n.split("|")[0]);s(o?3e3:0,!0),b.classList[o?"remove":"add"](L),b.classList[o?"add":"remove"]("mdi-vibrate")}},INFO:function(t){toast(t)},AUTH_FAILED:function(){if(!k){document.body.classList.remove("connecting","connected"),document.body.classList.add("disconnected");var t=prompt("O computador requer uma senha para se conectar ao MobyStk");null!==t&&(localStorage.setItem("joystick.password",t),k=!0,(0,l.Z)(),window.location.reload())}}},_=function t(){var e=new WebSocket("ws://"+c.ip);return document.body.classList.remove("connected","disconnected"),document.body.classList.add("connecting"),e.addEventListener("open",(function(){document.body.classList.remove("connecting","disconnected"),document.body.classList.add("connected"),e.send("PASSWORD "+(c.password||""))})),e.addEventListener("close",(function(){document.body.classList.remove("connecting","connected"),document.body.classList.add("disconnected"),setTimeout((function(){return _=t()}),3e3)})),e.addEventListener("message",(function(t){var e=t.data.split(" "),n=e[0],o=e.slice(1),r=w[n];"function"==typeof r&&r(o.join(" "))})),e}();function A(t,e,n){if(void 0===e&&(e=!1),t&&t.length)return"string"==typeof t&&(t=[t]),n||(t=t.map((function(t){var e,n;return c.vgamepad?null===(e=u[t])||void 0===e?void 0:e[4]:null===(n=u[t])||void 0===n?void 0:n[c.player]}))),h&&n?g.push("".concat(n," ").concat(t," ").concat(c.player)):h?g.push("".concat(e?"R":"P"," ").concat(t," ").concat(c.player)):void(1===_.readyState&&(n?_.send("".concat(n," ").concat(t," ").concat(c.player)):_.send("".concat(e?"R":"P"," ").concat(t," ").concat(c.player))))}var E,S=function(){function t(){this.events={}}return t.prototype.on=function(t,e){for(var n=this,o=0,r=t.split(" ");o<r.length;o++){var i=r[o];"object"!=typeof this.events[i]&&(this.events[i]=[]),this.events[i].push(e)}return function(){for(var o=0,r=t.split(" ");o<r.length;o++){var i=r[o];n.off(i,e)}}},t.prototype.off=function(t,e){for(var n=0,o=t.split(" ");n<o.length;n++){var r=o[n];if("object"==typeof this.events[r]){var i=this.events[r].indexOf(e);i>-1&&this.events[r].splice(i,1)}}},t.prototype.emit=function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];for(var r=0,i=t.split(" ");r<i.length;r++){var c=i[r];"object"==typeof this.events[c]&&this.events[c].forEach((function(t){return t.apply(e,n)}))}},t.prototype.once=function(t,e){for(var n=this,o=function(t){var o=r.on(t,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];o(),e.apply(n,t)}))},r=this,i=0,c=t.split(" ");i<c.length;i++)o(c[i])},t}(),j=(E=function(t,e){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},E(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),O=function(t){function e(e){var n=t.call(this)||this;return n.type="mobystk:unknown",n.id=e.id||"mobystk:unknown",n.name=e.name||"(Sem nome)",n.x=e.x||[0,"px"],n.y=e.y||[0,"px"],n.anchorX=e.anchorX||0,n.anchorY=e.anchorY||0,n.width=e.width||[100,"px"],n.height=e.height||[100,"px"],n}return j(e,t),e.prototype.render=function(){var t=this.element;t.style.left=null,t.style.right=null,t.style.top=null,t.style.bottom=null,t.style.transform=null,t.style.width=this.width.join(""),t.style.height=this.height.join(""),0===this.anchorX&&(t.style.left=this.x.join("")),1===this.anchorX&&(t.style.right=this.x.join("")),0===this.anchorY&&(t.style.top=this.y.join("")),1===this.anchorY&&(t.style.bottom=this.y.join("")),t.classList[2===this.anchorX?"add":"remove"]("center-x"),t.classList[2===this.anchorY?"add":"remove"]("center-y"),t.classList[this.editing?"add":"remove"]("controller-editing")},e}(S),x=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),D=function(t){function e(e){var n=t.call(this,e)||this;n.type="mobystk:button",n.content=e.content||{type:"mobystk:text",value:""},n.key=e.key||"",n.customAction=e.customAction||!1,n.lockable=e.lockable||!1,n.diagonal=e.diagonal||!1,n.diagonal&&(n.targets=e.targets||[]),n.scalable=e.scalable||!1,n.border=e.border||[!0,!0,!0,!0],n.radius=e.radius||[[0,"px"],[0,"px"],[0,"px"],[0,"px"]],n.fontSize=e.fontSize||[20,"px"],n.active=!1,n.editing=!1;var o=document.createElement("button");return o.classList.add("controller-button"),o.dataset.id=n.id,o.instance=n,n.element=o,n}return x(e,t),e.prototype.press=function(t){var e=this;if(void 0===t&&(t=!1),this.diagonal)for(var n=0,o=y.elements.buttons.filter((function(t){return e.targets.includes(t.id)&&!t.lockable}));n<o.length;n++)o[n].press(!0);else this.active||this.customAction||this.emit("press",this.key),!this.scalable||this.active||t?!this.active&&t&&(this.element.classList.add("controller-button-active-diagonal"),this.element.classList.add("controller-button-scale-diagonal")):this.element.classList.add("controller-button-scale"),this.active=!0,this.element.classList.add("controller-button-active")},e.prototype.release=function(){var t=this;if(this.diagonal)for(var e=0,n=y.elements.buttons.filter((function(e){return t.targets.includes(e.id)}));e<n.length;e++)n[e].release(!0);else this.active&&!this.customAction&&this.emit("release",this.key),this.active=!1,this.element.classList.remove("controller-button-active"),this.element.classList.remove("controller-button-scale"),this.element.classList.remove("controller-button-active-diagonal"),this.element.classList.remove("controller-button-scale-diagonal")},e.prototype.render=function(){t.prototype.render.call(this);var e=this.element;this.border[0]||(e.style.borderTop="0"),this.border[1]||(e.style.borderRight="0"),this.border[2]||(e.style.borderBottom="0"),this.border[3]||(e.style.borderLeft="0");var n=this.radius.map((function(t){return t.join("")})).join(" ");if(e.style.borderRadius=n,e.style.fontSize=this.fontSize.join(""),e.classList[this.diagonal?"add":"remove"]("controller-button-diagonal"),e.classList[this.lockable?"add":"remove"]("controller-button-lockable"),e.innerHTML="","mobystk:text"===this.content.type)e.innerText=this.content.value;else if("mobystk:icon"===this.content.type){var o=document.createElement("i");o.classList.add("mdi","mdi-"+this.content.value),e.appendChild(o)}this._html&&(e.innerHTML=this._html),e.classList[this.customAction?"add":"remove"]("controller-custom-action"),e.dataset.action=this.customAction||null},e}(O);const T=D;var M=n(694),P=n.n(M),U=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const B=function(t){function e(e){var n=t.call(this,e)||this;n.type="mobystk:joystick",n.size=e.size||[90,"px"],n.padding=e.padding||60,n.keys=e.keys||["joyLUp","joyLLeft","joyLDown","joyLRight"],n.position={up:!1,down:!1,left:!1,right:!1};var o=document.createElement("div");return o.classList.add("controller-joystick"),o.dataset.id=n.id,o.instance=n,n.element=o,n}return U(e,t),e.prototype.render=function(){var e=this;this.width=[this.size[0]+this.padding,this.size[1]],this.height=[this.size[0]+this.padding,this.size[1]],t.prototype.render.call(this);var n=this.element;this.position={up:!1,down:!1,left:!1,right:!1},this.nipple&&this.nipple.destroy(),this.nipple=P().create({zone:n,size:this.size[0],mode:"static",position:{left:"50%",top:"50%"},lockX:c.disJoyYAxis,lockY:c.disJoyXAxis}),this.nipple.on("move",(function(t,n){return e.emit("move",e,t,n)})),this.nipple.on("end",(function(t,n){return e.emit("end",e,t,n)}))},e}(O);function I(t,e,n){var o,r;if(s(c.vibrateJoystick*(null==n?void 0:n.distance)/45),c.vgamepad&&["mobystk:joystick_left","mobystk:joystick_right"].includes(t.id)){var i=Math.round(65534/90*(45+(null==n?void 0:n.distance)*Math.cos(null===(o=null==n?void 0:n.angle)||void 0===o?void 0:o.radian))-32768),a=Math.round(65534/90*(45+(null==n?void 0:n.distance)*Math.sin(null===(r=null==n?void 0:n.angle)||void 0===r?void 0:r.radian))-32768);(isNaN(i)||isNaN(a))&&(i=a=0),"mobystk:joystick_left"===t.id&&A("".concat(i,"|").concat(a),!1,"VJL"),"mobystk:joystick_right"===t.id&&A("".concat(i,"|").concat(a),!1,"VJR")}if(!(null==n?void 0:n.direction))return l("up",!1),l("left",!1),l("down",!1),void l("right",!1);function l(e,n){var o,r,i=t.keys;switch(e){case"up":o=i[0],r="Top";break;case"left":o=i[1],r="Left";break;case"down":o=i[2],r="Bottom";break;case"right":o=i[3],r="Right"}if(t.element.querySelector(".back").style["border".concat(r,"Width")]=n?"7px":"",!c.vgamepad||!["mobystk:joystick_left","mobystk:joystick_right"].includes(t.id)){if(t.position[e]===n)return;A([o],!n)}t.position[e]=n}c.disJoyYAxis||l("up",(null==n?void 0:n.angle.degree)>22.5&&(null==n?void 0:n.angle.degree)<157.5),c.disJoyXAxis||l("left",(null==n?void 0:n.angle.degree)>112.5&&(null==n?void 0:n.angle.degree)<247.5),c.disJoyYAxis||l("down",(null==n?void 0:n.angle.degree)>202.5&&(null==n?void 0:n.angle.degree)<337.5),c.disJoyXAxis||l("right",(null==n?void 0:n.angle.degree)>292.5||(null==n?void 0:n.angle.degree)<67.5)}document.addEventListener("touchstart",(function(t){for(var e=0,n=Array.from(t.changedTouches);e<n.length;e++){for(var o=n[e],r=document.elementFromPoint(o.clientX,o.clientY);null!==r&&!(r.instance instanceof T&&!r.instance.customAction||r.instance instanceof B);)r=r.parentElement;if(null==r?void 0:r.instance.lockable)s(c.vibrate),r.instance.active?r.instance.release():r.instance.press();else{var i=(null==r?void 0:r.instance)instanceof B;y.currentTouches.push({target:r,touch:o,joystick:i}),r&&(s(c.vibrate),i||r.instance.press())}}})),document.addEventListener("touchmove",(function(t){for(var e,n,o=function(t){var o=y.currentTouches.findIndex((function(e){return e.touch.identifier===t.identifier}));if(o<0)return"continue";var r=y.currentTouches[o];if(r.joystick)return"continue";if(!c.changeKeyOnDrag&&r.target)return"continue";r.touch=t;for(var i=document.elementFromPoint(t.clientX,t.clientY);null!==i&&(!(i.instance instanceof T)||i.instance.customAction||i.instance.lockable);)i=i.parentElement;return r.target===i?"continue":(null===(e=r.target)||void 0===e||e.instance.release(),i&&!(null===(n=i.instance)||void 0===n?void 0:n.active)||(i=null),r.target=i,i?(i.instance.press(),void s(c.vibrate)):"continue")},r=0,i=Array.from(t.changedTouches);r<i.length;r++)o(i[r])})),document.addEventListener("touchend",(function(t){for(var e,n=function(t){var n=y.currentTouches.findIndex((function(e){return e.touch.identifier===t.identifier}));if(n<0)return"continue";(null===(e=y.currentTouches[n].target)||void 0===e?void 0:e.instance)instanceof T&&y.currentTouches[n].target.instance.release(),y.currentTouches.splice(n,1)},o=0,r=Array.from(t.changedTouches);o<r.length;o++)n(r[o])})),document.addEventListener("touchcancel",(function(t){for(var e,n=function(t){var n=y.currentTouches.findIndex((function(e){return e.touch.identifier===t.identifier}));if(n<0)return"continue";(null===(e=y.currentTouches[n].target)||void 0===e?void 0:e.instance)instanceof T&&y.currentTouches[n].target.instance.release(),y.currentTouches.splice(n,1)},o=0,r=Array.from(t.changedTouches);o<r.length;o++)n(r[o])}));var R=document.querySelector('meta[name="viewport"]');function G(){var t;t=window.outerHeight>window.outerWidth/1.7777777777777777?640:window.outerWidth/window.outerHeight*360,R.setAttribute("content","width=".concat(t,", user-scalable=0")),y.currentTouches=y.currentTouches.filter((function(t){return!t.joystick})),y.elements.joysticks.forEach((function(t){return t.render()}))}window.addEventListener("load",G),window.addEventListener("resize",G);var X,C,J=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),F=function(t){function e(e){var n=t.call(this,e)||this;n.type="mobystk:group",n.content=e.content||[];var o=document.createElement("div");o.classList.add("controller-group"),o.dataset.id=n.id,o.instance=n,n.element=o;for(var r=0,i=n.content;r<i.length;r++){var c=i[r];o.appendChild(c.element),c.render()}return n}return J(e,t),e}(O),H=document.documentElement,z=document.querySelector(".edit"),q=document.querySelector(".backgroundImage"),N=document.querySelector(".deviceInfo"),V=N.querySelector(".battery"),Y=V.querySelector(".battery-icon"),W=V.querySelector(".battery-level"),Z=N.querySelector(".clock"),K=N.querySelector(".player .player-number"),Q=N.querySelector(".layout");N.querySelector(".status"),c.hidden.includes("mobystk:deviceInfo")&&N.classList.add("hidden"),z.addEventListener("click",l.Z),z.addEventListener("contextmenu",(function(){layoutEditor.opened?layoutEditor.end():layoutEditor.start()})),c.layout||(location.href="index.html"),c.debug&&document.body.classList.add("debug"),c.invertL&&document.body.classList.add("invertL"),c.invertR&&document.body.classList.add("invertR"),c.bgImage&&(q.style.backgroundImage="url('".concat(c.bgImage,"')")),c.bgOpacity&&(q.style.opacity=String(c.bgOpacity)),c.bgBlur&&(q.style.filter="blur(".concat(c.bgBlur,"px)")),c.colorsBackground&&H.style.setProperty("--background",c.colorsBackground),c.colorsColor&&H.style.setProperty("--color",c.colorsColor),c.colorsBorder&&H.style.setProperty("--border",c.colorsBorder),c.colorsActive&&H.style.setProperty("--active",c.colorsActive);var $=document.createElement("style");if($.textContent=c.customCSS,document.body.append($),c.customJS&&c.customJS.trim()&&confirm("Deseja executar os plugins?"))try{new Function(c.customJS.trim())()}catch(t){alert("Ocorreu um erro ao executar os plugins\n\n"+(t.message||""))}function tt(t){var e;(e=Y.classList).remove.apply(e,Array.from(Y.classList)),Y.classList.add("mdi");var n=t.charging,o=100*t.level,r=10*Math.round(o/10);W.innerText=Math.round(o)+"% •",0===r?Y.classList.add("mdi-battery-outline"):100===r?Y.classList.add("mdi-battery"+(n?"-charging-100":"")):Y.classList.add("mdi-battery-"+(n?"charging-":"")+r)}function et(){var t=(new Date).getHours().toString().padStart(2,"0"),e=(new Date).getMinutes().toString().padStart(2,"0");Z.innerText=t+":"+e}null===(C=null===(X=navigator.getBattery)||void 0===X?void 0:X.call(navigator))||void 0===C||C.then((function(t){tt(t),t.addEventListener("chargingchange",(function(t){return tt(t.target)})),t.addEventListener("levelchange",(function(t){return tt(t.target)}))})).catch(console.error),window.setInterval(et,1e3),et(),K.innerText=String(c.player+1),c.debug&&N.addEventListener("click",(function(){c.player+=1,c.player>3&&(c.player=0),K.innerText=String(c.player+1)}));var nt=function(){return nt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},nt.apply(this,arguments)},ot=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},rt=document.querySelector(".controller-layout");function it(t,e){if(void 0===e&&(e=[]),"mobystk:layout"===t.type||"mobystk:group"===t.type){"mobystk:layout"!==t.type&&e.push(t);for(var n=0,o=t.content;n<o.length;n++)it(o[n],e)}else e.push(t);return e}function ct(t){var e,n;if(!(null===(e=c.hidden)||void 0===e?void 0:e.includes(t.import||t.id))&&(t.import&&(t=function(t){var e=ot(ot(ot([],y.buttons,!0),y.groups,!0),y.joysticks,!0).find((function(e){return e.id===t.import}));if(e)return nt(nt({},e),t)}(t)),t)){if("mobystk:button"===t.type)return(null===(n=c.locked)||void 0===n?void 0:n.includes(t.import||t.id))&&(t=nt(nt({},t),{lockable:!0})),new T(t);if("mobystk:group"===t.type){t.content=t.content.map(ct).filter((function(t){return t}));var o=new F(t);return t.content=t.content.map((function(t){return t.parent=o})),o}return"mobystk:joystick"===t.type?new B(t):void 0}}if(!c.layout)throw window.location.href="index.html",new Error("Layout não selecionado");var at=y.layouts.find((function(t){return t.id===c.layout}));if(!at)throw alert("Layout não encontrado!"),window.location.href="index.html",new Error("Layout não encontrado");!function(t){t.content=t.content.map(ct).filter((function(t){return t}));var e,n,o=it(t);rt.innerHTML="";for(var r=0,i=t.content;r<i.length;r++){var a=i[r];a&&(rt.appendChild(a.element),a.render())}y.currentLayout=t,y.elements.all=o,y.elements.buttons=o.filter((function(t){return t instanceof T})),y.elements.groups=o.filter((function(t){return t instanceof F})),y.elements.joysticks=o.filter((function(t){return t instanceof B})),Q.innerText=t.name||"???",function(){var t=y.elements.buttons.find((function(t){return"load-state"===t.customAction}));t&&t.element.addEventListener(c.dblClickLoadSave?"dblclick":"click",(function(){A("load"),A("load",!0),s(3*c.vibrate)}));var e=y.elements.buttons.find((function(t){return"save-state"===t.customAction}));e&&e.element.addEventListener(c.dblClickLoadSave?"dblclick":"click",(function(){A("save"),A("save",!0),s(3*c.vibrate)})),h=!1,m=!1,g=[];var n=y.elements.buttons.find((function(t){return"macro-record"===t.customAction}));n&&n.element.addEventListener("click",(function(){m||(n[n.active?"release":"press"](),h||(g=[]),h=!h)}));var o=y.elements.buttons.find((function(t){return"macro-play"===t.customAction}));o&&o.element.addEventListener("click",(function(){return t=this,e=void 0,r=function(){var t,e,n;return function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(r){switch(r.label){case 0:if(h)return[2];m=!m,o.press(),t=0,e=g,r.label=1;case 1:return t<e.length?(n=e[t],m?1!==_.readyState?[3,4]:(_.send(n),[4,new Promise((function(t){return setTimeout(t,50)}))]):[3,4]):[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return o.release(),m=!1,[2]}}))},new((n=void 0)||(n=Promise))((function(o,i){function c(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}s((r=r.apply(t,e||[])).next())}));var t,e,n,r})),document.querySelector(".deviceInfo").addEventListener("dblclick",(function(){document.documentElement.requestFullscreen()}))}(),e=y.elements.buttons.find((function(t){return"drive"===t.customAction})),n=e?e._html='\n\t\t<svg viewBox="0 0 32 32">\n\t\t\t<path d="M16 0a16 16 0 100 32 16 16 0 000-32zm0 4a12 12 0 0111.3 8H4.7c1.7-4.6 6-8 11.3-8zm0 14a2 2 0 110-4 2 2 0 010 4zM4 16c5.5 0 9.9 5.3 10 11.8A12 12 0 014 16zm14 11.8c.1-6.5 4.5-11.8 10-11.8a12 12 0 01-10 11.8z"></path>\n\t\t</svg>':"",null==e||e.render(),e&&e.element.addEventListener("touchstart",(function(t){var o=c.driveSensitivity,r=c.drivePrecision;if(e.active)return e.release(),e.element.innerHTML=n,window.ondevicemotion=null,void(c.vgamepad?A("0|0",!1,"VJL"):(A("joyLUp",!0),A("joyLLeft",!0),A("joyLRight",!0)));e.press(),e.element.innerHTML='<i class="driveArrow mdi mdi-arrow-up"></i>';var i=0,a=0,l=[];window.ondevicemotion=function(t){var n=window.outerWidth>window.outerHeight,u=t.accelerationIncludingGravity[n?"x":"y"]>=0?1:-1;if(i=parseFloat(t.accelerationIncludingGravity[n?"y":"x"].toFixed(1)),i*=u*(n?1:-1),c.vgamepad){var d=Math.round(32767/o*i);d<10923*r&&d>-10923*r&&(d=0),d>32767&&(d=32767),d<-32767&&(d=-32767),v=90*d/32767,e.element.children[0].style.transform="rotate(".concat(v,"deg)"),A("".concat(d,"|0"),!1,"VJL")}else{var f,v=0;if(-45===a?(i>o&&(v=45),i<-o+r&&(v=-45),i>2*o&&(v*=2),i<2*-o-r&&(v*=2)):45===a?(i>o-r&&(v=45),i<-o&&(v=-45),i>2*o+r&&(v*=2),i<2*-o&&(v*=2)):(i>o&&(v=45),i<-o&&(v=-45),i>2*o&&(v*=2),i<2*-o&&(v*=2)),v===a)return;switch(e.element.children[0].style.transform="rotate(".concat(v,"deg)"),v){case-90:f=["joyLLeft"];break;case-45:f=["joyLUp","joyLLeft"];break;case 45:f=["joyLUp","joyLRight"];break;case 90:f=["joyLRight"];break;default:f=["joyLUp"]}a=v,s(2*c.vibrate);var p=f.filter((function(t){return!l.includes(t)})),y=l.filter((function(t){return!f.includes(t)}));A(p),A(y,!0),l=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}([],f,!0)}}})),"https:"!==location.protocol&&"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname&&(e.element.style.display="none")}(at);for(var st=0,lt=y.elements.all;st<lt.length;st++){var ut=lt[st];ut instanceof T?(ut.on("press",(function(t){return A(t,!1)})),ut.on("release",(function(t){return A(t,!0)}))):ut instanceof B&&ut.on("move end",I)}document.addEventListener("contextmenu",(function(t){return t.preventDefault()})),window.addEventListener("load",(function(){document.body.classList.remove("preload")}))}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={exports:{}};return e[t].call(i.exports,i,i.exports,o),i.exports}o.m=e,t=[],o.O=(e,n,r,i)=>{if(!n){var c=1/0;for(u=0;u<t.length;u++){for(var[n,r,i]=t[u],a=!0,s=0;s<n.length;s++)(!1&i||c>=i)&&Object.keys(o.O).every((t=>o.O[t](n[s])))?n.splice(s--,1):(a=!1,i<c&&(c=i));if(a){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,r,i]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={698:0};o.O.j=e=>0===t[e];var e=(e,n)=>{var r,i,[c,a,s]=n,l=0;if(c.some((e=>0!==t[e]))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(s)var u=s(o)}for(e&&e(n);l<c.length;l++)i=c[l],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(u)},n=self.webpackChunkjoystick=self.webpackChunkjoystick||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var r=o.O(void 0,[894,343],(()=>o(803)));r=o.O(r)})();