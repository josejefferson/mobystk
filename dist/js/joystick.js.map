{"version":3,"file":"js/joystick.js","mappings":"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","sources":["webpack://joystick/webpack/runtime/chunk loaded","webpack://joystick/./src/js/shared/keymappings.ts","webpack://joystick/./src/js/utils/vibrate.ts","webpack://joystick/./src/js/shared/Controller.ts","webpack://joystick/./src/js/utils/getOpt.ts","webpack://joystick/./src/js/joystick/options.ts","webpack://joystick/./src/js/utils/toast.ts","webpack://joystick/./src/js/shared/socket.ts","webpack://joystick/./src/js/joystick/element-actions.ts","webpack://joystick/./src/js/joystick/elements.ts","webpack://joystick/./src/js/joystick/backend-integration.ts","webpack://joystick/./src/js/utils/EventEmitter.ts","webpack://joystick/./src/js/components/Element.ts","webpack://joystick/./src/js/components/Button.ts","webpack://joystick/./src/js/components/Joystick.ts","webpack://joystick/./src/js/joystick/interactions.ts","webpack://joystick/./src/js/joystick/joystick.ts","webpack://joystick/./src/js/components/Group.ts","webpack://joystick/./src/js/joystick/motion-control.ts","webpack://joystick/./src/js/joystick/layout.ts","webpack://joystick/./src/js/joystick/user-interface.ts","webpack://joystick/./src/js/joystick/layout-editor/guides.ts","webpack://joystick/./src/js/joystick/layout-editor/interactions.ts","webpack://joystick/./src/js/joystick/layout-editor/tree.ts","webpack://joystick/./src/js/joystick/layout-editor/toolbar.ts","webpack://joystick/./src/js/joystick/layout-editor/index.ts","webpack://joystick/./src/js/joystick/index.ts","webpack://joystick/webpack/bootstrap","webpack://joystick/webpack/runtime/compat get default export","webpack://joystick/webpack/runtime/define property getters","webpack://joystick/webpack/runtime/hasOwnProperty shorthand","webpack://joystick/webpack/runtime/jsonp chunk loading","webpack://joystick/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/**\r\n * Mapas de teclas\r\n * [Player1, Player2, Player3, Player4, VGamepad]\r\n */\r\nvar keymappings = {\r\n    joyLUp: ['W', 'T', '058', '195'],\r\n    joyLLeft: ['A', 'F', '063', '196'],\r\n    joyLDown: ['S', 'G', '096', '197'],\r\n    joyLRight: ['D', 'H', '097', '198'],\r\n    joyRUp: ['5', '9', '098', '199'],\r\n    joyRLeft: ['6', '0', '099', '200'],\r\n    joyRDown: ['7', '[', '100', '201'],\r\n    joyRRight: ['8', ']', '101', '202'],\r\n    padUp: ['UP', 'Z', '102', '203', 'XUSB_GAMEPAD_DPAD_UP'],\r\n    padLeft: ['LEFT', 'X', '103', '204', 'XUSB_GAMEPAD_DPAD_LEFT'],\r\n    padDown: ['DOWN', 'C', '104', '205', 'XUSB_GAMEPAD_DPAD_DOWN'],\r\n    padRight: ['RIGHT', 'V', '105', '206', 'XUSB_GAMEPAD_DPAD_RIGHT'],\r\n    actUp: ['I', 'B', '106', '207', 'XUSB_GAMEPAD_Y'],\r\n    actLeft: ['J', 'N', '107', '208', 'XUSB_GAMEPAD_X'],\r\n    actDown: ['K', 'M', '108', '209', 'XUSB_GAMEPAD_A'],\r\n    actRight: ['L', 'Ç', '109', '210', 'XUSB_GAMEPAD_B'],\r\n    left1: ['Q', 'Y', '110', '211', 'XUSB_GAMEPAD_LEFT_SHOULDER'],\r\n    left2: ['1', '3', '111', '212', 'XUSB_GAMEPAD_LEFT_TRIGGER'],\r\n    left3: [';', '´', '187', '213', 'XUSB_GAMEPAD_LEFT_THUMB'],\r\n    right1: ['E', 'U', '188', '214', 'XUSB_GAMEPAD_RIGHT_SHOULDER'],\r\n    right2: ['2', '4', '189', '215', 'XUSB_GAMEPAD_RIGHT_TRIGGER'],\r\n    right3: ['.', '~', '190', '216', 'XUSB_GAMEPAD_RIGHT_THUMB'],\r\n    select: ['ENTER', 'P', '193', '217', 'XUSB_GAMEPAD_BACK'],\r\n    start: ['SPACE', 'O', '231', '218', 'XUSB_GAMEPAD_START'],\r\n    pause: ['ESC', 'ESC', 'ESC', 'ESC', 'ESC'],\r\n    load: ['F1', 'F1', 'F1', 'F1', 'F1'],\r\n    save: ['[', '[', '[', '[', '['],\r\n    fast: ['TAB', 'TAB', 'TAB', 'TAB', 'TAB'],\r\n    volUp: [\r\n        'MEDIA_VOLUME_UP',\r\n        'MEDIA_VOLUME_UP',\r\n        'MEDIA_VOLUME_UP',\r\n        'MEDIA_VOLUME_UP',\r\n        'MEDIA_VOLUME_UP'\r\n    ],\r\n    volDown: [\r\n        'MEDIA_VOLUME_DOWN',\r\n        'MEDIA_VOLUME_DOWN',\r\n        'MEDIA_VOLUME_DOWN',\r\n        'MEDIA_VOLUME_DOWN',\r\n        'MEDIA_VOLUME_DOWN'\r\n    ]\r\n};\r\nexport default keymappings;\r\n","var lastVibration = Date.now();\r\n/**\r\n * Faz o dispositivo vibrar\r\n */\r\nexport default function vibrate(pattern, force) {\r\n    if (force === void 0) { force = false; }\r\n    var time;\r\n    if (Array.isArray(pattern))\r\n        time = pattern.reduce(function (a, c) { return (a += Number(c)); }, 0);\r\n    else\r\n        time = Number(pattern);\r\n    if (force) {\r\n        lastVibration = Date.now() + time;\r\n        return navigator.vibrate(pattern);\r\n    }\r\n    if (Date.now() + time > lastVibration) {\r\n        return navigator.vibrate(pattern);\r\n    }\r\n    return false;\r\n}\r\n","import buttons from '../elements/buttons';\r\nimport groups from '../elements/groups';\r\nimport joysticks from '../elements/joysticks';\r\nimport layouts from '../elements/layouts';\r\nvar Controller = {\r\n    buttons: buttons,\r\n    groups: groups,\r\n    joysticks: joysticks,\r\n    layouts: layouts,\r\n    currentLayout: null,\r\n    currentTouches: [],\r\n    elements: {\r\n        all: [],\r\n        buttons: [],\r\n        groups: [],\r\n        joysticks: []\r\n    }\r\n};\r\nwindow.Controller = Controller;\r\nexport default Controller;\r\n","import store from 'store2';\r\nexport var ls = store.namespace('joystick');\r\n/**\r\n * Retorna uma opção do localStorage ou seu valor padrão\r\n */\r\nexport default function getOpt(name, defaultValue) {\r\n    var value = ls(name);\r\n    return value === null ? defaultValue : value;\r\n}\r\nwindow.ls = ls;\r\nwindow.getOpt = getOpt;\r\n","import getOpt from '../utils/getOpt';\r\nvar options = {\r\n    ip: getOpt('code', 'localhost:5000'),\r\n    layout: getOpt('layout'),\r\n    player: getOpt('player', 1) - 1,\r\n    password: getOpt('password'),\r\n    debug: getOpt('debug', false),\r\n    locked: getOpt('locked', []),\r\n    hidden: getOpt('hidden', []),\r\n    invertL: getOpt('invertL', false),\r\n    invertR: getOpt('invertR', false),\r\n    disJoyXAxis: getOpt('disJoyXAxis', false),\r\n    disJoyYAxis: getOpt('disJoyYAxis', false),\r\n    dblClickLoadSave: getOpt('dblClickLoadSave', false),\r\n    changeKeyOnDrag: getOpt('changeKeyOnDrag', true),\r\n    vibrate: getOpt('vibrate', 15),\r\n    vibrateJoystick: getOpt('vibrateJoystick', 5),\r\n    vibrationFromGame: getOpt('vibrationFromGame', true),\r\n    vgamepad: getOpt('vgamepad', false),\r\n    bgImage: getOpt('bgImage', ''),\r\n    bgOpacity: getOpt('bgOpacity', 0.5),\r\n    bgBlur: getOpt('bgBlur', 0),\r\n    colorsBackground: getOpt('background', 'rgba(0, 0, 0, 1)'),\r\n    colorsColor: getOpt('color', 'rgba(255, 255, 255, 0.53)'),\r\n    colorsBorder: getOpt('border', 'rgba(255, 255, 255, 0.53)'),\r\n    colorsActive: getOpt('active', 'rgba(255, 255, 255, 0.2)'),\r\n    customCSS: getOpt('customCSS', ''),\r\n    customJS: getOpt('customJS', ''),\r\n    driveSensitivity: getOpt('driveSensitivity', 2),\r\n    drivePrecision: getOpt('drivePrecision', 1)\r\n};\r\nwindow.options = options;\r\nexport default options;\r\n","var Toast = /** @class */ (function () {\r\n    /**\r\n     * Cria um gerenciador de toasts\r\n     * @param {Element} element - Elemento onde ficará o toast\r\n     */\r\n    function Toast(element) {\r\n        this.element = element;\r\n        this.content = element.querySelector('.toast-content');\r\n        this.toasts = [];\r\n        this.showing = false;\r\n    }\r\n    /**\r\n     * Prepara um novo toast para ser exibido na tela\r\n     * @param {string} message - Mensagem que será exibida no toast\r\n     * @param {number} [time=2000] - Tempo que o toast estará visível\r\n     * @returns {Toast} Instância do objeto Toast\r\n     */\r\n    Toast.prototype.show = function (message, time, html) {\r\n        if (time === void 0) { time = 2000; }\r\n        if (html === void 0) { html = false; }\r\n        this.toasts.push({ message: message, time: time, html: html });\r\n        if (!this.showing) {\r\n            this.start();\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * Prepara o próximo toast da lista para ser exibido na tela\r\n     */\r\n    Toast.prototype.start = function () {\r\n        this.element.classList.remove('show');\r\n        if (!this.toasts.length) {\r\n            return (this.showing = false);\r\n        }\r\n        if (!this.showing) {\r\n            this.run();\r\n        }\r\n        else {\r\n            setTimeout(this.run.bind(this), 1000);\r\n        }\r\n        this.showing = true;\r\n    };\r\n    /**\r\n     * Exibe o toast na tela\r\n     */\r\n    Toast.prototype.run = function () {\r\n        this.element.classList.add('show');\r\n        var toast = this.toasts.shift();\r\n        this.content[toast.html ? 'innerHTML' : 'innerText'] = toast.message;\r\n        setTimeout(this.start.bind(this), toast.time || 2000);\r\n    };\r\n    return Toast;\r\n}());\r\nexport default Toast;\r\nvar $toast = document.createElement('div');\r\n$toast.classList.add('toast');\r\n$toast.innerHTML = '<div class=\"toast-content\"></div>';\r\ndocument.body.appendChild($toast);\r\nvar $toastCSS = document.createElement('style');\r\n$toastCSS.innerHTML = \"\\n@import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed&display=swap');\\n\\n.toast {\\n\\t-webkit-box-align: center;\\n\\t-ms-flex-align: center;\\n\\talign-items: center;\\n\\tbackground-color: rgba(85, 85, 85, 0.9);\\n\\tborder-radius: 22px;\\n\\tbottom: 48px; \\n\\t-webkit-box-sizing: border-box;\\n\\tbox-sizing: border-box;\\n\\tcolor: #FFFFFF;\\n\\tdisplay: -webkit-inline-box;\\n\\tdisplay: -ms-inline-flexbox;\\n\\tdisplay: inline-flex;\\n\\tfont-family: 'Roboto Condensed', Roboto, Arial, sans-serif;\\n\\tfont-size: 15.8px;\\n\\tleft: 50%;\\n\\tline-height: 17.6px;\\n\\tmargin: 16px;\\n\\tmax-width: 320px;\\n\\tmin-height: 44px;\\n\\topacity: 0;\\n\\tpadding: 13.8px 25px;\\n\\tpointer-events: none;\\n\\tposition: fixed;\\n\\ttext-align: left;\\n\\ttext-shadow: black 0 0 2px;\\n\\t-webkit-transform: translateX(calc(-50% - 16px));\\n\\t-ms-transform: translateX(calc(-50% - 16px));\\n\\ttransform: translateX(calc(-50% - 16px));\\n\\t-webkit-transition: opacity 500ms cubic-bezier(0.5, 1, 0.89, 1);\\n\\t-o-transition: opacity 500ms cubic-bezier(0.5, 1, 0.89, 1);\\n\\ttransition: opacity 500ms cubic-bezier(0.5, 1, 0.89, 1);\\n\\twidth: -webkit-fit-content;\\n\\twidth: -moz-fit-content;\\n\\twidth: fit-content;\\n\\tz-index: 99999999999;\\n}\\n\\n.toast.show {\\n\\topacity: 1;\\n\\t-webkit-transition: opacity 500ms cubic-bezier(0.11, 0, 0.5, 0);\\n\\t-o-transition: opacity 500ms cubic-bezier(0.11, 0, 0.5, 0);\\n\\ttransition: opacity 500ms cubic-bezier(0.11, 0, 0.5, 0);\\n}\\n\\n/*.toast .toast-content {\\n\\tletter-spacing: -0.03px;\\n\\tline-height: 17.6px;\\n\\t-webkit-transform: scaleY(1.11);\\n\\t-ms-transform: scaleY(1.11);\\n\\ttransform: scaleY(1.11);\\n}*/\\n\";\r\ndocument.body.appendChild($toastCSS);\r\nexport var toastObj = new Toast($toast);\r\nexport var toast = function (message, time, html) {\r\n    if (time === void 0) { time = 2000; }\r\n    if (html === void 0) { html = false; }\r\n    return toastObj.show(message, time, html);\r\n};\r\nwindow.toast = toast;\r\n","import options from '../joystick/options';\r\nimport loading from '../utils/loading';\r\nimport { toast } from '../utils/toast';\r\n// Evita aparecer a tela de senha novamente\r\nvar triedToAuthenticate = false;\r\n// Comandos vindos do servidor\r\nexport var commands = {\r\n    /** Exibe informações na tela */\r\n    INFO: function (data) {\r\n        toast(data);\r\n    },\r\n    /** Falha ao autenticar */\r\n    AUTH_FAILED: function () {\r\n        if (triedToAuthenticate)\r\n            return;\r\n        document.body.classList.remove('connecting', 'connected');\r\n        document.body.classList.add('disconnected');\r\n        var password = prompt('O computador requer uma senha para se conectar ao MobyStk');\r\n        if (password === null)\r\n            return;\r\n        localStorage.setItem('joystick.password', password);\r\n        triedToAuthenticate = true;\r\n        loading();\r\n        window.location.reload();\r\n    }\r\n};\r\n/** Conexão do socket */\r\nexport var socket = socketConnect();\r\n/** Tenta conectar ao socket */\r\nexport function socketConnect() {\r\n    var ws;\r\n    try {\r\n        ws = new WebSocket('ws://' + options.ip);\r\n    }\r\n    catch (err) {\r\n        console.error(err);\r\n        closed();\r\n        return;\r\n    }\r\n    ws.addEventListener('open', opened);\r\n    ws.addEventListener('close', closed);\r\n    ws.addEventListener('message', message);\r\n    document.body.classList.remove('connected', 'disconnected');\r\n    document.body.classList.add('connecting');\r\n    /** Socket conectado */\r\n    function opened() {\r\n        document.body.classList.remove('connecting', 'disconnected');\r\n        document.body.classList.add('connected');\r\n        ws.send('PASSWORD ' + (options.password || ''));\r\n    }\r\n    /** Socket desconectado */\r\n    function closed() {\r\n        document.body.classList.remove('connecting', 'connected');\r\n        document.body.classList.add('disconnected');\r\n        setTimeout(function () { return (socket = socketConnect()); }, 3000);\r\n    }\r\n    /** Mensagem do socket */\r\n    function message(e) {\r\n        var _a = e.data.split(' '), cmd = _a[0], data = _a.slice(1);\r\n        var command = commands[cmd];\r\n        if (typeof command !== 'function')\r\n            return;\r\n        command(data.join(' '));\r\n    }\r\n    return ws;\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport Controller from '../shared/Controller';\r\nimport vibrate from '../utils/vibrate';\r\nimport { sendCmd } from './backend-integration';\r\nimport { socket } from '../shared/socket';\r\nimport options from './options';\r\nexport var recordingMacro = false;\r\nexport var playingMacro = false;\r\nexport var lastMacro = [];\r\n/** Carrega o estado do jogo */\r\nfunction loadState() {\r\n    var _a;\r\n    if ((_a = window.layoutEditor) === null || _a === void 0 ? void 0 : _a.opened)\r\n        return;\r\n    sendCmd('load');\r\n    sendCmd('load', true);\r\n    vibrate(options.vibrate * 3);\r\n}\r\n/** Salva o estado do jogo */\r\nfunction saveState() {\r\n    var _a;\r\n    if ((_a = window.layoutEditor) === null || _a === void 0 ? void 0 : _a.opened)\r\n        return;\r\n    sendCmd('save');\r\n    sendCmd('save', true);\r\n    vibrate(options.vibrate * 3);\r\n}\r\n/** Inicia/para a gravação de uma macro */\r\nfunction recordMacro() {\r\n    var _a;\r\n    if ((_a = window.layoutEditor) === null || _a === void 0 ? void 0 : _a.opened)\r\n        return;\r\n    if (playingMacro)\r\n        return;\r\n    if (this.instance)\r\n        this.instance[this.instance.active ? 'release' : 'press']();\r\n    if (!recordingMacro)\r\n        lastMacro = [];\r\n    recordingMacro = !recordingMacro;\r\n}\r\n/** Executa a macro gravada */\r\nfunction playMacro() {\r\n    var _a;\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var _i, lastMacro_1, command;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    if ((_a = window.layoutEditor) === null || _a === void 0 ? void 0 : _a.opened)\r\n                        return [2 /*return*/];\r\n                    if (recordingMacro)\r\n                        return [2 /*return*/];\r\n                    playingMacro = !playingMacro;\r\n                    if (this.instance)\r\n                        this.instance.press();\r\n                    _i = 0, lastMacro_1 = lastMacro;\r\n                    _b.label = 1;\r\n                case 1:\r\n                    if (!(_i < lastMacro_1.length)) return [3 /*break*/, 4];\r\n                    command = lastMacro_1[_i];\r\n                    if (!playingMacro)\r\n                        return [3 /*break*/, 4];\r\n                    // TODO: toast desconectado\r\n                    if (socket.readyState !== 1)\r\n                        return [3 /*break*/, 4];\r\n                    socket.send(command);\r\n                    return [4 /*yield*/, new Promise(function (r) { return setTimeout(r, 50); })];\r\n                case 2:\r\n                    _b.sent();\r\n                    _b.label = 3;\r\n                case 3:\r\n                    _i++;\r\n                    return [3 /*break*/, 1];\r\n                case 4:\r\n                    if (this.instance)\r\n                        this.instance.release();\r\n                    playingMacro = false;\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\n/** Entra em tela cheia */\r\nfunction fullScreen() {\r\n    document.documentElement.requestFullscreen();\r\n}\r\nexport default function loadElementActions() {\r\n    // CARREGAR E SALVAR\r\n    var loadStateBtn = Controller.elements.buttons.find(function (e) { return e.customAction === 'load-state'; });\r\n    if (loadStateBtn)\r\n        loadStateBtn.element.addEventListener(options.dblClickLoadSave ? 'dblclick' : 'click', loadState);\r\n    var saveStateBtn = Controller.elements.buttons.find(function (e) { return e.customAction === 'save-state'; });\r\n    if (saveStateBtn)\r\n        saveStateBtn.element.addEventListener(options.dblClickLoadSave ? 'dblclick' : 'click', saveState);\r\n    // MACROS\r\n    recordingMacro = false;\r\n    playingMacro = false;\r\n    lastMacro = [];\r\n    // Iniciar/parar gravação da macro\r\n    var recordMacroBtn = Controller.elements.buttons.find(function (e) { return e.customAction === 'macro-record'; });\r\n    if (recordMacroBtn)\r\n        recordMacroBtn.element.addEventListener('click', recordMacro);\r\n    // Executar macro\r\n    var playMacroBtn = Controller.elements.buttons.find(function (e) { return e.customAction === 'macro-play'; });\r\n    if (playMacroBtn)\r\n        playMacroBtn.element.addEventListener('click', playMacro);\r\n    // TELA CHEIA\r\n    document.querySelector('.deviceInfo').addEventListener('dblclick', fullScreen);\r\n}\r\nwindow.playingMacro = playingMacro;\r\nwindow.recordingMacro = recordingMacro;\r\nwindow.lastMacro = lastMacro;\r\nwindow.loadState = loadState;\r\nwindow.saveState = saveState;\r\nwindow.recordMacro = recordMacro;\r\nwindow.playMacro = playMacro;\r\nwindow.fullScreen = fullScreen;\r\n","export var $root = document.documentElement;\r\nexport var $edit = document.querySelector('.edit');\r\nexport var $bgImage = document.querySelector('.backgroundImage');\r\nexport var $deviceInfo = document.querySelector('.deviceInfo');\r\nexport var $DIBattery = $deviceInfo.querySelector('.battery');\r\nexport var $DIBatteryIcon = $DIBattery.querySelector('.battery-icon');\r\nexport var $DIBatteryLevel = $DIBattery.querySelector('.battery-level');\r\nexport var $DIClock = $deviceInfo.querySelector('.clock');\r\nexport var $DIPlayerNumber = $deviceInfo.querySelector('.player .player-number');\r\nexport var $DILayout = $deviceInfo.querySelector('.layout');\r\nexport var $DIStatus = $deviceInfo.querySelector('.status');\r\nexport var $controllerIndicator = document.querySelector('.controller-indicator');\r\nexport var $layout = document.querySelector('.controller-layout');\r\nexport var $viewport = document.querySelector('meta[name=\"viewport\"]');\r\n","import keymappings from '../shared/keymappings';\r\nimport vibrate from '../utils/vibrate';\r\nimport { lastMacro, recordingMacro } from './element-actions';\r\nimport { $controllerIndicator } from './elements';\r\nimport options from './options';\r\nimport { commands, socket } from '../shared/socket';\r\nvar controllerIndicatorClass = options.vgamepad ? 'mdi-google-controller' : 'mdi-keyboard';\r\n$controllerIndicator.classList.add(controllerIndicatorClass);\r\n// // Evita aparecer a tela de senha novamente\r\n// let triedToAuthenticate = false\r\ncommands.V = function (data) {\r\n    var value = data.toLowerCase().split(' ')[0];\r\n    if (options.vibrationFromGame) {\r\n        var n = parseInt(value.split('|')[0]);\r\n        vibrate(n ? 3000 : 0, true);\r\n        $controllerIndicator.classList[n ? 'remove' : 'add'](controllerIndicatorClass);\r\n        $controllerIndicator.classList[n ? 'add' : 'remove']('mdi-vibrate');\r\n    }\r\n};\r\n// // Comandos vindos do servidor\r\n// const commands = {\r\n// \t/** Vibrar */\r\n// \tV: (data: string) => {\r\n// \t\tconst [value] = data.toLowerCase().split(' ')\r\n// \t\tif (options.vibrationFromGame) {\r\n// \t\t\tconst n = parseInt(value.split('|')[0])\r\n// \t\t\tvibrate(n ? 3000 : 0, true)\r\n// \t\t\t$controllerIndicator.classList[n ? 'remove' : 'add'](controllerIndicatorClass)\r\n// \t\t\t$controllerIndicator.classList[n ? 'add' : 'remove']('mdi-vibrate')\r\n// \t\t}\r\n// \t},\r\n// \t/** Exibe informações na tela */\r\n// \tINFO: (data: string) => {\r\n// \t\ttoast(data)\r\n// \t},\r\n// \t/** Falha ao autenticar */\r\n// \tAUTH_FAILED: () => {\r\n// \t\tif (triedToAuthenticate) return\r\n// \t\tdocument.body.classList.remove('connecting', 'connected')\r\n// \t\tdocument.body.classList.add('disconnected')\r\n// \t\tconst password = prompt('O computador requer uma senha para se conectar ao MobyStk')\r\n// \t\tif (password === null) return\r\n// \t\tlocalStorage.setItem('joystick.password', password)\r\n// \t\ttriedToAuthenticate = true\r\n// \t\tloading()\r\n// \t\twindow.location.reload()\r\n// \t}\r\n// }\r\n// /** Conexão do socket */\r\n// export let socket = socketConnect()\r\n// /**\r\n//  * Tenta conectar ao socket\r\n//  */\r\n// export function socketConnect() {\r\n// \tlet ws: WebSocket\r\n// \ttry {\r\n// \t\tws = new WebSocket('ws://' + options.ip)\r\n// \t} catch (err) {\r\n// \t\tconsole.error(err)\r\n// \t\tclosed()\r\n// \t\treturn\r\n// \t}\r\n// \tws.addEventListener('open', opened)\r\n// \tws.addEventListener('close', closed)\r\n// \tws.addEventListener('message', message)\r\n// \tdocument.body.classList.remove('connected', 'disconnected')\r\n// \tdocument.body.classList.add('connecting')\r\n// \t/** Socket conectado */\r\n// \tfunction opened() {\r\n// \t\tdocument.body.classList.remove('connecting', 'disconnected')\r\n// \t\tdocument.body.classList.add('connected')\r\n// \t\tws.send('PASSWORD ' + (options.password || ''))\r\n// \t}\r\n// \t/** Socket desconectado */\r\n// \tfunction closed() {\r\n// \t\tdocument.body.classList.remove('connecting', 'connected')\r\n// \t\tdocument.body.classList.add('disconnected')\r\n// \t\tsetTimeout(() => (socket = socketConnect()), 3000)\r\n// \t}\r\n// \t/** Mensagem do socket */\r\n// \tfunction message(e: MessageEvent<any>) {\r\n// \t\tconst [cmd, ...data]: [Commands, string[]] = e.data.split(' ')\r\n// \t\tconst command = commands[cmd]\r\n// \t\tif (typeof command !== 'function') return\r\n// \t\tcommand(data.join(' '))\r\n// \t}\r\n// \treturn ws\r\n// }\r\n/**\r\n * Envia comandos para o servidor\r\n * @param keys Tecla(s) que será(ão) pressionada(s) de acordo com o KeyMapping\r\n * @param release Boolean indicando se a tecla está sendo solta\r\n * @param custom Comando personalizado para enviar ao servidor\r\n */\r\nexport function sendCmd(keys, release, custom) {\r\n    if (release === void 0) { release = false; }\r\n    if (!keys || !keys.length)\r\n        return;\r\n    if (typeof keys === 'string')\r\n        keys = [keys];\r\n    // Mapeia as teclas\r\n    if (!custom)\r\n        keys = keys.map(function (key) {\r\n            var _a, _b;\r\n            if (options.vgamepad)\r\n                return (_a = keymappings[key]) === null || _a === void 0 ? void 0 : _a[4];\r\n            else\r\n                return (_b = keymappings[key]) === null || _b === void 0 ? void 0 : _b[options.player];\r\n        });\r\n    // Salva no macro ao invés de enviar para o servidor\r\n    if (recordingMacro && custom)\r\n        return lastMacro.push(\"\".concat(custom, \" \").concat(keys, \" \").concat(options.player));\r\n    if (recordingMacro)\r\n        return lastMacro.push(\"\".concat(release ? 'R' : 'P', \" \").concat(keys, \" \").concat(options.player));\r\n    // Se não tiver conectado, não faz nada\r\n    if (!socket || socket.readyState !== 1)\r\n        return;\r\n    // Envia o comando para o servidor\r\n    if (custom)\r\n        socket.send(\"\".concat(custom, \" \").concat(keys, \" \").concat(options.player));\r\n    else\r\n        socket.send(\"\".concat(release ? 'R' : 'P', \" \").concat(keys, \" \").concat(options.player));\r\n}\r\nwindow.sendCmd = sendCmd;\r\n","var EventEmitter = /** @class */ (function () {\r\n    function EventEmitter() {\r\n        this.events = {};\r\n    }\r\n    EventEmitter.prototype.on = function (events, listener) {\r\n        var _this = this;\r\n        for (var _i = 0, _a = events.split(' '); _i < _a.length; _i++) {\r\n            var event_1 = _a[_i];\r\n            if (typeof this.events[event_1] !== 'object') {\r\n                this.events[event_1] = [];\r\n            }\r\n            this.events[event_1].push(listener);\r\n        }\r\n        return function () {\r\n            for (var _i = 0, _a = events.split(' '); _i < _a.length; _i++) {\r\n                var event_2 = _a[_i];\r\n                _this.off(event_2, listener);\r\n            }\r\n        };\r\n    };\r\n    EventEmitter.prototype.off = function (events, listener) {\r\n        for (var _i = 0, _a = events.split(' '); _i < _a.length; _i++) {\r\n            var event_3 = _a[_i];\r\n            if (typeof this.events[event_3] === 'object') {\r\n                var idx = this.events[event_3].indexOf(listener);\r\n                if (idx > -1) {\r\n                    this.events[event_3].splice(idx, 1);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    EventEmitter.prototype.emit = function (events) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        for (var _a = 0, _b = events.split(' '); _a < _b.length; _a++) {\r\n            var event_4 = _b[_a];\r\n            if (typeof this.events[event_4] === 'object') {\r\n                this.events[event_4].forEach(function (listener) { return listener.apply(_this, args); });\r\n            }\r\n        }\r\n    };\r\n    EventEmitter.prototype.once = function (events, listener) {\r\n        var _this = this;\r\n        var _loop_1 = function (event_5) {\r\n            var remove = this_1.on(event_5, function () {\r\n                var args = [];\r\n                for (var _i = 0; _i < arguments.length; _i++) {\r\n                    args[_i] = arguments[_i];\r\n                }\r\n                remove();\r\n                listener.apply(_this, args);\r\n            });\r\n        };\r\n        var this_1 = this;\r\n        for (var _i = 0, _a = events.split(' '); _i < _a.length; _i++) {\r\n            var event_5 = _a[_i];\r\n            _loop_1(event_5);\r\n        }\r\n    };\r\n    return EventEmitter;\r\n}());\r\nexport default EventEmitter;\r\n","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport EventEmitter from '../utils/EventEmitter';\r\nvar ElementComponent = /** @class */ (function (_super) {\r\n    __extends(ElementComponent, _super);\r\n    function ElementComponent(details) {\r\n        var _this = _super.call(this) || this;\r\n        _this.type = 'mobystk:unknown';\r\n        _this.id = details.id || 'mobystk:unknown';\r\n        _this.name = details.name || '(Sem nome)';\r\n        _this.x = details.x || [0, 'px'];\r\n        _this.y = details.y || [0, 'px'];\r\n        _this.anchorX = details.anchorX || 0;\r\n        _this.anchorY = details.anchorY || 0;\r\n        _this.width = details.width || [100, 'px'];\r\n        _this.height = details.height || [100, 'px'];\r\n        return _this;\r\n    }\r\n    ElementComponent.prototype.render = function () {\r\n        var el = this.element;\r\n        // Reseta os estilos\r\n        el.style.left = null;\r\n        el.style.right = null;\r\n        el.style.top = null;\r\n        el.style.bottom = null;\r\n        el.style.transform = null;\r\n        // Aplica os estilos\r\n        el.style.width = this.width.join('');\r\n        el.style.height = this.height.join('');\r\n        if (this.anchorX === 0)\r\n            el.style.left = this.x.join('');\r\n        if (this.anchorX === 1)\r\n            el.style.right = this.x.join('');\r\n        if (this.anchorY === 0)\r\n            el.style.top = this.y.join('');\r\n        if (this.anchorY === 1)\r\n            el.style.bottom = this.y.join('');\r\n        el.classList[this.anchorX === 2 ? 'add' : 'remove']('center-x');\r\n        el.classList[this.anchorY === 2 ? 'add' : 'remove']('center-y');\r\n        // Editando elemento\r\n        el.classList[this.editing ? 'add' : 'remove']('controller-editing');\r\n    };\r\n    ElementComponent.prototype.toObject = function () {\r\n        return {\r\n            type: this.type,\r\n            id: this.id,\r\n            name: this.name,\r\n            x: this.x,\r\n            y: this.y,\r\n            anchorX: this.anchorX,\r\n            anchorY: this.anchorY,\r\n            width: this.width,\r\n            height: this.height\r\n        };\r\n    };\r\n    return ElementComponent;\r\n}(EventEmitter));\r\nexport default ElementComponent;\r\n","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport Controller from '../shared/Controller';\r\nimport ElementComponent from './Element';\r\nvar ButtonComponent = /** @class */ (function (_super) {\r\n    __extends(ButtonComponent, _super);\r\n    function ButtonComponent(details) {\r\n        var _this = _super.call(this, details) || this;\r\n        _this.type = 'mobystk:button';\r\n        _this.content = details.content || { type: 'mobystk:text', value: '' };\r\n        _this.key = details.key || '';\r\n        _this.customAction = details.customAction || false;\r\n        _this.lockable = details.lockable || false;\r\n        _this.diagonal = details.diagonal || false;\r\n        if (_this.diagonal)\r\n            _this.targets = details.targets || [];\r\n        _this.scalable = details.scalable || false;\r\n        _this.border = details.border || [true, true, true, true];\r\n        _this.radius = details.radius || [\r\n            [0, 'px'],\r\n            [0, 'px'],\r\n            [0, 'px'],\r\n            [0, 'px']\r\n        ];\r\n        _this.fontSize = details.fontSize || [20, 'px'];\r\n        _this.active = false;\r\n        _this.editing = false;\r\n        var $button = (document.createElement('button'));\r\n        $button.classList.add('controller-button');\r\n        $button.dataset.id = _this.id;\r\n        $button.instance = _this;\r\n        _this.element = $button;\r\n        return _this;\r\n    }\r\n    ButtonComponent.prototype.press = function (diagonal) {\r\n        var _this = this;\r\n        if (diagonal === void 0) { diagonal = false; }\r\n        if (this.diagonal) {\r\n            var targets = Controller.elements.buttons.filter(function (e) { return _this.targets.includes(e.id) && !e.lockable; });\r\n            for (var _i = 0, targets_1 = targets; _i < targets_1.length; _i++) {\r\n                var target = targets_1[_i];\r\n                target.press(true);\r\n            }\r\n        }\r\n        else {\r\n            if (!this.active && !this.customAction)\r\n                this.emit('press', this.key);\r\n            if (this.scalable && !this.active && !diagonal) {\r\n                this.element.classList.add('controller-button-scale');\r\n            }\r\n            else if (!this.active && diagonal) {\r\n                this.element.classList.add('controller-button-active-diagonal');\r\n                this.element.classList.add('controller-button-scale-diagonal');\r\n            }\r\n            this.active = true;\r\n            this.element.classList.add('controller-button-active');\r\n        }\r\n    };\r\n    ButtonComponent.prototype.release = function () {\r\n        var _this = this;\r\n        if (this.diagonal) {\r\n            var targets = Controller.elements.buttons.filter(function (e) { return _this.targets.includes(e.id); });\r\n            for (var _i = 0, targets_2 = targets; _i < targets_2.length; _i++) {\r\n                var target = targets_2[_i];\r\n                target.release();\r\n            }\r\n        }\r\n        else {\r\n            if (this.active && !this.customAction)\r\n                this.emit('release', this.key);\r\n            this.active = false;\r\n            this.element.classList.remove('controller-button-active');\r\n            this.element.classList.remove('controller-button-scale');\r\n            this.element.classList.remove('controller-button-active-diagonal');\r\n            this.element.classList.remove('controller-button-scale-diagonal');\r\n        }\r\n    };\r\n    ButtonComponent.prototype.render = function () {\r\n        _super.prototype.render.call(this);\r\n        var el = this.element;\r\n        // Aplica os estilos\r\n        if (!this.border[0])\r\n            el.style.borderTop = '0';\r\n        if (!this.border[1])\r\n            el.style.borderRight = '0';\r\n        if (!this.border[2])\r\n            el.style.borderBottom = '0';\r\n        if (!this.border[3])\r\n            el.style.borderLeft = '0';\r\n        var radius = this.radius.map(function (e) { return e.join(''); }).join(' ');\r\n        el.style.borderRadius = radius;\r\n        el.style.fontSize = this.fontSize.join('');\r\n        // Botões de diagonal e bloqueáveis e editando\r\n        el.classList[this.diagonal ? 'add' : 'remove']('controller-button-diagonal');\r\n        el.classList[this.lockable ? 'add' : 'remove']('controller-button-lockable');\r\n        // Conteúdo do botão\r\n        el.innerHTML = '';\r\n        if (this.content.type === 'mobystk:text') {\r\n            el.innerText = this.content.value;\r\n        }\r\n        else if (this.content.type === 'mobystk:icon') {\r\n            var $icon = document.createElement('i');\r\n            $icon.classList.add('mdi', 'mdi-' + this.content.value);\r\n            el.appendChild($icon);\r\n        }\r\n        if (this._html) {\r\n            el.innerHTML = this._html;\r\n        }\r\n        // Botão com ação personalizada\r\n        el.classList[this.customAction ? 'add' : 'remove']('controller-custom-action');\r\n        el.dataset.action = this.customAction || null;\r\n    };\r\n    ButtonComponent.prototype.toObject = function () {\r\n        return __assign(__assign({}, _super.prototype.toObject.call(this)), { type: this.type, key: this.key, border: this.border, fontSize: this.fontSize, content: this.content, radius: this.radius, lockable: this.lockable, scalable: this.scalable, customAction: this.customAction, diagonal: this.diagonal, targets: this.targets });\r\n    };\r\n    return ButtonComponent;\r\n}(ElementComponent));\r\nexport default ButtonComponent;\r\n","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport nipplejs from 'nipplejs';\r\nimport options from '../joystick/options';\r\nimport ElementComponent from './Element';\r\nvar JoystickComponent = /** @class */ (function (_super) {\r\n    __extends(JoystickComponent, _super);\r\n    function JoystickComponent(details) {\r\n        var _this = _super.call(this, details) || this;\r\n        _this.type = 'mobystk:joystick';\r\n        _this.size = details.size || [90, 'px'];\r\n        _this.padding = details.padding || 60;\r\n        _this.keys = details.keys || ['joyLUp', 'joyLLeft', 'joyLDown', 'joyLRight'];\r\n        _this.position = { up: false, down: false, left: false, right: false };\r\n        var $joystick = document.createElement('div');\r\n        $joystick.classList.add('controller-joystick');\r\n        $joystick.dataset.id = _this.id;\r\n        $joystick.instance = _this;\r\n        _this.element = $joystick;\r\n        return _this;\r\n    }\r\n    JoystickComponent.prototype.render = function () {\r\n        var _this = this;\r\n        this.width = [this.size[0] + this.padding, this.size[1]];\r\n        this.height = [this.size[0] + this.padding, this.size[1]];\r\n        _super.prototype.render.call(this);\r\n        var el = this.element;\r\n        // Reseta a posição\r\n        this.position = { up: false, down: false, left: false, right: false };\r\n        // NippleJS\r\n        if (this.nipple)\r\n            this.nipple.destroy();\r\n        this.nipple = nipplejs.create({\r\n            zone: el,\r\n            size: this.size[0],\r\n            mode: 'static',\r\n            position: {\r\n                left: '50%',\r\n                top: '50%'\r\n            },\r\n            lockX: options.disJoyYAxis,\r\n            lockY: options.disJoyXAxis\r\n        });\r\n        // Eventos\r\n        this.nipple.on('move', function (e, d) { return _this.emit('move', _this, e, d); });\r\n        this.nipple.on('end', function (e, d) { return _this.emit('end', _this, e, d); });\r\n    };\r\n    JoystickComponent.prototype.toObject = function () {\r\n        return __assign(__assign({}, _super.prototype.toObject.call(this)), { type: this.type, size: this.size, padding: this.padding, keys: this.keys });\r\n    };\r\n    return JoystickComponent;\r\n}(ElementComponent));\r\nexport default JoystickComponent;\r\n","import ButtonComponent from '../components/Button';\r\nimport Controller from '../shared/Controller';\r\nimport JoystickComponent from '../components/Joystick';\r\nimport vibrate from '../utils/vibrate';\r\nimport options from './options';\r\ndocument.addEventListener('touchstart', touchStart);\r\ndocument.addEventListener('touchmove', touchMove);\r\ndocument.addEventListener('touchend', touchEnd);\r\ndocument.addEventListener('touchcancel', touchEnd);\r\n/**\r\n * Início do toque\r\n */\r\nfunction touchStart(e) {\r\n    var _a;\r\n    if ((_a = window.layoutEditor) === null || _a === void 0 ? void 0 : _a.opened)\r\n        return;\r\n    for (var _i = 0, _b = Array.from(e.changedTouches); _i < _b.length; _i++) {\r\n        var touch = _b[_i];\r\n        var target = document.elementFromPoint(touch.clientX, touch.clientY);\r\n        while (target !== null &&\r\n            !((target.instance instanceof ButtonComponent && !target.instance.customAction) ||\r\n                target.instance instanceof JoystickComponent)) {\r\n            target = target.parentElement;\r\n        }\r\n        if (target === null || target === void 0 ? void 0 : target.instance.lockable) {\r\n            vibrate(options.vibrate);\r\n            if (target.instance.active)\r\n                target.instance.release();\r\n            else\r\n                target.instance.press();\r\n            continue;\r\n        }\r\n        var joystick = (target === null || target === void 0 ? void 0 : target.instance) instanceof JoystickComponent;\r\n        Controller.currentTouches.push({ target: target, touch: touch, joystick: joystick });\r\n        if (!target)\r\n            continue;\r\n        vibrate(options.vibrate);\r\n        if (joystick)\r\n            continue;\r\n        target.instance.press();\r\n    }\r\n}\r\n/**\r\n * Movimento do toque\r\n */\r\nfunction touchMove(e) {\r\n    var _a, _b, _c;\r\n    if ((_a = window.layoutEditor) === null || _a === void 0 ? void 0 : _a.opened)\r\n        return;\r\n    var _loop_1 = function (touch) {\r\n        var i = Controller.currentTouches.findIndex(function (t) {\r\n            return t.touch.identifier === touch.identifier;\r\n        });\r\n        if (i < 0)\r\n            return \"continue\";\r\n        var oldtouch = Controller.currentTouches[i];\r\n        if (oldtouch.joystick)\r\n            return \"continue\";\r\n        if (!options.changeKeyOnDrag && oldtouch.target)\r\n            return \"continue\";\r\n        oldtouch.touch = touch;\r\n        var target = document.elementFromPoint(touch.clientX, touch.clientY);\r\n        // todo: colocar lockable aqui\r\n        while (target !== null &&\r\n            !(target.instance instanceof ButtonComponent &&\r\n                !target.instance.customAction &&\r\n                !target.instance.lockable)) {\r\n            target = target.parentElement;\r\n        }\r\n        if (oldtouch.target === target)\r\n            return \"continue\";\r\n        (_b = oldtouch.target) === null || _b === void 0 ? void 0 : _b.instance.release();\r\n        if (!target || ((_c = target.instance) === null || _c === void 0 ? void 0 : _c.active))\r\n            target = null;\r\n        oldtouch.target = target;\r\n        if (!target)\r\n            return \"continue\";\r\n        target.instance.press();\r\n        vibrate(options.vibrate);\r\n    };\r\n    for (var _i = 0, _d = Array.from(e.changedTouches); _i < _d.length; _i++) {\r\n        var touch = _d[_i];\r\n        _loop_1(touch);\r\n    }\r\n}\r\n/**\r\n * Fim do toque\r\n */\r\nfunction touchEnd(e) {\r\n    var _a, _b;\r\n    if ((_a = window.layoutEditor) === null || _a === void 0 ? void 0 : _a.opened)\r\n        return;\r\n    var _loop_2 = function (touch) {\r\n        var i = Controller.currentTouches.findIndex(function (t) {\r\n            return t.touch.identifier === touch.identifier;\r\n        });\r\n        if (i < 0)\r\n            return \"continue\";\r\n        if (((_b = Controller.currentTouches[i].target) === null || _b === void 0 ? void 0 : _b.instance) instanceof\r\n            ButtonComponent) {\r\n            ;\r\n            Controller.currentTouches[i].target.instance.release();\r\n        }\r\n        Controller.currentTouches.splice(i, 1);\r\n    };\r\n    for (var _i = 0, _c = Array.from(e.changedTouches); _i < _c.length; _i++) {\r\n        var touch = _c[_i];\r\n        _loop_2(touch);\r\n    }\r\n}\r\n","import Controller from '../shared/Controller';\r\nimport vibrate from '../utils/vibrate';\r\nimport { sendCmd } from './backend-integration';\r\nimport { $viewport } from './elements';\r\nimport options from './options';\r\nvar joysticks = ['mobystk:joystick_left', 'mobystk:joystick_right'];\r\n/**\r\n * Atualiza os dados dos joysticks e pressiona as teclas do computador\r\n */\r\nexport default function updateJoystick(target, _e, d) {\r\n    var _a, _b;\r\n    vibrate((options.vibrateJoystick * (d === null || d === void 0 ? void 0 : d.distance)) / 45);\r\n    // Se estiver usando o vgamepad\r\n    if (options.vgamepad && joysticks.includes(target.id)) {\r\n        var x = Math.round(-32768 + (65534 / 90) * (45 + (d === null || d === void 0 ? void 0 : d.distance) * Math.cos((_a = d === null || d === void 0 ? void 0 : d.angle) === null || _a === void 0 ? void 0 : _a.radian)));\r\n        var y = Math.round(-32768 + (65534 / 90) * (45 + (d === null || d === void 0 ? void 0 : d.distance) * Math.sin((_b = d === null || d === void 0 ? void 0 : d.angle) === null || _b === void 0 ? void 0 : _b.radian)));\r\n        if (isNaN(x) || isNaN(y))\r\n            x = y = 0;\r\n        if (target.id === 'mobystk:joystick_left')\r\n            sendCmd(\"\".concat(x, \"|\").concat(y), false, 'VJL');\r\n        if (target.id === 'mobystk:joystick_right')\r\n            sendCmd(\"\".concat(x, \"|\").concat(y), false, 'VJR');\r\n    }\r\n    // Se o joystick estiver em repouso, desapertar teclas\r\n    if (!(d === null || d === void 0 ? void 0 : d.direction)) {\r\n        update('up', false);\r\n        update('left', false);\r\n        update('down', false);\r\n        update('right', false);\r\n        return;\r\n    }\r\n    // Define as teclas de acordo com a posição\r\n    if (!options.disJoyYAxis)\r\n        update('up', (d === null || d === void 0 ? void 0 : d.angle.degree) > 22.5 && (d === null || d === void 0 ? void 0 : d.angle.degree) < 157.5);\r\n    if (!options.disJoyXAxis)\r\n        update('left', (d === null || d === void 0 ? void 0 : d.angle.degree) > 112.5 && (d === null || d === void 0 ? void 0 : d.angle.degree) < 247.5);\r\n    if (!options.disJoyYAxis)\r\n        update('down', (d === null || d === void 0 ? void 0 : d.angle.degree) > 202.5 && (d === null || d === void 0 ? void 0 : d.angle.degree) < 337.5);\r\n    if (!options.disJoyXAxis)\r\n        update('right', (d === null || d === void 0 ? void 0 : d.angle.degree) > 292.5 || (d === null || d === void 0 ? void 0 : d.angle.degree) < 67.5);\r\n    /**\r\n     * Pressiona as teclas\r\n     */\r\n    function update(dir, value) {\r\n        var _a = getKeyAndBorder(target.keys, dir), key = _a.key, border = _a.border;\r\n        // Efeito da borda\r\n        var $back = target.element.querySelector('.back');\r\n        $back.style[\"border\".concat(border, \"Width\")] = value ? '7px' : '';\r\n        if (!(options.vgamepad && joysticks.includes(target.id))) {\r\n            if (target.position[dir] === value)\r\n                return;\r\n            sendCmd([key], !value);\r\n        }\r\n        target.position[dir] = value;\r\n    }\r\n}\r\n/**\r\n * Retorna a tecla que será pressionada e a borda\r\n */\r\nfunction getKeyAndBorder(keys, dir) {\r\n    var key;\r\n    var border;\r\n    switch (dir) {\r\n        case 'up':\r\n            key = keys[0];\r\n            border = 'Top';\r\n            break;\r\n        case 'left':\r\n            key = keys[1];\r\n            border = 'Left';\r\n            break;\r\n        case 'down':\r\n            key = keys[2];\r\n            border = 'Bottom';\r\n            break;\r\n        case 'right':\r\n            key = keys[3];\r\n            border = 'Right';\r\n            break;\r\n    }\r\n    return { key: key, border: border };\r\n}\r\n/**\r\n * Reinicia os joysticks para evitar bugs\r\n */\r\nexport function resizeJoystick() {\r\n    // Ajusta os tamanhos do controle\r\n    var width;\r\n    if (window.outerHeight > window.outerWidth / 1.7777777777777777)\r\n        width = 640;\r\n    else\r\n        width = (window.outerWidth / window.outerHeight) * 360;\r\n    $viewport.setAttribute('content', \"width=\".concat(width, \", user-scalable=0\"));\r\n    // Reconstrói os joysticks\r\n    Controller.currentTouches = Controller.currentTouches.filter(function (el) { return !el.joystick; });\r\n    var joysticks = Controller.elements.joysticks;\r\n    joysticks.forEach(function (j) { return j.render(); });\r\n}\r\nwindow.addEventListener('load', resizeJoystick);\r\nwindow.addEventListener('resize', resizeJoystick);\r\n","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport ElementComponent from './Element';\r\nvar GroupComponent = /** @class */ (function (_super) {\r\n    __extends(GroupComponent, _super);\r\n    function GroupComponent(details) {\r\n        var _this = _super.call(this, details) || this;\r\n        _this.type = 'mobystk:group';\r\n        _this.content = details.content || [];\r\n        _this.parsedContent = details.parsedContent || [];\r\n        var $group = document.createElement('div');\r\n        $group.classList.add('controller-group');\r\n        $group.dataset.id = _this.id;\r\n        $group.instance = _this;\r\n        _this.element = $group;\r\n        for (var _i = 0, _a = _this.parsedContent; _i < _a.length; _i++) {\r\n            var element = _a[_i];\r\n            $group.appendChild(element.element);\r\n            element.render();\r\n        }\r\n        return _this;\r\n    }\r\n    GroupComponent.prototype.toObject = function () {\r\n        return __assign(__assign({}, _super.prototype.toObject.call(this)), { type: this.type, content: this.content });\r\n    };\r\n    return GroupComponent;\r\n}(ElementComponent));\r\nexport default GroupComponent;\r\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport Controller from '../shared/Controller';\r\nimport vibrate from '../utils/vibrate';\r\nimport { sendCmd } from './backend-integration';\r\nimport options from './options';\r\nvar defaultDriveHTML = \"\\n\\t<svg viewBox=\\\"0 0 32 32\\\">\\n\\t\\t<path d=\\\"M16 0a16 16 0 100 32 16 16 0 000-32zm0 4a12 12 0 0111.3 8H4.7c1.7-4.6 6-8 11.3-8zm0 14a2 2 0 110-4 2 2 0 010 4zM4 16c5.5 0 9.9 5.3 10 11.8A12 12 0 014 16zm14 11.8c.1-6.5 4.5-11.8 10-11.8a12 12 0 01-10 11.8z\\\"></path>\\n\\t</svg>\";\r\nexport default function loadDriveMode() {\r\n    var drive = Controller.elements.buttons.find(function (e) { return e.customAction === 'drive'; });\r\n    var driveHTML = drive ? (drive._html = defaultDriveHTML) : '';\r\n    drive === null || drive === void 0 ? void 0 : drive.render();\r\n    if (drive)\r\n        drive.element.addEventListener('touchstart', toggleDriveMode);\r\n    // Desativa o ícone de volante, caso não esteja em HTTPS\r\n    if (!isHTTPS() && drive && drive.element)\r\n        drive.element.style.display = 'none';\r\n    /**\r\n     * Liga/desliga o sensor\r\n     */\r\n    function toggleDriveMode() {\r\n        var _a;\r\n        if ((_a = window.layoutEditor) === null || _a === void 0 ? void 0 : _a.opened)\r\n            return;\r\n        // Inicia/para o sensor\r\n        drive.active ? stopSensor() : startSensor();\r\n        /**\r\n         * Inicia o sensor\r\n         */\r\n        function startSensor() {\r\n            drive.press();\r\n            drive.element.innerHTML = '<i class=\"driveArrow mdi mdi-arrow-up\"></i>';\r\n            var driveY = 0;\r\n            var driveAngle = 0;\r\n            var lastDirections = [];\r\n            // Detecta os movimentos\r\n            window.ondevicemotion = function (e) {\r\n                var land = window.outerWidth > window.outerHeight;\r\n                var inverted = e.accelerationIncludingGravity[land ? 'x' : 'y'] >= 0 ? 1 : -1;\r\n                driveY = parseFloat(e.accelerationIncludingGravity[land ? 'y' : 'x'].toFixed(1));\r\n                driveY *= inverted * (land ? 1 : -1);\r\n                var $steeringWheel = drive.element.children[0];\r\n                if (!options.vgamepad) {\r\n                    // Define a direção (ângulo)\r\n                    var angle = getArrowAngle(driveAngle, driveY, options.driveSensitivity, options.drivePrecision);\r\n                    if (angle === driveAngle)\r\n                        return;\r\n                    $steeringWheel.style.transform = \"rotate(\".concat(angle, \"deg)\");\r\n                    driveAngle = angle;\r\n                    vibrate(options.vibrate * 2);\r\n                    // Pressiona as teclas\r\n                    var directions_1 = getDirections(angle);\r\n                    var pressKeys = directions_1.filter(function (e) { return !lastDirections.includes(e); });\r\n                    var unpressKeys = lastDirections.filter(function (e) { return !directions_1.includes(e); });\r\n                    sendCmd(pressKeys);\r\n                    sendCmd(unpressKeys, true);\r\n                    lastDirections = __spreadArray([], directions_1, true);\r\n                }\r\n                else {\r\n                    // Usando VGamepad\r\n                    var x = Math.round((32767 / options.driveSensitivity) * driveY);\r\n                    if (x < 10923 * options.drivePrecision && x > -10923 * options.drivePrecision)\r\n                        x = 0;\r\n                    if (x > 32767)\r\n                        x = 32767;\r\n                    if (x < -32767)\r\n                        x = -32767;\r\n                    var angle = (90 * x) / 32767;\r\n                    $steeringWheel.style.transform = \"rotate(\".concat(angle, \"deg)\");\r\n                    sendCmd(\"\".concat(x, \"|0\"), false, 'VJL');\r\n                }\r\n            };\r\n        }\r\n        /**\r\n         * Para o sensor\r\n         */\r\n        function stopSensor() {\r\n            drive.release();\r\n            drive.element.innerHTML = driveHTML;\r\n            window.ondevicemotion = null;\r\n            if (!options.vgamepad) {\r\n                sendCmd('joyLUp', true);\r\n                sendCmd('joyLLeft', true);\r\n                sendCmd('joyLRight', true);\r\n            }\r\n            else {\r\n                sendCmd('0|0', false, 'VJL');\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Retorna true se o site estiver em HTTPS\r\n */\r\nfunction isHTTPS() {\r\n    return (location.protocol === 'https:' ||\r\n        location.hostname === 'localhost' ||\r\n        location.hostname === '127.0.0.1');\r\n}\r\n/**\r\n * Retorna o ângulo em graus da rotação do celular\r\n */\r\nfunction getArrowAngle(driveAngle, driveY, SENSITIVITY, PRECISION) {\r\n    var angle = 0;\r\n    if (driveAngle === -45) {\r\n        if (driveY > SENSITIVITY)\r\n            angle = 45;\r\n        if (driveY < -SENSITIVITY + PRECISION)\r\n            angle = -45;\r\n        if (driveY > SENSITIVITY * 2)\r\n            angle *= 2;\r\n        if (driveY < -SENSITIVITY * 2 - PRECISION)\r\n            angle *= 2;\r\n    }\r\n    else if (driveAngle === 45) {\r\n        if (driveY > SENSITIVITY - PRECISION)\r\n            angle = 45;\r\n        if (driveY < -SENSITIVITY)\r\n            angle = -45;\r\n        if (driveY > SENSITIVITY * 2 + PRECISION)\r\n            angle *= 2;\r\n        if (driveY < -SENSITIVITY * 2)\r\n            angle *= 2;\r\n    }\r\n    else {\r\n        if (driveY > SENSITIVITY)\r\n            angle = 45;\r\n        if (driveY < -SENSITIVITY)\r\n            angle = -45;\r\n        if (driveY > SENSITIVITY * 2)\r\n            angle *= 2;\r\n        if (driveY < -SENSITIVITY * 2)\r\n            angle *= 2;\r\n    }\r\n    return angle;\r\n}\r\n/**\r\n * Retorna as teclas que devem estar pressionadas no ângulo atual\r\n */\r\nfunction getDirections(angle) {\r\n    var directions;\r\n    switch (angle) {\r\n        case -90:\r\n            directions = ['joyLLeft'];\r\n            break;\r\n        case -45:\r\n            directions = ['joyLUp', 'joyLLeft'];\r\n            break;\r\n        case 45:\r\n            directions = ['joyLUp', 'joyLRight'];\r\n            break;\r\n        case 90:\r\n            directions = ['joyLRight'];\r\n            break;\r\n        default:\r\n            directions = ['joyLUp'];\r\n    }\r\n    return directions;\r\n}\r\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport ButtonComponent from '../components/Button';\r\nimport GroupComponent from '../components/Group';\r\nimport JoystickComponent from '../components/Joystick';\r\nimport Controller from '../shared/Controller';\r\nimport { sendCmd } from './backend-integration';\r\nimport loadElementActions from './element-actions';\r\nimport { $DILayout, $layout } from './elements';\r\nimport updateJoystick from './joystick';\r\nimport loadDriveMode from './motion-control';\r\nimport options from './options';\r\n/**\r\n * Carrega o layout\r\n */\r\nexport function loadLayout(layout) {\r\n    var parsedLayout = __assign(__assign({}, layout), { parsedContent: layout.content.map(parseElement).filter(function (e) { return e; }) });\r\n    var allElements = getAllElements(parsedLayout);\r\n    $layout.innerHTML = '';\r\n    for (var _i = 0, _a = parsedLayout.parsedContent; _i < _a.length; _i++) {\r\n        var object = _a[_i];\r\n        if (!object)\r\n            continue;\r\n        $layout.appendChild(object.element);\r\n        object.render();\r\n    }\r\n    Controller.currentLayout = parsedLayout;\r\n    Controller.elements.all = allElements;\r\n    Controller.elements.buttons = allElements.filter(function (e) { return e instanceof ButtonComponent; });\r\n    Controller.elements.groups = allElements.filter(function (e) { return e instanceof GroupComponent; });\r\n    Controller.elements.joysticks = allElements.filter(function (e) { return e instanceof JoystickComponent; });\r\n    $DILayout.innerText = layout.name || '???';\r\n    loadElementActions();\r\n    loadDriveMode();\r\n    return layout;\r\n}\r\n/**\r\n * Retorna todos os elementos (botões, grupos e joysticks) de um objeto\r\n */\r\nexport function getAllElements(object, elements) {\r\n    if (elements === void 0) { elements = []; }\r\n    if (object.type === 'mobystk:layout' || object.type === 'mobystk:group') {\r\n        object = object;\r\n        if (object.type !== 'mobystk:layout')\r\n            elements.push(object);\r\n        for (var _i = 0, _a = object.parsedContent; _i < _a.length; _i++) {\r\n            var obj = _a[_i];\r\n            getAllElements(obj, elements);\r\n        }\r\n    }\r\n    else {\r\n        elements.push(object);\r\n    }\r\n    return elements;\r\n}\r\n/**\r\n * Converte os elementos de JSON para objetos\r\n */\r\nexport function parseElement(object) {\r\n    var _a, _b;\r\n    var objectID = 'import' in object ? object.import : object.id;\r\n    // Remove os itens ocultos\r\n    if ((_a = options.hidden) === null || _a === void 0 ? void 0 : _a.includes(objectID))\r\n        return;\r\n    // Importa os elementos\r\n    if ('import' in object)\r\n        object = importElement(object);\r\n    // Descarta os objetos inválidos\r\n    if (!object)\r\n        return;\r\n    if (object.type === 'mobystk:button') {\r\n        // Botão\r\n        object = object;\r\n        if ((_b = options.locked) === null || _b === void 0 ? void 0 : _b.includes(objectID))\r\n            object = __assign(__assign({}, object), { lockable: true });\r\n        return new ButtonComponent(object);\r\n    }\r\n    else if (object.type === 'mobystk:group') {\r\n        // Grupo\r\n        object = object;\r\n        object.parsedContent = object.content\r\n            .map(parseElement)\r\n            .filter(function (e) { return e; });\r\n        var group_1 = new GroupComponent(object);\r\n        object.parsedContent = object.parsedContent.map(function (e) { return (e.parent = group_1); });\r\n        return group_1;\r\n    }\r\n    else if (object.type === 'mobystk:joystick') {\r\n        // Joystick\r\n        object = object;\r\n        return new JoystickComponent(object);\r\n    }\r\n}\r\n/**\r\n * Reutiliza um elemento\r\n */\r\nexport function importElement(object) {\r\n    var allElements = __spreadArray(__spreadArray(__spreadArray([], Controller.buttons, true), Controller.groups, true), Controller.joysticks, true);\r\n    var element = allElements.find(function (e) { return e.id === object.import; });\r\n    if (element)\r\n        return __assign(__assign({}, element), object);\r\n}\r\n// Carrega o layout selecionado\r\nif (!options.layout) {\r\n    window.location.href = 'index.html';\r\n    throw new Error('Layout não selecionado');\r\n}\r\nvar layout = Controller.layouts.find(function (l) { return l.id === options.layout; });\r\nif (!layout) {\r\n    alert('Layout não encontrado!');\r\n    window.location.href = 'index.html';\r\n    throw new Error('Layout não encontrado');\r\n}\r\nloadLayout(layout);\r\n// Configura os eventos dos elementos\r\nfor (var _i = 0, _a = Controller.elements.all; _i < _a.length; _i++) {\r\n    var element = _a[_i];\r\n    if (element instanceof ButtonComponent) {\r\n        element.on('press', function (key) { return sendCmd(key, false); });\r\n        element.on('release', function (key) { return sendCmd(key, true); });\r\n    }\r\n    else if (element instanceof JoystickComponent) {\r\n        element.on('move end', updateJoystick);\r\n    }\r\n}\r\n","var _a, _b;\r\nimport loading from '../utils/loading';\r\nimport { $bgImage, $deviceInfo, $DIBatteryIcon, $DIBatteryLevel, $DIClock, $DIPlayerNumber, $edit, $root } from './elements';\r\nimport options from './options';\r\n// ELEMENTOS\r\nif (options.hidden.includes('mobystk:deviceInfo')) {\r\n    $deviceInfo.classList.add('hidden');\r\n}\r\n// CARREGAMENTO DAS OPÇÕES\r\n$edit.addEventListener('click', loading);\r\n$edit.addEventListener('contextmenu', function () {\r\n    window.layoutEditor.opened ? window.layoutEditor.end() : window.layoutEditor.start();\r\n});\r\nif (!options.layout)\r\n    location.href = 'index.html';\r\nif (options.debug)\r\n    document.body.classList.add('debug');\r\nif (options.invertL)\r\n    document.body.classList.add('invertL');\r\nif (options.invertR)\r\n    document.body.classList.add('invertR');\r\nif (options.bgImage)\r\n    $bgImage.style.backgroundImage = \"url('\".concat(options.bgImage, \"')\");\r\nif (options.bgOpacity)\r\n    $bgImage.style.opacity = String(options.bgOpacity);\r\nif (options.bgBlur)\r\n    $bgImage.style.filter = \"blur(\".concat(options.bgBlur, \"px)\");\r\nif (options.colorsBackground)\r\n    $root.style.setProperty('--background', options.colorsBackground);\r\nif (options.colorsColor)\r\n    $root.style.setProperty('--color', options.colorsColor);\r\nif (options.colorsBorder)\r\n    $root.style.setProperty('--border', options.colorsBorder);\r\nif (options.colorsActive)\r\n    $root.style.setProperty('--active', options.colorsActive);\r\n// CSS PERSONALIZADO\r\nvar $customCSS = document.createElement('style');\r\n$customCSS.textContent = options.customCSS;\r\ndocument.body.append($customCSS);\r\n// JS PERSONALIZADO\r\nif (options.customJS && options.customJS.trim()) {\r\n    if (confirm('Deseja executar os plugins?')) {\r\n        try {\r\n            new Function(options.customJS.trim())();\r\n        }\r\n        catch (err) {\r\n            alert('Ocorreu um erro ao executar os plugins\\n\\n' + (err.message || ''));\r\n        }\r\n    }\r\n}\r\n// INFORMAÇÕES - BATERIA\r\n(_b = (_a = navigator\r\n    .getBattery) === null || _a === void 0 ? void 0 : _a.call(navigator)) === null || _b === void 0 ? void 0 : _b.then(function (battery) {\r\n    updateBattery(battery);\r\n    battery.addEventListener('chargingchange', function (e) { return updateBattery(e.target); });\r\n    battery.addEventListener('levelchange', function (e) { return updateBattery(e.target); });\r\n}).catch(console.error);\r\n// Atualiza o ícone e porcentagem da bateria\r\nfunction updateBattery(battery) {\r\n    var _a;\r\n    (_a = $DIBatteryIcon.classList).remove.apply(_a, Array.from($DIBatteryIcon.classList));\r\n    $DIBatteryIcon.classList.add('mdi');\r\n    var charging = battery.charging;\r\n    var level = battery.level * 100;\r\n    var roundLevel = Math.round(level / 10) * 10;\r\n    $DIBatteryLevel.innerText = Math.round(level) + '% •';\r\n    if (roundLevel === 0) {\r\n        $DIBatteryIcon.classList.add('mdi-battery-outline');\r\n    }\r\n    else if (roundLevel === 100) {\r\n        $DIBatteryIcon.classList.add('mdi-battery' + (charging ? '-charging-100' : ''));\r\n    }\r\n    else {\r\n        $DIBatteryIcon.classList.add('mdi-battery-' + (charging ? 'charging-' : '') + roundLevel);\r\n    }\r\n}\r\n// INFORMAÇÕES - RELÓGIO\r\nwindow.setInterval(updateClock, 1000);\r\nupdateClock();\r\n// Atualiza as horas do relógio\r\nfunction updateClock() {\r\n    var hours = new Date().getHours().toString().padStart(2, '0');\r\n    var minutes = new Date().getMinutes().toString().padStart(2, '0');\r\n    $DIClock.innerText = hours + ':' + minutes;\r\n}\r\n// INFORMAÇÕES - Nº JOGADOR E NOME DO LAYOUT\r\n$DIPlayerNumber.innerText = String(options.player + 1);\r\n// ATUALIZA O JOGADOR DO CONTROLE NO MODO DEBUG\r\nif (options.debug)\r\n    $deviceInfo.addEventListener('click', function () {\r\n        options.player += 1;\r\n        if (options.player > 3)\r\n            options.player = 0;\r\n        $DIPlayerNumber.innerText = String(options.player + 1);\r\n    });\r\n","import { editingElement } from './interactions';\r\nvar $hAnchor = null;\r\nvar $vAnchor = null;\r\nvar $editBox = null;\r\nexport function updateAnchorLines() {\r\n    $hAnchor.removeAttribute('style');\r\n    $vAnchor.removeAttribute('style');\r\n    $editBox.removeAttribute('style');\r\n    if (!editingElement)\r\n        return;\r\n    var anchorX = editingElement.anchorX, anchorY = editingElement.anchorY, width = editingElement.width, height = editingElement.height, x = editingElement.x, y = editingElement.y;\r\n    $hAnchor.style.width = anchorX !== 2 ? x.join('') : '0px';\r\n    $vAnchor.style.height = anchorY !== 2 ? y.join('') : '0px';\r\n    $editBox.style.width = width.join('');\r\n    $editBox.style.height = height.join('');\r\n    var posX = anchorX === 1 ? 'right' : 'left';\r\n    var posY = anchorY === 1 ? 'bottom' : 'top';\r\n    $hAnchor.style[posX] = '0';\r\n    $vAnchor.style[posX] = anchorX === 2 ? '50%' : \"calc(\".concat(x.join(''), \" + \").concat(width.join(''), \" / 2)\");\r\n    $vAnchor.style[posY] = '0';\r\n    $hAnchor.style[posY] = anchorY === 2 ? '50%' : \"calc(\".concat(y.join(''), \" + \").concat(height.join(''), \" / 2)\");\r\n    $editBox.style[posX] = anchorX === 2 ? '50%' : x.join('');\r\n    $editBox.style[posY] = anchorY === 2 ? '50%' : y.join('');\r\n    if (anchorX === 2 && anchorY === 2)\r\n        $editBox.style.transform = 'translate(-50%, -50%)';\r\n    else if (anchorX === 2)\r\n        $editBox.style.transform = 'translateX(-50%)';\r\n    else if (anchorY === 2)\r\n        $editBox.style.transform = 'translateY(-50%)';\r\n}\r\nexport function addAnchorLines(element) {\r\n    var _a;\r\n    var parent = ((_a = element.parent) === null || _a === void 0 ? void 0 : _a.element) || document.body;\r\n    parent.classList.add('editing-element-parent');\r\n    $hAnchor = document.createElement('div');\r\n    $vAnchor = document.createElement('div');\r\n    $editBox = document.createElement('div');\r\n    $hAnchor.classList.add('horizontal-anchor');\r\n    $vAnchor.classList.add('vertical-anchor');\r\n    $editBox.classList.add('editing-item-box');\r\n    parent.appendChild($hAnchor);\r\n    parent.appendChild($vAnchor);\r\n    parent.appendChild($editBox);\r\n}\r\nexport function removeAnchorLines(element) {\r\n    var _a;\r\n    var parent = ((_a = element.parent) === null || _a === void 0 ? void 0 : _a.element) || document.body;\r\n    parent.classList.remove('editing-element-parent');\r\n    $hAnchor === null || $hAnchor === void 0 ? void 0 : $hAnchor.remove();\r\n    $vAnchor === null || $vAnchor === void 0 ? void 0 : $vAnchor.remove();\r\n    $editBox === null || $editBox === void 0 ? void 0 : $editBox.remove();\r\n}\r\n","import { GRID_SIZE } from '.';\r\nimport JoystickComponent from '../../components/Joystick';\r\nimport { toast, toastObj } from '../../utils/toast';\r\nimport { addAnchorLines, removeAnchorLines, updateAnchorLines } from './guides';\r\nimport { toolbar } from './toolbar';\r\nimport { tree } from './tree';\r\nexport var editingElement = null;\r\nexport function elementClick(element) {\r\n    if (editingElement) {\r\n        editingElement.editing = false;\r\n        editingElement.render();\r\n        removeAnchorLines(editingElement);\r\n    }\r\n    editingElement = element === null || element === void 0 ? void 0 : element.instance;\r\n    if (editingElement) {\r\n        editingElement.editing = true;\r\n        editingElement.render();\r\n        addAnchorLines(editingElement);\r\n        updateAnchorLines();\r\n    }\r\n    tree.render();\r\n    toolbar.render();\r\n}\r\nexport var touch;\r\nexport function touchStart(e) {\r\n    touch = 'changedTouches' in e ? e.changedTouches[0] : e;\r\n}\r\nexport function touchMove(e) {\r\n    var _a;\r\n    if (toolbar.interacting)\r\n        return;\r\n    if (tree.interacting)\r\n        return;\r\n    var el = editingElement;\r\n    if (!el)\r\n        return;\r\n    var _b = 'changedTouches' in e ? e.changedTouches[0] : e, clientX = _b.clientX, clientY = _b.clientY;\r\n    var deltaX = clientX - ((touch === null || touch === void 0 ? void 0 : touch.clientX) || clientX);\r\n    var deltaY = clientY - ((touch === null || touch === void 0 ? void 0 : touch.clientY) || clientY);\r\n    if ((el.anchorX === 2 && (deltaX < -20 || deltaX > 20) && !toastObj.showing) ||\r\n        (el.anchorY === 2 && (deltaY < -20 || deltaY > 20) && !toastObj.showing)) {\r\n        toast('Não é possível mover o elemento centralizado\\nMude a posição do elemento para movimentá-lo');\r\n    }\r\n    touch = 'changedTouches' in e ? e.changedTouches[0] : e;\r\n    if (el.anchorX === 1)\r\n        deltaX = -deltaX;\r\n    if (el.anchorY === 1)\r\n        deltaY = -deltaY;\r\n    var gridX = GRID_SIZE;\r\n    var gridY = GRID_SIZE;\r\n    var parentWidth = ((_a = el.parent) === null || _a === void 0 ? void 0 : _a.width[0]) || document.body.clientWidth;\r\n    if (toolbar.mode === 0)\r\n        move();\r\n    else if (toolbar.mode === 1)\r\n        if (el instanceof JoystickComponent)\r\n            resizeJoystick();\r\n        else\r\n            resize();\r\n    el.render();\r\n    updateAnchorLines();\r\n    function percentageX() {\r\n        gridX = (gridX * 100) / parentWidth;\r\n        deltaX = (deltaX * 100) / parentWidth;\r\n    }\r\n    function percentageY() {\r\n        gridY = (gridY * 100) / parentWidth;\r\n        deltaY = (deltaY * 100) / parentWidth;\r\n    }\r\n    function move() {\r\n        if (el.x[1] === '%')\r\n            percentageX();\r\n        if (el.y[1] === '%')\r\n            percentageY();\r\n        if (el.anchorX === 2)\r\n            deltaX = 0;\r\n        if (el.anchorY === 2)\r\n            deltaY = 0;\r\n        var x = el._imaginaryX || el.x[0];\r\n        var y = el._imaginaryY || el.y[0];\r\n        el.x[0] = Math.round((x + deltaX) / gridX) * gridX;\r\n        el.y[0] = Math.round((y + deltaY) / gridY) * gridY;\r\n        el._imaginaryX = x + deltaX;\r\n        el._imaginaryY = y + deltaY;\r\n    }\r\n    function resize() {\r\n        if (el.width[1] === '%')\r\n            percentageX();\r\n        if (el.height[1] === '%')\r\n            percentageY();\r\n        var width = el._imaginaryWidth || el.width[0];\r\n        var height = el._imaginaryHeight || el.height[0];\r\n        el.width[0] = Math.max(0, Math.round((width + deltaX) / gridX) * gridX);\r\n        el.height[0] = Math.max(0, Math.round((height + deltaY) / gridY) * gridY);\r\n        el._imaginaryWidth = Math.max(0, width + deltaX);\r\n        el._imaginaryHeight = Math.max(0, height + deltaY);\r\n    }\r\n    function resizeJoystick() {\r\n        var joystick = el;\r\n        if (joystick.size[1] === '%') {\r\n            percentageX();\r\n            percentageY();\r\n        }\r\n        var size = joystick._imaginarySize || joystick.size[0];\r\n        var padding = joystick._imaginaryPadding || joystick.padding;\r\n        joystick.size[0] = Math.max(0, Math.round((size + deltaX) / gridX) * gridX);\r\n        joystick.padding = Math.max(0, Math.round((padding + deltaY) / gridY) * gridY);\r\n        joystick._imaginarySize = Math.max(0, size + deltaX);\r\n        joystick._imaginaryPadding = Math.max(0, padding + deltaY);\r\n    }\r\n}\r\nexport function touchEnd(e) { }\r\n","import ButtonComponent from '../../components/Button';\r\nimport GroupComponent from '../../components/Group';\r\nimport JoystickComponent from '../../components/Joystick';\r\nimport Controller from '../../shared/Controller';\r\nimport { escapeHTML } from '../../utils/escapeHTML';\r\nimport { editingElement } from './interactions';\r\nvar Tree = /** @class */ (function () {\r\n    function Tree(element) {\r\n        var _this = this;\r\n        this.element = element;\r\n        this.opened = false;\r\n        this.interacting = false;\r\n        element.addEventListener('touchstart', function () { return (_this.interacting = true); });\r\n        element.addEventListener('touchend', function () { return (_this.interacting = false); });\r\n        this.render();\r\n    }\r\n    Tree.prototype.render = function () {\r\n        this.element.classList[this.opened ? 'add' : 'remove']('opened');\r\n        this.element.innerHTML = '';\r\n        this.element.appendChild(this._html(Controller.currentLayout));\r\n    };\r\n    Tree.prototype._html = function (element, root) {\r\n        if (root === void 0) { root = true; }\r\n        var $tree = document.createDocumentFragment();\r\n        var $groupContent;\r\n        if (!root && element instanceof GroupComponent) {\r\n            var $group = document.createElement('div');\r\n            $group.classList.add('element', 'group');\r\n            if (element === editingElement)\r\n                $group.classList.add('active');\r\n            var $name = document.createElement('div');\r\n            $name.classList.add('name');\r\n            var escapedIcon = escapeHTML(this._getIcon(element));\r\n            var escapedName = escapeHTML(element.name);\r\n            $name.innerHTML += \"<i class=\\\"mdi mdi-\".concat(escapedIcon, \"\\\"></i> \").concat(escapedName);\r\n            $name.instance = element;\r\n            $group.appendChild($name);\r\n            $groupContent = document.createElement('div');\r\n            $groupContent.classList.add('content');\r\n            $group.appendChild($groupContent);\r\n            $tree.appendChild($group);\r\n        }\r\n        else {\r\n            $groupContent = $tree;\r\n        }\r\n        for (var _i = 0, _a = element.parsedContent || element.content; _i < _a.length; _i++) {\r\n            var el = _a[_i];\r\n            el = el;\r\n            if ('content' in el && Array.isArray(el.content)) {\r\n                el = el;\r\n                $groupContent.appendChild(this._html(el, false));\r\n            }\r\n            else {\r\n                var $element = document.createElement('div');\r\n                var type = el instanceof ButtonComponent\r\n                    ? 'button'\r\n                    : el instanceof JoystickComponent\r\n                        ? 'joystick'\r\n                        : '';\r\n                if (type)\r\n                    $element.classList.add('element', type);\r\n                if (el === editingElement)\r\n                    $element.classList.add('active');\r\n                var $name = document.createElement('div');\r\n                $name.classList.add('name');\r\n                $name.innerHTML += \"<i class=\\\"mdi mdi-\".concat(escapeHTML(this._getIcon(el)), \"\\\"></i> \").concat(escapeHTML(el.name));\r\n                $name.instance = el;\r\n                $element.appendChild($name);\r\n                $groupContent.appendChild($element);\r\n            }\r\n        }\r\n        return $tree;\r\n    };\r\n    Tree.prototype._getIcon = function (element) {\r\n        switch (element.type) {\r\n            case 'mobystk:button':\r\n                return element.content.type === 'mobystk:icon'\r\n                    ? element.content.value\r\n                    : 'checkbox-intermediate';\r\n            case 'mobystk:group':\r\n                return 'group';\r\n            case 'mobystk:joystick':\r\n                return 'gamepad';\r\n        }\r\n    };\r\n    return Tree;\r\n}());\r\nexport { Tree };\r\nexport var tree = new Tree(document.querySelector('.layout-tree'));\r\n","import { updateAnchorLines } from './guides';\r\nimport { editingElement } from './interactions';\r\nimport { tree } from './tree';\r\nvar Toolbar = /** @class */ (function () {\r\n    function Toolbar(element) {\r\n        var _this_1 = this;\r\n        if (!element)\r\n            throw new Error('Invalid element to construct Toolbar');\r\n        this.element = element;\r\n        this.x = 0;\r\n        this.y = 0;\r\n        // 0 = move\r\n        // 1 = resize\r\n        this.mode = 0;\r\n        this.showingMore = false;\r\n        this.interacting = false;\r\n        element.addEventListener('touchstart', function () { return (_this_1.interacting = true); });\r\n        element.addEventListener('touchend', function () {\r\n            _this_1.interacting = false;\r\n            _this_1.render();\r\n        });\r\n        var $toolbarDrag = element.querySelector('.drag');\r\n        $toolbarDrag.addEventListener('touchmove', function (e) {\r\n            _this_1.x = Math.max(0, e.changedTouches[0].clientX - 14);\r\n            _this_1.y = Math.max(0, e.changedTouches[0].clientY - 21);\r\n            _this_1.render();\r\n        });\r\n        this.$showLayoutTree = element.querySelector('.show-layout-tree');\r\n        this.$showLayoutTree.addEventListener('click', function (e) {\r\n            tree.opened = !tree.opened;\r\n            tree.render();\r\n            _this_1.render();\r\n        });\r\n        this.$toolbarShowMore = element.querySelector('.show-more');\r\n        this.$toolbarShowMore.addEventListener('click', function (e) {\r\n            _this_1.showingMore = !_this_1.showingMore;\r\n            _this_1.render();\r\n        });\r\n        this.$modes = document.querySelectorAll('.mode');\r\n        var _loop_1 = function ($mode) {\r\n            var _this = this_1;\r\n            $mode.addEventListener('click', function (e) {\r\n                var mode = parseInt(this.dataset.mode);\r\n                if (isNaN(mode))\r\n                    return;\r\n                _this.mode = mode;\r\n                _this.render();\r\n            });\r\n        };\r\n        var this_1 = this;\r\n        for (var _i = 0, _a = Array.from(this.$modes); _i < _a.length; _i++) {\r\n            var $mode = _a[_i];\r\n            _loop_1($mode);\r\n        }\r\n        this.$anchorX = document.querySelector('.anchor-x');\r\n        this.$anchorX.addEventListener('click', function (e) {\r\n            editingElement.anchorX += 1;\r\n            if (editingElement.anchorX > 2)\r\n                editingElement.anchorX = 0;\r\n            _this_1.render();\r\n            editingElement.render();\r\n            updateAnchorLines();\r\n        });\r\n        this.$anchorY = document.querySelector('.anchor-y');\r\n        this.$anchorY.addEventListener('click', function (e) {\r\n            editingElement.anchorY += 1;\r\n            if (editingElement.anchorY > 2)\r\n                editingElement.anchorY = 0;\r\n            _this_1.render();\r\n            editingElement.render();\r\n            updateAnchorLines();\r\n        });\r\n        this.render();\r\n    }\r\n    Toolbar.prototype.render = function () {\r\n        var el = this.element;\r\n        el.classList[this.showingMore ? 'add' : 'remove']('showing-more');\r\n        el.classList[this.interacting ? 'add' : 'remove']('interacting');\r\n        try {\r\n            this.$showLayoutTree.classList[tree.opened ? 'add' : 'remove']('active');\r\n        }\r\n        catch (err) {\r\n            console.error(err);\r\n        }\r\n        var x = this.x;\r\n        var y = this.y;\r\n        var parent = el.parentElement;\r\n        if (x + el.offsetWidth > parent.offsetWidth)\r\n            x = parent.offsetWidth - el.offsetWidth;\r\n        if (y + el.offsetHeight > parent.offsetHeight)\r\n            y = parent.offsetHeight - el.offsetHeight;\r\n        el.style.left = x + 'px';\r\n        el.style.top = y + 'px';\r\n        this._x = x;\r\n        this._y = y;\r\n        for (var _i = 0, _a = Array.from(this.$modes); _i < _a.length; _i++) {\r\n            var $mode = _a[_i];\r\n            var mode = parseInt($mode.dataset.mode);\r\n            if (isNaN(mode))\r\n                continue;\r\n            $mode.classList[this.mode === mode ? 'add' : 'remove']('active-mode');\r\n        }\r\n        var $anchorX = this.$anchorX.querySelector('i.mdi');\r\n        var $anchorY = this.$anchorY.querySelector('i.mdi');\r\n        $anchorX.classList.remove('mdi-align-horizontal-left', 'mdi-align-horizontal-center', 'mdi-align-horizontal-right');\r\n        $anchorY.classList.remove('mdi-align-vertical-top', 'mdi-align-vertical-center', 'mdi-align-vertical-bottom');\r\n        if (typeof editingElement !== 'undefined' && editingElement) {\r\n            this.$anchorX.disabled = false;\r\n            this.$anchorY.disabled = false;\r\n            if (editingElement.anchorX === 0)\r\n                $anchorX.classList.add('mdi-align-horizontal-left');\r\n            if (editingElement.anchorX === 1)\r\n                $anchorX.classList.add('mdi-align-horizontal-right');\r\n            if (editingElement.anchorX === 2)\r\n                $anchorX.classList.add('mdi-align-horizontal-center');\r\n            if (editingElement.anchorY === 0)\r\n                $anchorY.classList.add('mdi-align-vertical-top');\r\n            if (editingElement.anchorY === 1)\r\n                $anchorY.classList.add('mdi-align-vertical-bottom');\r\n            if (editingElement.anchorY === 2)\r\n                $anchorY.classList.add('mdi-align-vertical-center');\r\n        }\r\n        else {\r\n            this.$anchorX.disabled = true;\r\n            this.$anchorY.disabled = true;\r\n            $anchorX.classList.add('mdi-align-horizontal-left');\r\n            $anchorY.classList.add('mdi-align-vertical-top');\r\n        }\r\n    };\r\n    return Toolbar;\r\n}());\r\nexport { Toolbar };\r\nexport var toolbar = new Toolbar(document.querySelector('.layout-editor-toolbar'));\r\n","// window.onload = () => layoutEditor.start() //temp\r\nimport { toast } from '../../utils/toast';\r\nimport { resizeJoystick } from '../joystick';\r\nimport options from '../options';\r\nimport { elementClick, touchEnd, touchMove, touchStart } from './interactions';\r\nimport { toolbar } from './toolbar';\r\nexport var layoutEditor = {};\r\nwindow.layoutEditor = layoutEditor;\r\nlayoutEditor.opened = false;\r\nexport var GRID_SIZE = 10;\r\nlayoutEditor.start = function () {\r\n    layoutEditor.opened = true;\r\n    options.disJoyXAxis = true;\r\n    options.disJoyYAxis = true;\r\n    resizeJoystick();\r\n    document.body.classList.add('layout-editor-opened');\r\n    document.addEventListener('click', click);\r\n    document.body.style.setProperty('--grid-size', GRID_SIZE + 'px');\r\n    document.addEventListener('touchstart', touchStart);\r\n    document.addEventListener('touchmove', touchMove);\r\n    document.addEventListener('touchend', touchEnd);\r\n    document.addEventListener('mousedown', touchStart);\r\n    document.addEventListener('mouseup', touchMove);\r\n    document.addEventListener('mousemove', touchEnd);\r\n    toast('Modo edição ativado');\r\n    toast('Clique em algum elemento para editar');\r\n};\r\nfunction click(e) {\r\n    var _a, _b;\r\n    if (e.path.includes(toolbar.element))\r\n        return;\r\n    var i = 0;\r\n    while (e.path[i] &&\r\n        (!('instance' in e.path[i]) || ((_b = (_a = e.path[i]) === null || _a === void 0 ? void 0 : _a.instance) === null || _b === void 0 ? void 0 : _b.editing))) {\r\n        i++;\r\n    }\r\n    elementClick(e.path[i]);\r\n}\r\nvar mousePressed = false;\r\nfunction mouseDown(e) {\r\n    mousePressed = true;\r\n    touchStart(e);\r\n}\r\nfunction mouseUp(e) {\r\n    mousePressed = false;\r\n    touchEnd(e);\r\n}\r\nfunction mouseMove(e) {\r\n    if (mousePressed)\r\n        touchMove(e);\r\n}\r\nlayoutEditor.end = function () {\r\n    layoutEditor.opened = false;\r\n    document.body.classList.remove('layout-editor-opened');\r\n    options.disJoyXAxis = false; // default\r\n    options.disJoyYAxis = false; // default\r\n    resizeJoystick();\r\n    document.removeEventListener('click', click);\r\n    document.removeEventListener('touchstart', touchStart);\r\n    document.removeEventListener('touchmove', touchMove);\r\n    document.removeEventListener('touchend', touchEnd);\r\n    document.removeEventListener('mousedown', mouseDown);\r\n    document.removeEventListener('mouseup', mouseMove);\r\n    document.removeEventListener('mousemove', mouseUp);\r\n    toast('Modo edição desativado');\r\n};\r\n","import './backend-integration';\r\nimport './element-actions';\r\nimport './interactions';\r\nimport './joystick';\r\nimport './layout';\r\nimport './motion-control';\r\nimport './user-interface';\r\nimport './layout-editor';\r\ndocument.addEventListener('contextmenu', function (e) { return e.preventDefault(); });\r\nwindow.addEventListener('load', function () {\r\n    document.body.classList.remove('preload');\r\n});\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t698: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkjoystick\"] = self[\"webpackChunkjoystick\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [817,934], () => (__webpack_require__(806)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","joyLUp","joyLLeft","joyLDown","joyLRight","joyRUp","joyRLeft","joyRDown","joyRRight","padUp","padLeft","padDown","padRight","actUp","actLeft","actDown","actRight","left1","left2","left3","right1","right2","right3","select","start","pause","load","save","fast","volUp","volDown","lastVibration","Date","now","vibrate","pattern","force","time","Array","isArray","reduce","a","c","Number","navigator","Controller","buttons","groups","joysticks","layouts","currentLayout","currentTouches","elements","all","window","ls","getOpt","name","defaultValue","value","options","ip","layout","player","password","debug","locked","hidden","invertL","invertR","disJoyXAxis","disJoyYAxis","dblClickLoadSave","changeKeyOnDrag","vibrateJoystick","vibrationFromGame","vgamepad","bgImage","bgOpacity","bgBlur","colorsBackground","colorsColor","colorsBorder","colorsActive","customCSS","customJS","driveSensitivity","drivePrecision","Toast","element","this","content","querySelector","toasts","showing","prototype","show","message","html","push","classList","remove","length","setTimeout","run","bind","add","toast","shift","$toast","document","createElement","innerHTML","body","appendChild","$toastCSS","toastObj","triedToAuthenticate","commands","INFO","data","AUTH_FAILED","prompt","localStorage","setItem","loading","location","reload","socket","socketConnect","ws","WebSocket","err","console","error","closed","addEventListener","send","e","_a","split","cmd","slice","command","join","recordingMacro","playingMacro","lastMacro","loadState","layoutEditor","opened","sendCmd","saveState","recordMacro","instance","active","playMacro","thisArg","_arguments","P","generator","_i","lastMacro_1","f","y","t","g","_","label","sent","trys","ops","next","verb","Symbol","iterator","n","v","op","TypeError","call","done","pop","step","__generator","_b","press","readyState","Promise","r","release","resolve","reject","fulfilled","rejected","result","then","apply","fullScreen","documentElement","requestFullscreen","$root","$edit","$bgImage","$deviceInfo","$DIBattery","$DIBatteryIcon","$DIBatteryLevel","$DIClock","$DIPlayerNumber","$DILayout","$controllerIndicator","$layout","$viewport","controllerIndicatorClass","keys","custom","map","key","concat","V","toLowerCase","parseInt","extendStatics","EventEmitter","events","on","listener","_this","event_1","event_2","off","event_3","idx","indexOf","splice","emit","args","arguments","event_4","forEach","once","_loop_1","event_5","this_1","__extends","d","b","Object","setPrototypeOf","__proto__","p","hasOwnProperty","String","__","constructor","create","_super","ElementComponent","details","type","id","x","anchorX","anchorY","width","height","render","el","style","left","right","top","bottom","transform","editing","toObject","__assign","assign","s","i","ButtonComponent","customAction","lockable","diagonal","targets","scalable","border","radius","fontSize","$button","dataset","targets_1","includes","targets_2","borderTop","borderRight","borderBottom","borderLeft","borderRadius","innerText","$icon","_html","action","Element","JoystickComponent","size","padding","position","up","down","$joystick","nipple","destroy","zone","mode","lockX","lockY","touchEnd","_loop_2","touch","identifier","target","Button","_c","from","changedTouches","elementFromPoint","clientX","clientY","Joystick","parentElement","joystick","oldtouch","_d","updateJoystick","_e","distance","Math","round","cos","angle","radian","sin","isNaN","direction","update","dir","getKeyAndBorder","degree","resizeJoystick","outerHeight","outerWidth","setAttribute","j","GroupComponent","parsedContent","$group","loadDriveMode","drive","driveHTML","ondevicemotion","driveY","driveAngle","lastDirections","land","inverted","accelerationIncludingGravity","parseFloat","toFixed","$steeringWheel","children","SENSITIVITY","PRECISION","getArrowAngle","directions_1","directions","getDirections","pressKeys","filter","unpressKeys","to","pack","ar","l","__spreadArray","startSensor","protocol","hostname","display","getAllElements","object","parseElement","objectID","import","find","importElement","group_1","Group","parent","href","Error","alert","parsedLayout","allElements","loadStateBtn","saveStateBtn","recordMacroBtn","playMacroBtn","loadElementActions","loadLayout","end","backgroundImage","opacity","setProperty","$customCSS","textContent","append","confirm","Function","updateBattery","battery","charging","level","roundLevel","updateClock","hours","getHours","toString","padStart","minutes","getMinutes","getBattery","catch","setInterval","$hAnchor","$vAnchor","$editBox","updateAnchorLines","removeAttribute","editingElement","posX","posY","Tree","interacting","root","$groupContent","$tree","createDocumentFragment","$name","escapedIcon","escapeHTML","_getIcon","escapedName","$element","tree","Toolbar","_this_1","showingMore","max","$showLayoutTree","$toolbarShowMore","$modes","querySelectorAll","$mode","$anchorX","$anchorY","offsetWidth","offsetHeight","_x","_y","disabled","toolbar","deltaX","deltaY","gridX","GRID_SIZE","gridY","parentWidth","clientWidth","percentageX","percentageY","_imaginaryX","_imaginaryY","move","_imaginarySize","_imaginaryPadding","_imaginaryWidth","_imaginaryHeight","resize","click","path","removeAnchorLines","addAnchorLines","mousePressed","mouseDown","mouseUp","mouseMove","removeEventListener","preventDefault","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","O","chunkIds","fn","priority","notFulfilled","Infinity","every","getter","__esModule","definition","o","defineProperty","enumerable","get","obj","prop","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}