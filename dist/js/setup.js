(()=>{"use strict";const e={joyLUp:["W","T","058","195"],joyLLeft:["A","F","063","196"],joyLDown:["S","G","096","197"],joyLRight:["D","H","097","198"],joyRUp:["5","9","098","199"],joyRLeft:["6","0","099","200"],joyRDown:["7","[","100","201"],joyRRight:["8","]","101","202"],padUp:["UP","Z","102","203","XUSB_GAMEPAD_DPAD_UP"],padLeft:["LEFT","X","103","204","XUSB_GAMEPAD_DPAD_LEFT"],padDown:["DOWN","C","104","205","XUSB_GAMEPAD_DPAD_DOWN"],padRight:["RIGHT","V","105","206","XUSB_GAMEPAD_DPAD_RIGHT"],actUp:["I","B","106","207","XUSB_GAMEPAD_Y"],actLeft:["J","N","107","208","XUSB_GAMEPAD_X"],actDown:["K","M","108","209","XUSB_GAMEPAD_A"],actRight:["L","Ç","109","210","XUSB_GAMEPAD_B"],left1:["Q","Y","110","211","XUSB_GAMEPAD_LEFT_SHOULDER"],left2:["1","3","111","212","XUSB_GAMEPAD_LEFT_TRIGGER"],left3:[";","´","187","213","XUSB_GAMEPAD_LEFT_THUMB"],right1:["E","U","188","214","XUSB_GAMEPAD_RIGHT_SHOULDER"],right2:["2","4","189","215","XUSB_GAMEPAD_RIGHT_TRIGGER"],right3:[".","~","190","216","XUSB_GAMEPAD_RIGHT_THUMB"],select:["ENTER","P","193","217","XUSB_GAMEPAD_BACK"],start:["SPACE","O","231","218","XUSB_GAMEPAD_START"],pause:["ESC","ESC","ESC","ESC","ESC"],load:["F1","F1","F1","F1","F1"],save:["[","[","[","[","["],fast:["TAB","TAB","TAB","TAB","TAB"],volUp:["MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP"],volDown:["MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN"]},t={snes:{pause:100,sequence:["padUp","padLeft","padDown","padRight","actDown","actRight","actLeft","actUp","start","select","left1","right1"]},snesSave:{pause:100,sequence:["["]},snesLoad:{pause:100,sequence:["F1"]},ps2:{pause:1e3,sequence:["select","left3","right3","start","padUp","padRight","padDown","padLeft","left2","right2","left1","right1","actUp","actRight","actDown","actLeft","joyLUp","joyLRight","joyLDown","joyLLeft","joyRUp","joyRRight","joyRDown","joyRLeft"]},psp:{pause:150,sequence:["UP","LEFT","RIGHT","SPACE","padUp","DOWN","SPACE","padDown","DOWN","SPACE","padLeft","DOWN","SPACE","padRight","DOWN","SPACE","actRight","DOWN","SPACE","actDown","DOWN","SPACE","actLeft","DOWN","SPACE","actUp","DOWN","SPACE","start","DOWN","SPACE","select","DOWN","SPACE","left1","DOWN","SPACE","right1","DOWN","SPACE","joyLUp","DOWN","SPACE","joyLDown","DOWN","SPACE","joyLLeft","DOWN","SPACE","joyLRight","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","SPACE","pause","DOWN","DOWN","DOWN","DOWN","SPACE","save","DOWN","SPACE","load","ESC"]}};var n=function(e,t,n,o){return new(n||(n=Promise))((function(a,c){function s(e){try{i(o.next(e))}catch(e){c(e)}}function r(e){try{i(o.throw(e))}catch(e){c(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}i((o=o.apply(e,t||[])).next())}))},o=function(e,t){var n,o,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function r(c){return function(r){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(a=2&c[0]?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,o=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){s=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){s.label=c[1];break}if(6===c[0]&&s.label<a[1]){s.label=a[1],a=c;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(c);break}a[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(e){c=[6,e],o=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,r])}}};window.addEventListener("load",(function(){document.body.classList.remove("preload")})),document.querySelectorAll("a").forEach((function(e){return e.addEventListener("click",f)}));var a=document.querySelector(".progress"),c=a.querySelector(".bar"),s=a.querySelector(".cancel"),r=document.querySelector(".ip"),i=document.querySelector(".connectStatus"),l=localStorage.getItem("joystick.options.code")||window.location.hostname+":5000";r.innerText=l;var u=function e(){var t=new WebSocket("ws://"+l);return i.classList.remove("connected","disconnected"),i.classList.add("connecting"),t.addEventListener("open",(function(e){i.classList.remove("connecting","disconnected"),i.classList.add("connected")})),t.addEventListener("close",(function(n){i.classList.remove("connecting","connected"),i.classList.add("disconnected"),setTimeout((function(){return u=e()}),3e3),t.send("PASSWORD "+(localStorage.getItem("joystick.password")||""))})),t.addEventListener("message",(function(e){var t=e.data.split(" "),n=t[0];if(t.slice(1),"AUTH_FAILED"===n.toUpperCase()){i.classList.remove("connecting","connected"),i.classList.add("disconnected");var o=prompt("O computador requer uma senha para se conectar ao MobyStk");if(null===o)return;localStorage.setItem("joystick.password",o),f(),window.location.reload()}})),t}();function d(e,t,n,o){if(e>0){switch(a.classList.remove("hidden"),e){case 1:a.classList.remove("complete","stopped");break;case 2:a.classList.add("complete");break;case 3:a.classList.add("stopped")}if(e>=2&&(c.style.transition="",setTimeout((function(){return d(0)}),2e3)),t&&n){c.style.transition=o+"ms linear";var s=1/(n-1)*Number(t)*100;c.style.width=s+"%"}}else setTimeout((function(){a.classList.add("hidden"),c.style.transition="",setTimeout((function(){a.classList.remove("complete","stopped"),c.style.width="0",p(!1)}),150)}),2e3)}function p(e){void 0===e&&(e=!1),document.querySelectorAll(".app .actions button").forEach((function(t){t.disabled=e}))}function D(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){return[2,new Promise((function(t){setTimeout(t,e)}))]}))}))}document.querySelectorAll(".app .actions .start").forEach((function(a){var c=a.dataset,r=c.app,i=c.player;a.addEventListener("click",(function(){return function(a,c){return n(this,void 0,void 0,(function(){var n,r,i,l,E,f,A,L;return o(this,(function(o){switch(o.label){case 0:for(f in n=!1,s.addEventListener("click",(function(){return n=!0})),i=(r=t[a]).sequence,l=r.pause,d(1),p(!0),E=[],i)E.push(f);A=0,o.label=1;case 1:return A<E.length?(L=E[A],1!==u.readyState||n?[2,d(3)]:(function(t,n){var o;t=(null===(o=e[t])||void 0===o?void 0:o[n-1])||t,console.log(t),1===u.readyState&&(t.startsWith("*")?u.send(t.substr(1)):u.send("T "+t))}(i[L],c),d(1,L,i.length,l),[4,D(l)])):[3,4];case 2:o.sent(),o.label=3;case 3:return A++,[3,1];case 4:return d(2),[2]}}))}))}(r,i)}))}));var E=document.querySelector(".loadingScreen");function f(){E.classList.add("visible")}})();