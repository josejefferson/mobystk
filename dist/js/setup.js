(()=>{var t={860:function(t){!function(e,n){var i={version:"2.14.2",areas:{},apis:{},nsdelim:".",inherit:function(t,e){for(var n in t)e.hasOwnProperty(n)||Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n));return e},stringify:function(t,e){return void 0===t||"function"==typeof t?t+"":JSON.stringify(t,e||i.replace)},parse:function(t,e){try{return JSON.parse(t,e||i.revive)}catch(e){return t}},fn:function(t,e){for(var n in i.storeAPI[t]=e,i.apis)i.apis[n][t]=e},get:function(t,e){return t.getItem(e)},set:function(t,e,n){t.setItem(e,n)},remove:function(t,e){t.removeItem(e)},key:function(t,e){return t.key(e)},length:function(t){return t.length},clear:function(t){t.clear()},Store:function(t,e,n){var o=i.inherit(i.storeAPI,(function(t,e,n){return 0===arguments.length?o.getAll():"function"==typeof e?o.transact(t,e,n):void 0!==e?o.set(t,e,n):"string"==typeof t||"number"==typeof t?o.get(t):"function"==typeof t?o.each(t):t?o.setAll(t,e):o.clear()}));o._id=t;try{var r="__store2_test";e.setItem(r,"ok"),o._area=e,e.removeItem(r)}catch(t){o._area=i.storage("fake")}return o._ns=n||"",i.areas[t]||(i.areas[t]=o._area),i.apis[o._ns+o._id]||(i.apis[o._ns+o._id]=o),o},storeAPI:{area:function(t,e){var n=this[t];return n&&n.area||(n=i.Store(t,e,this._ns),this[t]||(this[t]=n)),n},namespace:function(t,e,n){if(n=n||this._delim||i.nsdelim,!t)return this._ns?this._ns.substring(0,this._ns.length-n.length):"";var o=t,r=this[o];if(!(r&&r.namespace||((r=i.Store(this._id,this._area,this._ns+o+n))._delim=n,this[o]||(this[o]=r),e)))for(var s in i.areas)r.area(s,i.areas[s]);return r},isFake:function(t){return t?(this._real=this._area,this._area=i.storage("fake")):!1===t&&(this._area=this._real||this._area),"fake"===this._area.name},toString:function(){return"store"+(this._ns?"."+this.namespace():"")+"["+this._id+"]"},has:function(t){return this._area.has?this._area.has(this._in(t)):!!(this._in(t)in this._area)},size:function(){return this.keys().length},each:function(t,e){for(var n=0,o=i.length(this._area);n<o;n++){var r=this._out(i.key(this._area,n));if(void 0!==r&&!1===t.call(this,r,this.get(r),e))break;o>i.length(this._area)&&(o--,n--)}return e||this},keys:function(t){return this.each((function(t,e,n){n.push(t)}),t||[])},get:function(t,e){var n,o=i.get(this._area,this._in(t));return"function"==typeof e&&(n=e,e=null),null!==o?i.parse(o,n):null!=e?e:o},getAll:function(t){return this.each((function(t,e,n){n[t]=e}),t||{})},transact:function(t,e,n){var i=this.get(t,n),o=e(i);return this.set(t,void 0===o?i:o),this},set:function(t,e,n){var o,r=this.get(t);return null!=r&&!1===n?e:("function"==typeof n&&(o=n,n=void 0),i.set(this._area,this._in(t),i.stringify(e,o),n)||r)},setAll:function(t,e){var n,i;for(var o in t)i=t[o],this.set(o,i,e)!==i&&(n=!0);return n},add:function(t,e,n){var o=this.get(t);if(o instanceof Array)e=o.concat(e);else if(null!==o){var r=typeof o;if(r===typeof e&&"object"===r){for(var s in e)o[s]=e[s];e=o}else e=o+e}return i.set(this._area,this._in(t),i.stringify(e,n)),e},remove:function(t,e){var n=this.get(t,e);return i.remove(this._area,this._in(t)),n},clear:function(){return this._ns?this.each((function(t){i.remove(this._area,this._in(t))}),1):i.clear(this._area),this},clearAll:function(){var t=this._area;for(var e in i.areas)i.areas.hasOwnProperty(e)&&(this._area=i.areas[e],this.clear());return this._area=t,this},_in:function(t){return"string"!=typeof t&&(t=i.stringify(t)),this._ns?this._ns+t:t},_out:function(t){return this._ns?t&&0===t.indexOf(this._ns)?t.substring(this._ns.length):void 0:t}},storage:function(t){return i.inherit(i.storageAPI,{items:{},name:t})},storageAPI:{length:0,has:function(t){return this.items.hasOwnProperty(t)},key:function(t){var e=0;for(var n in this.items)if(this.has(n)&&t===e++)return n},setItem:function(t,e){this.has(t)||this.length++,this.items[t]=e},removeItem:function(t){this.has(t)&&(delete this.items[t],this.length--)},getItem:function(t){return this.has(t)?this.items[t]:null},clear:function(){for(var t in this.items)this.removeItem(t)}}},o=i.Store("local",function(){try{return localStorage}catch(t){}}());o.local=o,o._=i,o.area("session",function(){try{return sessionStorage}catch(t){}}()),o.area("page",i.storage("page")),"function"==typeof n&&void 0!==n.amd?n("store2",[],(function(){return o})):t.exports?t.exports=o:(e.store&&(i.conflict=e.store),e.store=o)}(this,this&&this.define)}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t={joyLUp:["W","T","058","195"],joyLLeft:["A","F","063","196"],joyLDown:["S","G","096","197"],joyLRight:["D","H","097","198"],joyRUp:["5","9","098","199"],joyRLeft:["6","0","099","200"],joyRDown:["7","[","100","201"],joyRRight:["8","]","101","202"],padUp:["UP","Z","102","203","XUSB_GAMEPAD_DPAD_UP"],padLeft:["LEFT","X","103","204","XUSB_GAMEPAD_DPAD_LEFT"],padDown:["DOWN","C","104","205","XUSB_GAMEPAD_DPAD_DOWN"],padRight:["RIGHT","V","105","206","XUSB_GAMEPAD_DPAD_RIGHT"],actUp:["I","B","106","207","XUSB_GAMEPAD_Y"],actLeft:["J","N","107","208","XUSB_GAMEPAD_X"],actDown:["K","M","108","209","XUSB_GAMEPAD_A"],actRight:["L","Ç","109","210","XUSB_GAMEPAD_B"],left1:["Q","Y","110","211","XUSB_GAMEPAD_LEFT_SHOULDER"],left2:["1","3","111","212","XUSB_GAMEPAD_LEFT_TRIGGER"],left3:[";","´","187","213","XUSB_GAMEPAD_LEFT_THUMB"],right1:["E","U","188","214","XUSB_GAMEPAD_RIGHT_SHOULDER"],right2:["2","4","189","215","XUSB_GAMEPAD_RIGHT_TRIGGER"],right3:[".","~","190","216","XUSB_GAMEPAD_RIGHT_THUMB"],select:["ENTER","P","193","217","XUSB_GAMEPAD_BACK"],start:["SPACE","O","231","218","XUSB_GAMEPAD_START"],pause:["ESC","ESC","ESC","ESC","ESC"],load:["F1","F1","F1","F1","F1"],save:["[","[","[","[","["],fast:["TAB","TAB","TAB","TAB","TAB"],volUp:["MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP"],volDown:["MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN"]},e={snes:{pause:100,sequence:["padUp","padLeft","padDown","padRight","actDown","actRight","actLeft","actUp","start","select","left1","right1"]},snesSave:{pause:100,sequence:["["]},snesLoad:{pause:100,sequence:["F1"]},ps2:{pause:1e3,sequence:["select","left3","right3","start","padUp","padRight","padDown","padLeft","left2","right2","left1","right1","actUp","actRight","actDown","actLeft","joyLUp","joyLRight","joyLDown","joyLLeft","joyRUp","joyRRight","joyRDown","joyRLeft"]},psp:{pause:150,sequence:["UP","LEFT","RIGHT","SPACE","padUp","DOWN","SPACE","padDown","DOWN","SPACE","padLeft","DOWN","SPACE","padRight","DOWN","SPACE","actRight","DOWN","SPACE","actDown","DOWN","SPACE","actLeft","DOWN","SPACE","actUp","DOWN","SPACE","start","DOWN","SPACE","select","DOWN","SPACE","left1","DOWN","SPACE","right1","DOWN","SPACE","joyLUp","DOWN","SPACE","joyLDown","DOWN","SPACE","joyLLeft","DOWN","SPACE","joyLRight","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","DOWN","SPACE","pause","DOWN","DOWN","DOWN","DOWN","SPACE","save","DOWN","SPACE","load","ESC"]}};var i=n(860),o=n.n(i)().namespace("joystick");function r(t,e){var n=o(t);return null===n?e:n}window.ls=o,window.getOpt=r;var s=document.querySelector(".loadingScreen");function a(){s.classList.add("visible")}window.loading=a;var c=document.querySelector(".progress"),u=c.querySelector(".bar"),l=c.querySelector(".cancel"),d=document.querySelector(".ip"),h=(document.querySelector(".connectStatus"),{ip:r("code","localhost:5000"),layout:r("layout"),player:r("player",1)-1,password:r("password"),debug:r("debug",!1),locked:r("locked",[]),hidden:r("hidden",[]),invertL:r("invertL",!1),invertR:r("invertR",!1),disJoyXAxis:r("disJoyXAxis",!1),disJoyYAxis:r("disJoyYAxis",!1),dblClickLoadSave:r("dblClickLoadSave",!1),changeKeyOnDrag:r("changeKeyOnDrag",!0),vibrate:r("vibrate",15),vibrateJoystick:r("vibrateJoystick",5),vibrationFromGame:r("vibrationFromGame",!0),vgamepad:r("vgamepad",!1),bgImage:r("bgImage",""),bgOpacity:r("bgOpacity",.5),bgBlur:r("bgBlur",0),colorsBackground:r("background","rgba(0, 0, 0, 1)"),colorsColor:r("color","rgba(255, 255, 255, 0.53)"),colorsBorder:r("border","rgba(255, 255, 255, 0.53)"),colorsActive:r("active","rgba(255, 255, 255, 0.2)"),customCSS:r("customCSS",""),customJS:r("customJS",""),driveSensitivity:r("driveSensitivity",2),drivePrecision:r("drivePrecision",1)});window.options=h;const f=h;var p=function(){function t(t){this.element=t,this.content=t.querySelector(".toast-content"),this.toasts=[],this.showing=!1}return t.prototype.show=function(t,e,n){return void 0===e&&(e=2e3),void 0===n&&(n=!1),this.toasts.push({message:t,time:e,html:n}),this.showing||this.start(),this},t.prototype.start=function(){if(this.element.classList.remove("show"),!this.toasts.length)return this.showing=!1;this.showing?setTimeout(this.run.bind(this),1e3):this.run(),this.showing=!0},t.prototype.run=function(){this.element.classList.add("show");var t=this.toasts.shift();this.content[t.html?"innerHTML":"innerText"]=t.message,setTimeout(this.start.bind(this),t.time||2e3)},t}(),m=document.createElement("div");m.classList.add("toast"),m.innerHTML='<div class="toast-content"></div>',document.body.appendChild(m);var y=document.createElement("style");y.innerHTML="\n@import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed&display=swap');\n\n.toast {\n\t-webkit-box-align: center;\n\t-ms-flex-align: center;\n\talign-items: center;\n\tbackground-color: rgba(85, 85, 85, 0.9);\n\tborder-radius: 22px;\n\tbottom: 48px; \n\t-webkit-box-sizing: border-box;\n\tbox-sizing: border-box;\n\tcolor: #FFFFFF;\n\tdisplay: -webkit-inline-box;\n\tdisplay: -ms-inline-flexbox;\n\tdisplay: inline-flex;\n\tfont-family: 'Roboto Condensed', Roboto, Arial, sans-serif;\n\tfont-size: 15.8px;\n\tleft: 50%;\n\tline-height: 17.6px;\n\tmargin: 16px;\n\tmax-width: 320px;\n\tmin-height: 44px;\n\topacity: 0;\n\tpadding: 13.8px 25px;\n\tpointer-events: none;\n\tposition: fixed;\n\ttext-align: left;\n\ttext-shadow: black 0 0 2px;\n\t-webkit-transform: translateX(calc(-50% - 16px));\n\t-ms-transform: translateX(calc(-50% - 16px));\n\ttransform: translateX(calc(-50% - 16px));\n\t-webkit-transition: opacity 500ms cubic-bezier(0.5, 1, 0.89, 1);\n\t-o-transition: opacity 500ms cubic-bezier(0.5, 1, 0.89, 1);\n\ttransition: opacity 500ms cubic-bezier(0.5, 1, 0.89, 1);\n\twidth: -webkit-fit-content;\n\twidth: -moz-fit-content;\n\twidth: fit-content;\n\tz-index: 99999999999;\n}\n\n.toast.show {\n\topacity: 1;\n\t-webkit-transition: opacity 500ms cubic-bezier(0.11, 0, 0.5, 0);\n\t-o-transition: opacity 500ms cubic-bezier(0.11, 0, 0.5, 0);\n\ttransition: opacity 500ms cubic-bezier(0.11, 0, 0.5, 0);\n}\n\n/*.toast .toast-content {\n\tletter-spacing: -0.03px;\n\tline-height: 17.6px;\n\t-webkit-transform: scaleY(1.11);\n\t-ms-transform: scaleY(1.11);\n\ttransform: scaleY(1.11);\n}*/\n",document.body.appendChild(y);var v=new p(m),g=function(t,e,n){return void 0===e&&(e=2e3),void 0===n&&(n=!1),v.show(t,e,n)};window.toast=g;var _,b=document.querySelector(".ping"),A=!1,D=Date.now(),E={INFO:function(t){g(t)},AUTH_FAILED:function(){if(!A){document.body.classList.remove("connecting","connected"),document.body.classList.add("disconnected");var t=prompt("O computador requer uma senha para se conectar ao MobyStk");null!==t&&(localStorage.setItem("joystick.password",t),A=!0,a(),window.location.reload())}},pong:function(t){Number(t)===_&&(b&&(b.innerText=String(Date.now()-D)+"ms"),_=void 0)}},S=w();function w(){var t;try{t=new WebSocket("ws://"+f.ip)}catch(t){return console.error(t),void e()}function e(){document.body.classList.remove("connecting","connected"),document.body.classList.add("disconnected"),setTimeout((function(){return S=w()}),3e3)}return t.addEventListener("open",(function(){document.body.classList.remove("connecting","disconnected"),document.body.classList.add("connected"),t.send("PASSWORD "+(f.password||""))})),t.addEventListener("close",e),t.addEventListener("message",(function(t){var e=t.data.split(" "),n=e[0],i=e.slice(1),o=E[n];"function"==typeof o&&o(i.join(" "))})),document.body.classList.remove("connected","disconnected"),document.body.classList.add("connecting"),t}window.socket=S,window.socketConnect=w,setInterval((function(){_&&b&&(b.innerText="+999ms"),_=Math.floor(1e6*Math.random()),D=Date.now(),S.send("ping ".concat(_))}),1e3);var L=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))},O=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};window.addEventListener("load",(function(){document.body.classList.remove("preload")})),document.querySelectorAll("a").forEach((function(t){return t.addEventListener("click",a)}));var P=r("code",window.location.hostname+":5000");function U(t,e,n,i){if(t>0){switch(c.classList.remove("hidden"),t){case 1:c.classList.remove("complete","stopped");break;case 2:c.classList.add("complete");break;case 3:c.classList.add("stopped")}if(t>=2&&(u.style.transition="",setTimeout((function(){return U(0)}),2e3)),e&&n){u.style.transition=i+"ms linear";var o=1/(n-1)*Number(e)*100;u.style.width=o+"%"}}else setTimeout((function(){c.classList.add("hidden"),u.style.transition="",setTimeout((function(){c.classList.remove("complete","stopped"),u.style.width="0",x(!1)}),150)}),2e3)}function x(t){void 0===t&&(t=!1),document.querySelectorAll(".app .actions button").forEach((function(e){e.disabled=t}))}function M(t){return L(this,void 0,void 0,(function(){return O(this,(function(e){return[2,new Promise((function(e){setTimeout(e,t)}))]}))}))}d.innerText=P,document.querySelectorAll(".app .actions .start").forEach((function(n){var i=n.dataset,o=i.app,r=i.player;n.addEventListener("click",(function(){return function(n,i){return L(this,void 0,void 0,(function(){var o,r,s,a,c,u,d,h;return O(this,(function(f){switch(f.label){case 0:for(u in o=!1,l.addEventListener("click",(function(){return o=!0})),s=(r=e[n]).sequence,a=r.pause,U(1),x(!0),c=[],s)c.push(u);d=0,f.label=1;case 1:return d<c.length?(h=c[d],1!==S.readyState||o?[2,U(3)]:(function(e,n){var i;e=(null===(i=t[e])||void 0===i?void 0:i[Number(n)-1])||e,console.log(e),1===S.readyState&&(e.startsWith("*")?S.send(e.substr(1)):S.send("T "+e))}(s[h],i),U(1,h,s.length,a),[4,M(a)])):[3,4];case 2:f.sent(),f.label=3;case 3:return d++,[3,1];case 4:return U(2),[2]}}))}))}(o,r)}))}))})()})();
//# sourceMappingURL=setup.js.map