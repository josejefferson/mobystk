import{e as l,f as u,g as e}from"./chunk-QGJALF3G.js";var D={joyLUp:["W","T","058","195"],joyLLeft:["A","F","063","196"],joyLDown:["S","G","096","197"],joyLRight:["D","H","097","198"],joyRUp:["5","9","098","199"],joyRLeft:["6","0","099","200"],joyRDown:["7","[","100","201"],joyRRight:["8","]","101","202"],padUp:["UP","Z","102","203","XUSB_GAMEPAD_DPAD_UP"],padLeft:["LEFT","X","103","204","XUSB_GAMEPAD_DPAD_LEFT"],padDown:["DOWN","C","104","205","XUSB_GAMEPAD_DPAD_DOWN"],padRight:["RIGHT","V","105","206","XUSB_GAMEPAD_DPAD_RIGHT"],actUp:["I","B","106","207","XUSB_GAMEPAD_Y"],actLeft:["J","N","107","208","XUSB_GAMEPAD_X"],actDown:["K","M","108","209","XUSB_GAMEPAD_A"],actRight:["L","\xC7","109","210","XUSB_GAMEPAD_B"],left1:["Q","Y","110","211","XUSB_GAMEPAD_LEFT_SHOULDER"],left2:["1","3","111","212","XUSB_GAMEPAD_LEFT_TRIGGER"],left3:[";","\xB4","187","213","XUSB_GAMEPAD_LEFT_THUMB"],right1:["E","U","188","214","XUSB_GAMEPAD_RIGHT_SHOULDER"],right2:["2","4","189","215","XUSB_GAMEPAD_RIGHT_TRIGGER"],right3:[".","~","190","216","XUSB_GAMEPAD_RIGHT_THUMB"],select:["ENTER","P","193","217","XUSB_GAMEPAD_BACK"],start:["SPACE","O","231","218","XUSB_GAMEPAD_START"],pause:["ESC","ESC","ESC","ESC","ESC"],load:["F1","F1","F1","F1","F1"],save:["[","[","[","[","["],fast:["TAB","TAB","TAB","TAB","TAB"],volUp:["MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP","MEDIA_VOLUME_UP"],volDown:["MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN","MEDIA_VOLUME_DOWN"]};window.keymappings=D;var G=D;var a=document.documentElement,E=document.querySelector(".edit"),m=document.querySelector(".backgroundImage"),n=document.querySelector(".deviceInfo"),A=n.querySelector(".battery"),r=A.querySelector(".battery-icon"),_=A.querySelector(".battery-level"),S=n.querySelector(".clock"),M=n.querySelector(".player .player-number"),C=n.querySelector(".status"),I=document.querySelector(".ping"),b=document.querySelector(".controller-indicator"),R=document.querySelector(".controller-layout"),H=document.querySelector('meta[name="viewport"]');e.hidden.includes("mobystk:deviceInfo")&&n.classList.add("hidden");e.hidden.includes("mobystk:ping")&&I.classList.add("hidden");E.addEventListener("click",l);E.addEventListener("contextmenu",()=>{window.layoutEditor.opened?window.layoutEditor.end():window.layoutEditor.start()});e.layout||(location.href="index.html");e.debug&&document.body.classList.add("debug");e.invertL&&document.body.classList.add("invertL");e.invertR&&document.body.classList.add("invertR");e.bgImage&&(m.style.backgroundImage=`url('${e.bgImage}')`);e.bgOpacity&&(m.style.opacity=String(e.bgOpacity));e.bgBlur&&(m.style.filter=`blur(${e.bgBlur}px)`);e.colorsBackground&&a.style.setProperty("--background",e.colorsBackground);e.colorsColor&&a.style.setProperty("--color",e.colorsColor);e.colorsBorder&&a.style.setProperty("--border",e.colorsBorder);e.colorsActive&&a.style.setProperty("--active",e.colorsActive);var T=document.createElement("style");T.textContent=e.customCSS;document.body.append(T);if(e.customJS&&e.customJS.trim()&&confirm("Deseja executar os plugins?"))try{new Function(e.customJS.trim())()}catch(t){alert(`Ocorreu um erro ao executar os plugins

`+(t?.message||""))}if(e.pluginMobile){let t=document.createElement("script");t.src="lib/plugins/mobile.js",t.onerror=()=>u("Erro ao carregar plugin MobyStk Mobile"),document.body.appendChild(t)}navigator.getBattery?.()?.then(t=>{f(t),t.addEventListener("chargingchange",o=>f(o.target)),t.addEventListener("levelchange",o=>f(o.target))}).catch(console.error);function f(t){r.classList.remove(...Array.from(r.classList)),r.classList.add("mdi");let o=t.charging,s=t.level*100,i=Math.round(s/10)*10;_.innerText=Math.round(s)+"% \u2022",i===0?r.classList.add("mdi-battery-outline"):i===100?r.classList.add("mdi-battery"+(o?"-charging-100":"")):r.classList.add("mdi-battery-"+(o?"charging-":"")+i)}window.setInterval(U,1e3);U();p();function U(){let t=new Date().getHours().toString().padStart(2,"0"),o=new Date().getMinutes().toString().padStart(2,"0");S.innerText=t+":"+o}function p(){let t=e.useKeyboard?"mdi-keyboard":"mdi-google-controller";b.classList.add(t),M.innerText=(e.useKeyboard?"Teclado ":"Controle ")+String(e.player+1)}e.debug&&n.addEventListener("click",()=>{e.player+=1,e.player>3&&(e.player=0),p()});var y=document.querySelector(".ping"),v=!1,d,B=Date.now(),x={INFO:t=>{u(t)},AUTH_FAILED:()=>{if(v)return;document.body.classList.remove("connecting","connected"),document.body.classList.add("disconnected");let t=prompt("O computador requer uma senha para se conectar ao MobyStk");t!==null&&(localStorage.setItem("joystick.password",t),v=!0,l(),window.location.reload())},VGAMEPAD:t=>{t==="false"&&(e.useKeyboard=!0,p())},pong:t=>{Number(t)===d&&(y&&(y.innerText=String(Date.now()-B)+"ms"),d=void 0)}};window.socketConnect=k;var P=()=>window.socketConnect(),c=P();function k(){let t;try{t=new WebSocket("ws://"+e.ip)}catch(g){e.debug&&console.error(g),s();return}t.addEventListener("open",o),t.addEventListener("close",s),t.addEventListener("message",i),document.body.classList.remove("connected","disconnected"),document.body.classList.add("connecting");function o(){document.body.classList.remove("connecting","disconnected"),document.body.classList.add("connected"),t.send("PASSWORD "+(e.password||""))}function s(){document.body.classList.remove("connecting","connected"),document.body.classList.add("disconnected"),setTimeout(()=>c=P(),3e3)}function i(g){let[w,...h]=g.data.split(" "),L=x[w];typeof L=="function"&&L(h.join(" "))}return t}window.socket=c;function $(){!c||c.readyState!==c.OPEN||(d&&y&&(y.innerText="+999ms"),d=Math.floor(Math.random()*1e6),B=Date.now(),c?.send(`ping ${d}`))}setInterval($,1e3);export{G as a,b,R as c,H as d,x as e,c as f};
